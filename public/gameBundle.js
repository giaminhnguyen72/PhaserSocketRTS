(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Decoder:()=>Qt,Encoder:()=>Ft,PacketType:()=>Kt,protocol:()=>Ut});class s{constructor(t={keyboard:!1,mouse:!1}){this.tag="EVENTHANDLER",this.deleted=[],this.components=new Map,this.events=[],this.eventConfig=t,window.addEventListener("click",(t=>{this.events.push("click")})),window.addEventListener("keydown",(t=>{this.events.push(t.key)}))}registerListener(){}registerEmitter(){}getConfig(){return this.eventConfig}register(t,e){null!=t.componentId&&null!=t.componentId||(t.componentId=e,t.system=this,this.components.set(e,t)),console.log("Event Handler registered")}unregister(t){let e=this.components.get(t);e&&(e.alive=!1,this.deleted.push(e))}update(t){console.log("Event Handler"),console.log("Event  Handler Components:"+this.components.size),this.components.size;let e=[...this.components.keys()];for(let s of e)this.components.get(s).update(t);for(;this.deleted.length>0;){let t=this.deleted.pop();this.components.delete(t?.componentId)}this.events=[]}}const i="GRAPHICS";class n{constructor(t){this.getQuad=new Map,this.parentNode=new o(t)}query(t){return this.parentNode.query(t)}clear(){this.parentNode.clear()}insert(t){let e=this.parentNode.insert(t);return this.getQuad.set(t,e),e}remove(t){let e=this.getQuad.get(t);if(!e)throw new Error;e.remove(t),this.getQuad.delete(t)}toString(){return this.parentNode.toString()}}class o{constructor(t,e=0){this.children=[],this.items=[],this.depth=0,this.maxDepth=3,this.area=t,this.depth=e,this.resize(t)}query(t){let e=[];return this.queryHelper(t,e),e}queryHelper(t,e){for(let s=0;s<this.items.length;s++)h(t,this.items[s].getRectangle())&&e.push(this.items[s]);for(let s=0;s<this.children.length;s++)r(t,this.children[s].area)?this.children[s].getItemList(e):h(this.children[s].area,t)&&this.children[s].queryHelper(t,e)}getItemList(t){for(let e of this.items)t.push(e);for(let e=0;e<this.children.length;e++)this.children[e].getItemList(t)}remove(t){for(let e=this.items.length-1;e>=0;e--)if(this.items[e]==t)return this.items[e]=this.items[this.items.length-1],this.items.pop(),!0;for(let e of this.children)if(e.remove(t))return!0;return!1}getRectangle(){return this.area}resize(t){this.clear(),this.area=t,this.depth+1<this.maxDepth&&(this.children.push(new o({pos:{x:t.pos.x-t.dim.length/4,y:t.pos.y+t.dim.height/4},dim:{length:t.dim.length/2,height:t.dim.height/2}},this.depth+1)),this.children.push(new o({pos:{x:t.pos.x-t.dim.length/4,y:t.pos.y-t.dim.height/4},dim:{length:t.dim.length/2,height:t.dim.height/2}},this.depth+1)),this.children.push(new o({pos:{x:t.pos.x+t.dim.length/4,y:t.pos.y+t.dim.height/4},dim:{length:t.dim.length/2,height:t.dim.height/2}},this.depth+1)),this.children.push(new o({pos:{x:t.pos.x+t.dim.length/4,y:t.pos.y-t.dim.height/4},dim:{length:t.dim.length/2,height:t.dim.height/2}},this.depth+1)))}clear(){this.items.length=0;for(let t=this.children.length-1;t>=0;t--)this.children[t].clear(),this.children.pop()}size(){let t=this.items.length;for(let e=0;e<4;e++)t+=this.children[e].size();return t}insert(t){for(let e=0;e<this.children.length;e++)if(r(this.children[e].area,t.getRectangle())&&this.depth+1<this.maxDepth)return this.children[e].insert(t);return this.items.push(t),this}toString(){let t="";for(let e=0;e<this.depth;e++)t+="     ";let e=""+t;e+=`Quad Position is ${this.area.pos.x},${this.area.pos.y} with area ${this.area.dim.height} x ${this.area.dim.height} \n`,e+=t,e+="Quad has "+this.children.length+" children at depth "+this.depth+"\n",e+=t,e+="Quad has "+this.items.length+" items\n",e+=t;for(let t of this.items)e+=JSON.stringify(t),e+="\n";for(let s of this.children)e+=t+"\n",e+=s;return e}}function r(t,e){let s=e.pos.x-e.dim.length/2,i=e.pos.y-e.dim.height/2,n=t.pos.x-t.dim.length/2,o=t.pos.y-t.dim.height/2;return s>=n&&s+e.dim.length<n+t.dim.length&&i>=o&&i+e.dim.height<o+t.dim.height}function h(t,e){let s=t.pos.x-t.dim.length/2,i=t.pos.y-t.dim.height/2,n=e.pos.x-e.dim.length/2,o=e.pos.y-e.dim.height/2;return s<n+e.dim.length&&s+t.dim.length>n&&i<o+e.dim.height&&i+t.dim.height>o}class a{constructor(t,e){this.registedElements=[],this.quadtree=new n(e)}registerStrategy(t){this.quadtree.insert(t)}deregisterStrategy(t){this.quadtree.remove(t)}render(t){for(let e of t){let t=e.getRectangle(),s=this.quadtree.query(t);e.render(s)}}clear(){}}class c{constructor(t,e){this.tag=i,this.rendering=[],this.graphicsConfig=t,this.components=new Map,this.deleted=[],document.documentElement.style.height="100%",document.documentElement.style.width="100%",document.body.style.height="100%",document.body.style.width="100%",document.body.style.margin="0",this.contextInfo=e;let s={pos:{x:0,y:0,z:0},rot:0,dim:{length:this.contextInfo.getCanvas().width,height:this.contextInfo.getCanvas().height}};this.renderStrategy=new a(this,s)}register(t,e){null==t.componentId||null==t.componentId?(console.log("Registering undefined id in Ggraphics"),t.componentId=e,t.system=this,t.context=this.contextInfo,1==t.rendered&&(this.rendering.push(t),console.log("Pushing to rendering")),t.initialize(this),this.components.set(e,t)):(console.log("Graphics Registering id"+t.componentId),t.system=this,t.context=this.contextInfo,1==t.rendered?(this.rendering.push(t),console.log("Pushing to rendering")):0==t.rendered&&(this.renderStrategy.registerStrategy(t),console.log("Registered Strategy")),t.initialize(this),this.components.set(t.componentId,t))}unregister(t){let e=this.components.get(t);e&&(e.alive=!1,this.deleted.push(e),this.components.delete(t),this.renderStrategy.deregisterStrategy(e),console.log(e.entity+" s Component with id "+e.componentId+"is popped"))}update(t){this.contextInfo.ctx,console.log("Graphics engine running"),console.log("Graphics Components: "+this.components.size);for(let e of this.components)e[1].update(t);for(console.log("Rendering Components: "+this.rendering.length),this.renderStrategy.render(this.rendering);this.deleted.length>0;){let t=this.deleted.pop();this.components.delete(t?.componentId)}}setScene(t){t.engineComponents.get(this.tag)}registerDomElements(){}}class l{constructor(t){this.tag="PHYSICS",this.deleted=[],this.components=new Map,this.config=t}register(t,e){null==t.componentId||null==t.componentId?(t.system=this,this.components.set(e,t)):(t.system=this,this.components.set(t.componentId,t))}unregister(t){let e=this.components.get(t);e&&(e.alive=!1,this.deleted.push(e),console.log(e.entity+" s Component with id "+e.componentId+"is popped"))}update(t){console.log("Physics engine running"),console.log("Physics Components: "+this.components.size);for(let e of this.components)e[1].update(t);for(;this.deleted.length>0;){let t=this.deleted.pop();this.components.delete(t?.componentId)}}}var p,d;(d=p||(p={}))[d.SOCKETCLIENT=0]="SOCKETCLIENT",d[d.SOCKETSERVER=1]="SOCKETSERVER",d[d.CLIENTONLY=2]="CLIENTONLY",d[d.BOTH=3]="BOTH";class u{constructor(t){this.tag="SCRIPTING",this.deleted=[],this.components=new Map,this.engineType=t}register(t,e){null==t.componentId||null==t.componentId?(t.componentId=e,t.system=this,this.components.set(e,t)):(t.componentId=t.componentId,t.system=this,this.components.set(t.componentId,t))}unregister(t){let e=this.components.get(t);e&&(e.alive=!1,this.deleted.push(e))}initialize(t){}update(t){console.log("Scripting engine running"),console.log("Scripting Components: "+this.components.size);for(let e of this.components)(e[1].engineType==this.engineType||(e[1].engineType=p.BOTH))&&e[1].update(t);for(;this.deleted.length>0;){let t=this.deleted.pop();this.components.delete(t?.componentId)}}}class g{constructor(t){this.graphicsConfig=t,this.graphicsConfig=t,document.documentElement.style.height="100%",document.documentElement.style.width="100%",document.body.style.height="100%",document.body.style.width="100%",document.body.style.margin="0",this.setup(),this.canvas=this.generateCanvas(),this.ctx=this.canvas.getContext("2d"),this.div=this.generateDiv(this.graphicsConfig.parent)}generateDiv(t){let e=document.createElement("div");return e.id=t,e.style.height="100%",e.style.width="100%",e.style.zIndex="0",e.style.display="flex",e.style.justifyContent="center",e.appendChild(this.canvas),document.body.appendChild(e),console.log("test"),e}generateCanvas(){let t=document.createElement("CANVAS");return t.id=this.graphicsConfig.canvasID,console.log(this.parseStyle(this.graphicsConfig.style)),console.log("Before"),t.setAttribute("style",this.parseStyle(this.graphicsConfig.style)),t}getCtx(){return this.getCanvas().getContext("2d")}getCanvas(){let t=document.getElementById(this.graphicsConfig.canvasID);if(t instanceof HTMLCanvasElement)return t;throw Error("engineCanvas should be a reserved id for DOM Components")}parseStyle(t){let e=Object.entries(t).map((([t,e])=>t+":"+e+";"));return console.log(this.graphicsConfig.parent),e.join(" ")}setup(){if(this.graphicsConfig.background){let t=new Image;t.src=this.graphicsConfig.background,t.style.position="absolute",t.style.zIndex="-1",t.style.width="100%",t.style.height="100%",document.body.appendChild(t)}}}class m{constructor(t,e=[],s){this.scenes=new Map,this.id=0,this.componentId=0,this.systems=s,this.systemTag=new Map,this.engineConfig=t;let i=t.engineType;i==p.SOCKETCLIENT?m.EngineType=p.SOCKETCLIENT:i==p.SOCKETSERVER?m.EngineType=p.SOCKETSERVER:m.EngineType=p.CLIENTONLY;for(let t=0;t<e.length;t++){let s=e[t];s.sceneManager=this,s.engineComponents=new Map,console.log("In Scene Manager"),this.scenes.set(s.name,s)}this.setScene(e[0].name),this.sceneConfigs=e,m.currentIdx=this.sceneConfigs[0].name,this.systems=s}switchScenes(t){let e=this.scenes.get(t);if(e)for(var s of this.systems)if(!e.engineComponents.get(s.tag))throw Error("error in start method")}getCurrentScene(){let t=this.scenes.get(m.currentIdx);if(t)return t;throw Error("Cant get current scene")}setScene(t){let e=this.scenes.get(t);e&&(m.currScene=e,m.currentIdx=t)}getUniqueId(){if(m.EngineType==p.SOCKETCLIENT){let t=this.id-1;return this.id--,t}{let t=this.id+1;return this.id++,t}}getUniqueComponentId(){if(m.EngineType==p.SOCKETCLIENT){let t=this.componentId-1;return this.componentId--,t}{let t=this.componentId+1;return this.componentId++,t}}}m.EngineType=p.CLIENTONLY;class f{constructor(t){this.deleted=[],this.system=t}registerComponent(t){}update(t){for(var[e,s]of this.system.components)if(s.visible)for(var[i,n]of this.system.components)n.visible&&s.checkCollision(n)&&s!=n?s.collides(n):n.alive||this.deleted.push(n)}}class y{constructor(t){this.tag="COLLISION",this.components=new Map,this.config=t,this.deleted=[],t.bounds&&(this.bounds=t.bounds),this.collisionStrategy=new f(this)}register(t,e){null==t.componentId||null==t.componentId?(t.componentId=e,t.system=this,this.components.set(e,t)):(t.system=this,this.components.set(t.componentId,t)),this.collisionStrategy.registerComponent(t)}unregister(t){let e=this.components.get(t);e&&(e.alive=!1,this.deleted.push(e))}update(t){for(console.log("Collision System Running"),console.log("Collision Components: "+this.components.size),this.collisionStrategy.update(t);this.deleted.length>0;){let t=this.deleted.pop();t&&this.deleteComponent(t)}}deleteComponent(t){t.componentId&&this.components.delete(t.componentId)}}class v{constructor(t={engineType:p.CLIENTONLY},e){if(this.canvasID="engineCanvas",this.systems=[],this.serverTime=0n,this.clientTime=0,this.engineConfig=t,t.graphicsConfig&&(this.contextInfo=new g(t.graphicsConfig)),this.engineConfig.eventConfig&&this.contextInfo&&this.systems.push(new s(this.engineConfig.eventConfig)),this.engineConfig.physicsConfig&&this.systems.push(new l(this.engineConfig.physicsConfig)),this.engineConfig.scriptingConfig&&this.systems.push(new u(this.engineConfig.engineType)),e)for(let t of e)this.systems.push(t);if(this.engineConfig.collisionConfig&&this.systems.push(new y(this.engineConfig.collisionConfig)),this.engineConfig.graphicsConfig&&this.contextInfo&&(this.graphics=new c(this.engineConfig.graphicsConfig,this.contextInfo),this.systems.push(this.graphics)),e)for(let t of e)this.systems.push(t);this.sceneManager=new m(this.engineConfig,this.engineConfig.sceneConfig,this.systems),this.running=!0,this.running=!1}start(t){this.running=!0,console.log("Startng Engin ");let e=this.sceneManager.getCurrentScene();for(let t of this.systems){let s=this.sceneManager.getCurrentScene().engineComponents.set(t.tag,t.components);if(e.engineComponents.set(t.tag,t.components),this.sceneManager.systemTag.set(t.tag,t),!s)throw Error("error in start method")}let s=e.getSceneConfig(),i=s.entities.length;for(let t=0;t<i;t++)e.addEntity(e,s.entities[t]);this.engineConfig.engineType==p.CLIENTONLY||this.engineConfig.engineType==p.SOCKETCLIENT?window.requestAnimationFrame((t=>{this.update(0),v.time+=0,this.clientTime=t})):setTimeout((()=>{this.running&&(this.serverUpdate(0,t),this.serverTime=process.hrtime.bigint()),console.log("Timeout runout")}),t)}update(t){if(t>0){for(let e of this.systems)e.update(t);console.log(t),window.requestAnimationFrame((t=>{let e=t,s=e-this.clientTime;this.update(s),v.time+=s,this.clientTime=e}))}else window.requestAnimationFrame((t=>{let e=t,s=e-this.clientTime;this.update(s),v.time+=s,this.clientTime=e}))}serverUpdate(t,e){if(t>0){console.log("updating");for(let e of this.systems)e.update(t);setTimeout((()=>{if(this.running){let t=process.hrtime.bigint(),s=Number(t-this.serverTime)/1e6;this.serverUpdate(Number(s),e),v.time+=Number(s),this.serverTime=t,console.log(v.time)}}),e)}else setTimeout((()=>{if(this.running){let t=process.hrtime.bigint(),s=(t-this.serverTime)/1000000n;this.serverUpdate(Number(s),e),v.time+=Number(s),this.serverTime=t}}),e)}}v.updateTime=0,v.time=0;class w{constructor(t="engineDiv",e="engineCanvas",s={},i,n=1e3,o=500){this.width=n,this.height=o,this.parent=t,this.canvasID=e,this.style=s,this.background=i}}class b{constructor(t=[]){this.entities=t}}class C{constructor(t,e={x:0,y:0,z:0},s={x:0,y:0,z:0},i={x:0,y:0,z:0}){this.visible=!0,this.alive=!0,this.engineTag="PHYSICS",this.entity=t,this.pos=e,this.vel=s,this.accel=i}copy(t){this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.pos.z=t.pos.z,this.vel.x=t.vel.x,this.vel.y=t.vel.y,this.vel.z=t.vel.z,this.accel.x=t.accel.x,this.accel.y=t.accel.y,this.accel.z=t.accel.z,this.entity=t.entity,this.componentId=t.componentId,this.visible=t.visible,this.alive=t.alive}update(t){console.log("Position is: "+this.pos.x+" and "+this.pos.y),this.vel.x=this.vel.x+this.accel.x*t,this.vel.y=this.vel.y+this.accel.y*t,this.vel.z=this.vel.z+this.accel.z*t,this.pos.x=this.pos.x+this.vel.x*t,this.pos.y=this.pos.y+this.vel.y*t,this.pos.z=this.pos.z+this.vel.z*t}toJSON(){return{pos:this.pos,vel:this.vel,accel:this.accel,entity:this.entity,componentId:this.componentId,visible:this.visible,alive:this.alive,engineTag:"PHYSICS"}}}function E(t){return t.pos.x-t.dim.length/2}function T(t){return t.pos.y-t.dim.height/2}class x{constructor(t,e,s){this.engineTag="GRAPHICS",this.rendered=!1,this.visible=!0,this.alive=!0,this.entity=t,this.src=s,this.shape=e,this.transform=this.shape.pos}unmount(){}copy(t){if(this.componentId=t.componentId,this.entity=t.entity,this.shape.dim.height=t.shape.dim.height,this.shape.dim.length=t.shape.dim.length,t.shape.pos.x!=t.transform.x)throw new Error;if(t.shape.pos.y!=t.transform.y)throw new Error;if(t.shape.pos.z!=t.transform.z)throw new Error;this.shape.pos.x=t.shape.pos.x,this.shape.pos.y=t.shape.pos.y,this.shape.pos.z=t.shape.pos.z,this.shape.rot=t.shape.rot,this.visible=t.visible,this.transform.x=t.transform.x,this.transform.y=t.transform.y,this.transform.z=t.transform.z}visit(t){}getRectangle(){return this.shape}render(){if(this.context.ctx){let t=E(this.shape),e=T(this.shape);this.context.ctx.drawImage(this.image,t,e,this.shape.dim.length,this.shape.dim.height)}}update(t){}initialize(){this.image=new Image,this.image.src=this.src}setSrc(t){console.log("Source changed"),this.src=t,this.image.src=t}toJSON(){return{entity:this.entity,componentId:this.componentId,engineTag:this.engineTag,transform:this.transform,visible:this.visible,alive:this.alive,src:this.src,shape:this.shape,renderred:this.rendered}}}class k{constructor(t){this.engineTag="EVENTHANDLER",this.visible=!0,this.alive=!0,this.events=new Map,Object.entries(t).map((([t,e])=>{this.events.set(t,e)}))}execute(t){let e=this.events.get(t.eventName);e&&e(t)}getEventType(){return"MOUSE"}copy(t){this.entity=t.entity,this.componentId=t.componentId,this.visible=t.visible,this.alive=t.alive}initialize(t){t.registerListener(this)}update(t,e){console.log("In mouse Listener")}toJSON(){return{entity:this.entity,engineTag:"EVENTHANDLER",componentId:this.componentId,visible:this.visible,alive:this.alive}}getEvents(){return this.events}}class I{constructor(t,e=p.CLIENTONLY){this.engineTag="SCRIPTING",this.visible=!0,this.alive=!0,this.callback=t,this.engineType=e}copy(t){}initialize(){}update(t,e){this.callback(t)}toJSON(){return{entity:this.entity,engineTag:this.engineTag,componenId:this.componentId,callback:this.callback}}}class S{constructor(t={x:20,y:20,z:0},e={x:.1,y:0,z:0},s=p.SOCKETSERVER){this.className="Player";let i={dim:{length:64,height:64},rot:0,pos:t},n=new x(-1,i,"/images/Knight_Forward.png");s==p.SOCKETCLIENT&&(n.rendered=!0,n.src="/images/Templar.png");let o=new C(-1,t,e),r=new I((t=>{console.log("Script runing"),o.pos.x<0&&(o.pos.x=0,o.vel.x*=-1,s==p.SOCKETCLIENT?(console.log(n.src),console.log("Client Hit 0: "+v.time)):(console.log(n.src),console.log("Server Hit 0: "+v.time))),o.pos.x+i.dim.length>500&&(s==p.SOCKETCLIENT?console.log("Client Hit 500: "+v.time):console.log("Server Hit 500: "+v.time),o.pos.x=430,o.vel.x*=-1),o.pos.y<0&&(o.pos.y=0,o.vel.y*=-1),o.pos.y+i.dim.height>300&&(o.pos.y=300,o.vel.y*=-1)}),p.BOTH),h=new k({click:t=>{console.log("Click")}});this.components=[o,n,r,h]}}class O{constructor(t,...e){this.components=[],this.scene=this,this.className="STAGE",this.time=0,this.entities=new Map,this.engineComponents=new Map,this.id=0,this.componentId=0,this.name=t,this.components=e}getSceneConfig(){return{entities:[this]}}addEntity(t,e){let s=this.sceneManager.getUniqueId();e.id=s,e.scene=this,this.entities.set(s,e);for(let t of e.components){let s=this.engineComponents.get(t.engineTag);if(t.entity=e.id,s){let e=this.sceneManager.systemTag.get(t.engineTag);e&&e.register(t,this.getUniqueComponentId())}else console.log(t.engineTag+"does not exist"),t.componentId=this.sceneManager.getUniqueComponentId()}return console.log("successfully added entity"),e}removeEntity(t){let e=this.entities.get(t);if(e){this.entities.delete(t);for(let t of e.components)console.log("Component"),console.log(t),console.log("System"),console.log(t.system),console.log("Component id "),console.log(t.componentId),t.system.unregister(t.componentId)}return e}addServerEntity(t,e){if(null==e.id||null==e.id)throw new Error("Entity id is undefined");if(e.scene=t,t.entities.set(e.id,e),t.newEntityQueue){if(!t.newEntityQueue.has(e.id)){for(let s of e.components)if(t.engineComponents.get(s.engineTag)){let e=t.sceneManager.systemTag.get(s.engineTag);e&&e.register(s,this.getUniqueComponentId())}else console.log(s.engineTag+" tagged System is not found");console.log("successfully added entitys")}return e}for(let s of e.components)if(t.engineComponents.get(s.engineTag)){let e=t.sceneManager.systemTag.get(s.engineTag);e&&e.register(s,this.getUniqueComponentId())}else console.log(s.engineTag+" tagged System is not found");return console.log("successfully added entitys"),e}getUniqueId(){if(m.EngineType==p.SOCKETCLIENT){let t=this.id-1;return this.id--,t}{let t=this.id+1;return this.id++,t}}getUniqueComponentId(){if(m.EngineType==p.SOCKETCLIENT){let t=this.componentId-1;return this.componentId--,t}{let t=this.componentId+1;return this.componentId++,t}}}class N{constructor(t){this.className="Templar",this.transform=new C(-1,{x:20*Math.random(),y:30*Math.random(),z:20},{x:10,y:10,z:0}),this.sprite=new x(-1,{pos:this.transform.pos,dim:{length:64,height:64},rot:0},"/images/Templar.png"),this.components=[this.sprite],t&&(this.transform.pos.x=t.x,this.transform.pos.y=t.y)}}class _{constructor(t=-1,e=-1,s=-1,i={x:0,y:0,z:-1},n={x:1,y:1}){this.visible=!0,this.alive=!0,this.engineTag="GRAPHICS",this.rendered=!0,this.height=s,this.width=e,this.pos=i,this.transform={x:0,y:0,z:0},this.entity=t,this.scale=n}unmount(){}getRectangle(){return{pos:this.pos,dim:{height:this.height,length:this.width},rot:0}}copy(t){this.entity=t.entity,this.componentId=t.componentId,this.width=t.width,this.height=t.height,this.visible=t.visible,this.alive=t.alive,this.scale.x=t.scale.x,this.scale.y=t.scale.y,this.rendered=t.rendered}initialize(){this.height<0&&(this.height=-1*this.height*this.context.canvas.height),this.width<0&&(this.width=-1*this.width*this.context.canvas.width),this.rendered&&(this.context.canvas.height=this.height,this.context.canvas.width=this.width)}update(t){this.context.ctx,this.pos.x+=this.transform.x,this.pos.y+=this.transform.y}render(t){this.context.ctx.translate(this.transform.x,this.transform.y),this.context.ctx.clearRect(-1*this.pos.x,-1*this.pos.y,this.width,this.height);let e=t;for(let s of e)s!=this&&s.render(t);console.log("Camera is rendered "+e.length+"elements"),this.transform.x=0,this.transform.y=0,this.context.ctx.save()}toJSON(){return{entity:this.entity,componentId:this.componentId,width:this.width,height:this.height,visible:this.visible,alive:this.alive,scale:this.scale,rendered:this.rendered,pos:this.pos}}}class R{constructor(t){this.visible=!0,this.alive=!0,this.engineTag="EVENTHANDLER",this.events=new Map,Object.entries(t).map((([t,e])=>{this.events.set(t,e)}))}getEvents(){return this.events}execute(t){let e=this.events.get(t.eventName);e&&e(t)}getEventType(){return"KEYBOARD"}initialize(t){t.registerListener(this)}copy(t){this.entity=t.entity,this.alive=t.alive,this.visible=t.visible,this.componentId=t.componentId}update(t,e){}toJSON(){return{entity:this.entity,alive:this.alive,visible:this.visible,componentId:this.componentId}}}class L{constructor(t){this.listeners=new Set,this.events=[],this.visible=!0,this.alive=!0,this.engineTag="EVENTHANDLER",this.engineType=t}initialize(t){t.registerEmitter(this),this.engineType!=p.SOCKETSERVER&&window.addEventListener("keydown",(t=>{this.events.push({eventName:"keydown",key:t.key})}))}addListener(t){this.listeners.add(t)}emit(t){for(let e of this.listeners)e.execute(t)}getEventType(){return"KEYBOARD"}update(t,e){for(let t=this.events.length-1;t>=0;t--)this.emit(this.events[t]),this.events.pop()}copy(t){this.alive=t.alive,this.visible=t.alive}toJSON(){return{visible:this.visible,alive:this.alive}}}class A{constructor(){this.camera=new _(-1,1e3,500),this.className="MainCamera",this.components=[this.camera,new R({keydown:t=>{"w"==t.key?(this.camera.transform.y-=1,console.log("W is pressed")):"a"==t.key?this.camera.transform.x-=1:"d"==t.key?this.camera.transform.x+=1:"s"==t.key&&(this.camera.transform.y+=1)}})]}}const B=Object.create(null);B.open="0",B.close="1",B.ping="2",B.pong="3",B.message="4",B.upgrade="5",B.noop="6";const M=Object.create(null);Object.keys(B).forEach((t=>{M[B[t]]=t}));const q={type:"error",data:"parser error"},z="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),P="function"==typeof ArrayBuffer,D=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,j=({type:t,data:e},s,i)=>z&&e instanceof Blob?s?i(e):H(e,i):P&&(e instanceof ArrayBuffer||D(e))?s?i(e):H(new Blob([e]),i):i(B[t]+(e||"")),H=(t,e)=>{const s=new FileReader;return s.onload=function(){const t=s.result.split(",")[1];e("b"+(t||""))},s.readAsDataURL(t)};function U(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let K;function F(t,e){return z&&t.data instanceof Blob?t.data.arrayBuffer().then(U).then(e):P&&(t.data instanceof ArrayBuffer||D(t.data))?e(U(t.data)):void j(t,!1,(t=>{K||(K=new TextEncoder),e(K.encode(t))}))}const V="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<64;t++)V["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(t)]=t;const Q="function"==typeof ArrayBuffer,Y=(t,e)=>{if("string"!=typeof t)return{type:"message",data:W(t,e)};const s=t.charAt(0);return"b"===s?{type:"message",data:J(t.substring(1),e)}:M[s]?t.length>1?{type:M[s],data:t.substring(1)}:{type:M[s]}:q},J=(t,e)=>{if(Q){const s=(t=>{let e,s,i,n,o,r=.75*t.length,h=t.length,a=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);const c=new ArrayBuffer(r),l=new Uint8Array(c);for(e=0;e<h;e+=4)s=V[t.charCodeAt(e)],i=V[t.charCodeAt(e+1)],n=V[t.charCodeAt(e+2)],o=V[t.charCodeAt(e+3)],l[a++]=s<<2|i>>4,l[a++]=(15&i)<<4|n>>2,l[a++]=(3&n)<<6|63&o;return c})(t);return W(s,e)}return{base64:!0,data:t}},W=(t,e)=>"blob"===e?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,G=String.fromCharCode(30);let $;function X(t){if(t)return function(t){for(var e in X.prototype)t[e]=X.prototype[e];return t}(t)}X.prototype.on=X.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},X.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},X.prototype.off=X.prototype.removeListener=X.prototype.removeAllListeners=X.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<i.length;n++)if((s=i[n])===e||s.fn===e){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},X.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(s){i=0;for(var n=(s=s.slice(0)).length;i<n;++i)s[i].apply(this,e)}return this},X.prototype.emitReserved=X.prototype.emit,X.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},X.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Z="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function tt(t,...e){return e.reduce(((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e)),{})}const et=Z.setTimeout,st=Z.clearTimeout;function it(t,e){e.useNativeTimers?(t.setTimeoutFn=et.bind(Z),t.clearTimeoutFn=st.bind(Z)):(t.setTimeoutFn=Z.setTimeout.bind(Z),t.clearTimeoutFn=Z.clearTimeout.bind(Z))}class nt extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class ot extends X{constructor(t){super(),this.writable=!1,it(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,s){return super.emitReserved("error",new nt(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Y(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){const e=function(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}(t);return e.length?"?"+e:""}}const rt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ht=64,at={};let ct,lt=0,pt=0;function dt(t){let e="";do{e=rt[t%ht]+e,t=Math.floor(t/ht)}while(t>0);return e}function ut(){const t=dt(+new Date);return t!==ct?(lt=0,ct=t):t+"."+dt(lt++)}for(;pt<ht;pt++)at[rt[pt]]=pt;let gt=!1;try{gt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const mt=gt;function ft(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||mt))return new XMLHttpRequest}catch(t){}if(!e)try{return new(Z[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function yt(){}const vt=null!=new ft({xdomain:!1}).responseType;class wt extends X{constructor(t,e){super(),it(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t;const e=tt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const s=this.xhr=new ft(e);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&s.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{s.setRequestHeader("Accept","*/*")}catch(t){}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var t;3===s.readyState&&(null===(t=this.opts.cookieJar)||void 0===t||t.parseCookies(s)),4===s.readyState&&(200===s.status||1223===s.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof s.status?s.status:0)}),0))},s.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=wt.requestsCount++,wt.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=yt,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete wt.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}function bt(){for(let t in wt.requests)wt.requests.hasOwnProperty(t)&&wt.requests[t].abort()}wt.requestsCount=0,wt.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",bt):"function"==typeof addEventListener&&addEventListener("onpagehide"in Z?"pagehide":"unload",bt,!1));const Ct="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Et=Z.WebSocket||Z.MozWebSocket,Tt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();function xt(t,e){return"message"===t.type&&"string"!=typeof t.data&&e[0]>=48&&e[0]<=54}const kt={websocket:class extends ot{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=Tt?{}:tt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=Tt?new Et(t,e,s):e?new Et(t,e):new Et(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;j(s,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}i&&Ct((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=ut()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!Et}},webtransport:class extends ot{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((t=>{this.onError("webtransport error",t)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((t=>{const e=t.readable.getReader();let s;this.writer=t.writable.getWriter();const i=()=>{e.read().then((({done:t,value:e})=>{t||(s||1!==e.byteLength||54!==e[0]?(this.onPacket(function(t,e,s){$||($=new TextDecoder);const i=e||t[0]<48||t[0]>54;return Y(i?t:$.decode(t),"arraybuffer")}(e,s)),s=!1):s=!0,i())})).catch((t=>{}))};i();const n=this.query.sid?`0{"sid":"${this.query.sid}"}`:"0";this.writer.write((new TextEncoder).encode(n)).then((()=>this.onOpen()))}))})))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;F(s,(t=>{xt(s,t)&&this.writer.write(Uint8Array.of(54)),this.writer.write(t).then((()=>{i&&Ct((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}))}}doClose(){var t;null===(t=this.transport)||void 0===t||t.close()}},polling:class extends ot{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let s=location.port;s||(s=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||s!==t.port}const e=t&&t.forceBase64;this.supportsBinary=vt&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const s=t.split(G),i=[];for(let t=0;t<s.length;t++){const n=Y(s[t],e);if(i.push(n),"error"===n.type)break}return i})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const s=t.length,i=new Array(s);let n=0;t.forEach(((t,o)=>{j(t,!1,(t=>{i[o]=t,++n===s&&e(i.join(G))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=ut()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new wt(this.uri(),t)}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},It=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,St=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ot(t){const e=t,s=t.indexOf("["),i=t.indexOf("]");-1!=s&&-1!=i&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let n=It.exec(t||""),o={},r=14;for(;r--;)o[St[r]]=n[r]||"";return-1!=s&&-1!=i&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(t,e){const s=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.slice(0,1)&&0!==e.length||s.splice(0,1),"/"==e.slice(-1)&&s.splice(s.length-1,1),s}(0,o.path),o.queryKey=function(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(s[e]=i)})),s}(0,o.query),o}class Nt extends X{constructor(t,e={}){super(),this.writeBuffer=[],t&&"object"==typeof t&&(e=t,t=null),t?(t=Ot(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ot(e.host).host),it(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},s=t.split("&");for(let t=0,i=s.length;t<i;t++){let i=s[t].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new kt[t](s)}open(){let t;if(this.opts.rememberUpgrade&&Nt.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),s=!1;Nt.priorWebsocketSuccess=!1;const i=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!s)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Nt.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{s||"closed"!==this.readyState&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function n(){s||(s=!0,c(),e.close(),e=null)}const o=t=>{const s=new Error("probe error: "+t);s.transport=e.name,n(),this.emitReserved("upgradeError",s)};function r(){o("transport closed")}function h(){o("socket closed")}function a(t){e&&t.name!==e.name&&n()}const c=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",r),this.off("close",h),this.off("upgrading",a)};e.once("open",i),e.once("error",o),e.once("close",r),this.once("close",h),this.once("upgrading",a),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn((()=>{s||e.open()}),200):e.open()}onOpen(){if(this.readyState="open",Nt.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+="string"==typeof(e=i)?function(t){let e=0,s=0;for(let i=0,n=t.length;i<n;i++)e=t.charCodeAt(i),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(i++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))),s>0&&t>this.maxPayload)return this.writeBuffer.slice(0,s);t+=2}var e;return this.writeBuffer}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof s&&(i=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const n={type:t,data:e,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?s():t()})):this.upgrading?s():t()),this}onError(t){Nt.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const i=t.length;for(;s<i;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}Nt.protocol=4,Nt.protocol;const _t="function"==typeof ArrayBuffer,Rt=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Lt=Object.prototype.toString,At="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Lt.call(Blob),Bt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Lt.call(File);function Mt(t){return _t&&(t instanceof ArrayBuffer||Rt(t))||At&&t instanceof Blob||Bt&&t instanceof File}function qt(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,s=t.length;e<s;e++)if(qt(t[e]))return!0;return!1}if(Mt(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return qt(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&qt(t[e]))return!0;return!1}function zt(t){const e=[],s=t.data,i=t;return i.data=Pt(s,e),i.attachments=e.length,{packet:i,buffers:e}}function Pt(t,e){if(!t)return t;if(Mt(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}if(Array.isArray(t)){const s=new Array(t.length);for(let i=0;i<t.length;i++)s[i]=Pt(t[i],e);return s}if("object"==typeof t&&!(t instanceof Date)){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=Pt(t[i],e));return s}return t}function Dt(t,e){return t.data=jt(t.data,e),delete t.attachments,t}function jt(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=jt(t[s],e);else if("object"==typeof t)for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=jt(t[s],e));return t}const Ht=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ut=5;var Kt;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Kt||(Kt={}));class Ft{constructor(t){this.replacer=t}encode(t){return t.type!==Kt.EVENT&&t.type!==Kt.ACK||!qt(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===Kt.EVENT?Kt.BINARY_EVENT:Kt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==Kt.BINARY_EVENT&&t.type!==Kt.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=zt(t),s=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(s),i}}function Vt(t){return"[object Object]"===Object.prototype.toString.call(t)}class Qt extends X{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const s=e.type===Kt.BINARY_EVENT;s||e.type===Kt.BINARY_ACK?(e.type=s?Kt.EVENT:Kt.ACK,this.reconstructor=new Yt(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!Mt(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(void 0===Kt[s.type])throw new Error("unknown packet type "+s.type);if(s.type===Kt.BINARY_EVENT||s.type===Kt.BINARY_ACK){const i=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const n=t.substring(i,e);if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");s.attachments=Number(n)}if("/"===t.charAt(e+1)){const i=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);s.nsp=t.substring(i,e)}else s.nsp="/";const i=t.charAt(e+1);if(""!==i&&Number(i)==i){const i=e+1;for(;++e;){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){const i=this.tryParse(t.substr(e));if(!Qt.isPayloadValid(s.type,i))throw new Error("invalid payload");s.data=i}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case Kt.CONNECT:return Vt(e);case Kt.DISCONNECT:return void 0===e;case Kt.CONNECT_ERROR:return"string"==typeof e||Vt(e);case Kt.EVENT:case Kt.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===Ht.indexOf(e[0]));case Kt.ACK:case Kt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Yt{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=Dt(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Jt(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Wt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Gt extends X{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Jt(t,"open",this.onopen.bind(this)),Jt(t,"packet",this.onpacket.bind(this)),Jt(t,"error",this.onerror.bind(this)),Jt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Wt.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const s={type:Kt.EVENT,data:e,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,i=e.pop();this._registerAckCallback(t,i),s.id=t}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){var s;const i=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===i)return void(this.acks[t]=e);const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}emitWithAck(t,...e){const s=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((i,n)=>{e.push(((t,e)=>s?t?n(t):i(e):i(t))),this.emit(t,...e)}))}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(((t,...i)=>{if(s===this._queue[0])return null!==t?s.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...i)),s.pending=!1,this._drainQueue()})),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Kt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Kt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Kt.EVENT:case Kt.BINARY_EVENT:this.onevent(t);break;case Kt.ACK:case Kt.BINARY_ACK:this.onack(t);break;case Kt.DISCONNECT:this.ondisconnect();break;case Kt.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:Kt.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Kt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function $t(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}$t.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-s:t+s}return 0|Math.min(t,this.max)},$t.prototype.reset=function(){this.attempts=0},$t.prototype.setMin=function(t){this.ms=t},$t.prototype.setMax=function(t){this.max=t},$t.prototype.setJitter=function(t){this.jitter=t};class Xt extends X{constructor(t,s){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(s=t,t=void 0),(s=s||{}).path=s.path||"/socket.io",this.opts=s,it(this,s),this.reconnection(!1!==s.reconnection),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=s.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new $t({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==s.timeout?2e4:s.timeout),this._readyState="closed",this.uri=t;const n=s.parser||e;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==s.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Nt(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Jt(e,"open",(function(){s.onopen(),t&&t()})),n=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()},o=Jt(e,"error",n);if(!1!==this._timeout){const t=this._timeout,s=this.setTimeoutFn((()=>{i(),n(new Error("timeout")),e.close()}),t);this.opts.autoUnref&&s.unref(),this.subs.push((()=>{this.clearTimeoutFn(s)}))}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Jt(t,"ping",this.onping.bind(this)),Jt(t,"data",this.ondata.bind(this)),Jt(t,"error",this.onerror.bind(this)),Jt(t,"close",this.onclose.bind(this)),Jt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){Ct((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Gt(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((()=>{this.clearTimeoutFn(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Zt={};function te(t,e){"object"==typeof t&&(e=t,t=void 0);const s=function(t,e="",s){let i=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==s?s.protocol+"//"+t:"https://"+t),i=Ot(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const n=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+e,i.href=i.protocol+"://"+n+(s&&s.port===i.port?"":":"+i.port),i}(t,(e=e||{}).path||"/socket.io"),i=s.source,n=s.id,o=s.path,r=Zt[n]&&o in Zt[n].nsps;let h;return e.forceNew||e["force new connection"]||!1===e.multiplex||r?h=new Xt(i,e):(Zt[n]||(Zt[n]=new Xt(i,e)),h=Zt[n]),s.query&&!e.query&&(e.query=s.queryKey),h.socket(s.path,e)}Object.assign(te,{Manager:Xt,Socket:Gt,io:te,connect:te});class ee{static getInstance(){return null!=ee.socket&&null!=ee.socket||(this.socket=te()),ee.socket}constructor(t,e){this.tag="EVENTHANDLER",this.emitters=new Map,this.unregistered=new Map,this.listeners=[],this.deleted=[],this.components=new Map,this.config=e,this.sceneManager=t,window.addEventListener("click",(t=>{ee.socket.emit("click")})),window.addEventListener("keydown",(t=>{ee.socket.emit("keydown",t.key)}))}getConfig(){return this.config}registerListener(t){let e=this.emitters.get(t.getEventType());e?e.addListener(t):this.listeners.push(t)}registerEmitter(t){this.emitters.set(t.getEventType(),t)}register(t){if(null==t.componentId||null==t.componentId){let e=this.sceneManager.getUniqueComponentId();t.componentId=e,t.system=this,t.initialize(this),this.components.set(e,t)}else t.system=this,this.components.set(t.componentId,t),t.initialize(this);console.log("Socket Manager registered")}unregister(t){let e=this.components.get(t);e&&(e.alive=!1,this.deleted.push(e))}update(t){console.log("Client Socket Handler"),console.log("Client Socket Handler Components:"+this.components.size);for(let e of this.emitters)e[1].update(t);for(let t=this.listeners.length-1;t>=0;t--){let e=this.emitters.get(this.listeners[t].getEventType());e&&(e.addListener(this.listeners[t]),this.listeners[t]=this.listeners[this.listeners.length-1],this.listeners.pop())}}}class se{update(t,e){}constructor(t){this.engineTag="GRAPHICS",this.visible=!0,this.alive=!0,this.rendered=!1,this.transform={x:100,y:100,z:0},this.text=t}unmount(){}copy(t){this.componentId=t.componentId,this.entity=t.entity,this.text=t.text,this.transform.x=this.transform.x,this.transform.y=this.transform.y}render(){this.context&&this.context.ctx.fillText(this.text,this.transform.x,this.transform.y)}initialize(){}getRectangle(){return{pos:this.transform,dim:{length:0,height:0},rot:0}}toJson(){return{entity:this.entity,engineTag:this.engineTag,componentId:this.componentId,text:this.text,visible:this.visible,alive:this.alive,transform:this.transform}}}class ie{constructor(){this.text=new se("test"),this.components=[this.text],this.className="Label"}}class ne{constructor(t,e,s,n){this.visible=!0,this.alive=!0,this.engineTag=i,this.state=0,this.time=0,this.rendered=!1,this.path=t,this.transform=e.pos,this.shape=e,this.delay=s}unmount(){throw new Error("Method not implemented.")}render(){if(this.context.ctx){let t=E(this.shape);console.log("Drawn with State "+this.state);let e=T(this.shape);this.context.ctx.drawImage(this.image,this.shape.dim.length*this.state,0,this.shape.dim.length,this.shape.dim.height,t,e,this.shape.dim.length,this.shape.dim.height)}else console.log("Context is not injected")}initialize(){this.image=new Image,this.image.src=this.path,this.state=0}update(t,e){if(this.time+=t,console.log("Updating Spritesheet"),this.time>this.delay){console.log("Time is greater than delay");let t=Math.floor(this.time/this.delay),e=Math.floor(this.image.width/this.shape.dim.length);console.log("Image width is "+this.image.width),console.log("State change is "+t),this.state=(1+this.state)%e,this.time=this.time%this.delay}}getRectangle(){return this.shape}copy(t){var e,s;this.entity=t.entity,this.visible=t.visible,this.alive=t.alive,this.componentId=t.componentId,this.path=t.path,this.delay=t.delay,this.rendered=t.rendered,this.transform.x=t.transform.x,this.transform.y=t.transform.y,this.transform.z=t.transform.z,e=this.shape,s=t.shape,e.dim.height=s.dim.height,e.dim.length=s.dim.length,e.pos.x=s.pos.x,e.pos.y=s.pos.y,e.pos.z=s.pos.z,e.rot=s.rot}toJSON(){return{entity:this.entity,componentId:this.componentId,engineTag:this.engineTag,transform:this.transform,visible:this.visible,alive:this.alive,src:this.path,shape:this.shape,delay:this.delay,state:this.state,time:this.time,path:this.path,rendered:this.rendered}}}class oe{constructor(){this.components=[new ne("/images/SwordSpriteSheet.png",{dim:{length:32,height:32},pos:{x:20,y:20,z:0},rot:0},3,32)],this.className="SWORDANIM"}}function re(t,e){if(null==e.id||null==e.id)throw new Error("Entity id is undefined");if(e.scene=t,t.entities.set(e.id,e),t.newEntityQueue){if(!t.newEntityQueue.has(e.id)){for(let s of e.components)if(t.engineComponents.get(s.engineTag)){let e=t.sceneManager.systemTag.get(s.engineTag);e&&e.register(s,t.getUniqueComponentId())}else console.log(s.engineTag+" tagged System is not found");console.log("successfully added entitys")}return e}for(let s of e.components)if(t.engineComponents.get(s.engineTag)){let e=t.sceneManager.systemTag.get(s.engineTag);e&&e.register(s,t.getUniqueComponentId())}else console.log(s.engineTag+" tagged System is not found");return console.log("successfully added entitys"),e}class he{constructor(t,e){this.emissionQueue=[],this.listenQueue=new Map,this.listenerLock=!1,this.visible=!0,this.alive=!0,this.engineTag="EVENTHANDLER",this.snapShots=[],this.time=0,this.socketMap=t,this.events=new Map,this.socketConfig=e}initialize(t){t.registerEmitter(this),t.registerListener(this),Object.entries(this.socketMap).map((([t,e])=>{this.events.set(t,e),ee.getInstance().on(t,(e=>{this.events.get(t)&&!this.listenerLock&&this.listenQueue.set(t,{event:t,data:e})}))})),this.events.set("update",(t=>{let e=m.currScene;if(console.log("Client Time Difference "+(t.time-v.time)),e)for(let s of t.data){let t=e;if(!t)throw new Error("Scene not found");if(t.entities.get(s.id))for(let e=0;e<s.components.length;e++){let i=t.engineComponents.get(s.components[e].engineTag),n=i?.get(s.components[e].componentId);n&&n.copy(s.components[e])}else{console.log("Adding new Entity");let e=this.socketConfig.entityGeneratorMap.get(s.entityClass);if(e){let i=e();i.id=s.id,i.scene=t;for(let t=0;t<i.components.length;t++)i.components[t].copy(s.components[t]);re(t,i)}}}})),ee.getInstance().on("update",(t=>{this.events.get("update"),console.log("On update "+(t.timestamp-v.time)),this.listenerLock||this.listenQueue.set("update",{event:"update",data:t})}))}addListener(t){let e=t.getEvents();for(let t of e)ee.getInstance().on(t[0],t[1])}emit(t){ee.getInstance().emit(t.event,t.data)}update(t,e){this.time+=t;for(let t=this.emissionQueue.length-1;t>=0;t--)this.emit(this.emissionQueue[t]),this.emissionQueue.pop();this.listenerLock=!0;for(let t of this.listenQueue){let e=this.events.get(t[0]);if(!e)throw new Error;e(t[1].data)}this.listenQueue.clear(),this.listenerLock=!1}queueEvent(t){this.emissionQueue.push(t)}copy(t){this.visible=t.visible,this.alive=t.alive,this.socketConfig.engineType=t.socketConfig.engineType}getEventType(){return"SocketServer"}execute(t){if(t){let e=this.events.get(t.event);e&&e(t.data)}}getEvents(){let t=new Map;return Object.entries(this.socketMap).map((([e,s])=>{t.set(e,s)})),t}toJSON(){let t=this.socketConfig.engineType==p.SOCKETCLIENT?p.SOCKETSERVER:p.SOCKETCLIENT;return{visible:this.visible,alive:this.alive,socketConfig:{engineType:t}}}}let ae=new Map;ae.set("Templar",(()=>new N)),ae.set("MainCamera",(()=>(console.log("camera made"),new A))),ae.set("Player",(()=>new S)),ae.set("Label",(()=>new ie)),ae.set("SWORDANIM",(()=>new oe));class ce extends O{constructor(t){super("Name"),this.time=0,this.entities=new Map,this.engineComponents=new Map,this.sceneConfig=new b(t);let e=new he({connect:()=>{console.log("connected");let t=window.location.pathname.split("/");ee.getInstance().emit("joined",window.sessionStorage.getItem("PlayerName"),t[t.length-1]),console.log("emitting"),e.emit({event:"clientInitialize",data:null})},disconnect:()=>{throw new Error}},{engineType:p.SOCKETCLIENT,entityGeneratorMap:ae});new k({click:t=>{console.log("Position x is "+t.pos.x),console.log("Position y is "+t.pos.y),console.log("Name is "+t.eventName),e.emit({event:"click",data:null})},dblclick:t=>{}}),this.components.push(e,new L(p.SOCKETCLIENT))}getSceneConfig(){let t=new S({x:20,y:20,z:20},{x:.1,y:0,z:0},p.SOCKETCLIENT);return this.sceneConfig.entities.push(this,t),this.sceneConfig}}window.onload=()=>{let t=new ce([new A]),e=new v({engineType:p.SOCKETCLIENT,graphicsConfig:new w("test","193as",{"display:flex;background-color":"white",width:"100%",height:"100%","z-index":"0"}),sceneConfig:[t],physicsConfig:{},scriptingConfig:{}});e.systems.push(new ee(e.sceneManager,{entityFactoryMap:ae,socketEventMap:t=>{t.on("connect",(()=>{console.log("connected");let e=window.location.pathname.split("/");t.emit("joined",window.sessionStorage.getItem("PlayerName"),e[e.length-1]),console.log("emitting"),t.emit("clientInitialize")}))}})),e.start(10)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxXQUFXTSxLQUFLK1csRUFBUSxJQUFJL0csRUFBZ0IsRUFBV2hILGNBQ2hFLENBQ0F5QyxpQkFDSSxJQUFJNG1CLEVBQVMsSUFBSTVqQixFQUFPLENBQUVyTCxFQUFHLEdBQUlFLEVBQUcsR0FBSW1DLEVBQUcsSUFBTSxDQUFFckMsRUFBRyxHQUFLRSxFQUFHLEVBQUdtQyxFQUFHLEdBQUssRUFBV3VELGNBRXBGLE9BREF6SixLQUFLK0wsWUFBWUksU0FBUzFMLEtBQUtULEtBQU04eUIsR0FDOUI5eUIsS0FBSytMLFdBQ2hCLEVBRUp6TCxPQUFPNlIsT0FBUyxLQXdDWixJQUFJdkwsRUFBUSxJQUFJMnJCLEdBQUssQ0FDakIsSUFBSXZoQixJQUVKTixFQUFTLElBQUluRixFQUFPLENBQ3BCcEUsV0FBWSxFQUFXc0MsYUFDdkJqRSxlQUFnQixJQUFJMkgsRUFBZSxPQUFRLFFBQVMsQ0FBRSxnQ0FBaUMsUUFBUyxNQUFTLE9BQVEsT0FBVSxPQUFRLFVBQVcsTUFDOUlwQixZQUFhLENBQ1RuRixHQUVKK0UsY0FBZSxDQUFDLEVBQ2hCQyxnQkFBaUIsQ0FBQyxJQUV0QjhFLEVBQU9uSCxRQUFROUksS0FBSyxJQUFJOHZCLEdBQWM3ZixFQUFPN0csYUFBYyxDQUN2RGtwQixpQkFBa0IsR0FDbEJDLGVBQWlCeGIsSUFnRGJBLEVBQU94QyxHQUFHLFdBQVcsS0FDakI1VCxRQUFRQyxJQUFJLGFBQ1osSUFDSW14QixFQURTbHlCLE9BQU9vZixTQUFTK1MsU0FDUm5nQixNQUFNLEtBQzNCa0YsRUFBT3pHLEtBQUssU0FBVXpRLE9BQU9veUIsZUFBZUMsUUFBUSxjQUFlSCxFQUFRQSxFQUFRNXdCLE9BQVMsSUFDNUZSLFFBQVFDLElBQUksWUFDWm1XLEVBQU96RyxLQUFLLG1CQUFtQixHQUVqQyxLQUdWTCxFQUFPekUsTUFBTSxHQUFHLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmdpbmUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZW5naW5lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9lbmdpbmUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9lbmdpbmUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvc3lzdGVtcy9ldmVudHMvRXZlbnRIYW5kbGVyLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb25zdGFudHMvY29tcG9uZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvc3RydWN0cy9RdWFkdHJlZS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvdHlwZXMvY29tcG9uZW50cy9ncmFwaGljcy9RdWFkVHJlZVJlbmRlcmluZy5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvc3lzdGVtcy9ncmFwaGljcy9HcmFwaGljRW5naW5lLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9zeXN0ZW1zL3BoeXNpY3MvUGh5c2ljc0VuZ2luZS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvY29uc3RhbnRzL2VuZ2luZVR5cGUuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL3N5c3RlbXMvc2NyaXB0aW5nL1NjcmlwdGluZ0VuZ2luZS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvY29yZS9jb250ZXh0LmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb3JlL21hbmFnZXJzL1NjZW5lTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvdHlwZXMvY29tcG9uZW50cy9jb2xsaXNpb24vQ29sbGlzaW9uU3RyYXRlZ3kuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL3N5c3RlbXMvQ29sbGlzaW9uL0NvbGxpc2lvblN5c3RlbS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvY29yZS9lbmdpbmUuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL2NvcmUvY29uZmlnLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb21wb25lbnRzL1BoeXNpY3MvdHJhbnNmb3JtLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy90eXBlcy9jb21wb25lbnRzL2NvbGxpc2lvbi9zaGFwZS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvY29tcG9uZW50cy9HcmFwaGljcy9TcHJpdGUuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL2NvbXBvbmVudHMvRXZlbnQvTGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL2NvbXBvbmVudHMvU2NyaXB0L1NjcmlwdC5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L0dhbWVGcm9udGVuZC9zY2VuZXMvZW50aXRpZXMvUGxheWVyLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb3JlL3NjZW5lLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvR2FtZUZyb250ZW5kL3NjZW5lcy9lbnRpdGllcy9UZW1wbGFyLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb21wb25lbnRzL0dyYXBoaWNzL0NhbWVyYS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvY29tcG9uZW50cy9FdmVudC9LZXlib2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L0dhbWVGcm9udGVuZC9zY2VuZXMvZW50aXRpZXMvTWFpbkNhbWVyYS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLXBhcnNlci9idWlsZC9lc20vY29tbW9ucy5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLXBhcnNlci9idWlsZC9lc20vZW5jb2RlUGFja2V0LmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvYnVpbGQvZXNtL2NvbnRyaWIvYmFzZTY0LWFycmF5YnVmZmVyLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tcGFyc2VyL2J1aWxkL2VzbS9kZWNvZGVQYWNrZXQuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLXBhcnNlci9idWlsZC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL0Bzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXIvaW5kZXgubWpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9nbG9iYWxUaGlzLmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL3V0aWwuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL3RyYW5zcG9ydC5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9idWlsZC9lc20vY29udHJpYi9wYXJzZXFzLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9jb250cmliL3llYXN0LmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9jb250cmliL2hhcy1jb3JzLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS90cmFuc3BvcnRzL3htbGh0dHByZXF1ZXN0LmJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL3RyYW5zcG9ydHMvcG9sbGluZy5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9idWlsZC9lc20vdHJhbnNwb3J0cy93ZWJzb2NrZXQtY29uc3RydWN0b3IuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9idWlsZC9lc20vdHJhbnNwb3J0cy93ZWJzb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL3RyYW5zcG9ydHMvd2VidHJhbnNwb3J0LmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS90cmFuc3BvcnRzL2luZGV4LmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9jb250cmliL3BhcnNldXJpLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL2luZGV4LmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL2J1aWxkL2VzbS9pcy1iaW5hcnkuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1wYXJzZXIvYnVpbGQvZXNtL2JpbmFyeS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLXBhcnNlci9idWlsZC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvZXNtL29uLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tY2xpZW50L2J1aWxkL2VzbS9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvZXNtL2NvbnRyaWIvYmFja28yLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tY2xpZW50L2J1aWxkL2VzbS9tYW5hZ2VyLmpzIiwid2VicGFjazovL2VuZ2luZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tY2xpZW50L2J1aWxkL2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9lc20vdXJsLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb3JlL21hbmFnZXJzL1NvY2tldE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL2NvbXBvbmVudHMvR3JhcGhpY3MvVGV4dC5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L0dhbWVGcm9udGVuZC9zY2VuZXMvZW50aXRpZXMvTGFiZWwuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9lbmdpbmUvc3JjL2NvbXBvbmVudHMvR3JhcGhpY3MvU3ByaXRlc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9HYW1lRnJvbnRlbmQvc2NlbmVzL2VudGl0aWVzL1N3b3JkQW5pbS5qcyIsIndlYnBhY2s6Ly9lbmdpbmUvLi9kaXN0L2VuZ2luZS9zcmMvY29yZS9zY2VuZVV0aWxzLmpzIiwid2VicGFjazovL2VuZ2luZS8uL2Rpc3QvZW5naW5lL3NyYy9jb21wb25lbnRzL0V2ZW50L1NvY2tldFNlcnZlckVtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vZW5naW5lLy4vZGlzdC9HYW1lRnJvbnRlbmQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50Q29uZmlnID0ge1xyXG4gICAgICAgIGtleWJvYXJkOiBmYWxzZSxcclxuICAgICAgICBtb3VzZTogZmFsc2VcclxuICAgIH0pIHtcclxuICAgICAgICB0aGlzLnRhZyA9IFwiRVZFTlRIQU5ETEVSXCI7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gW107XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5ldmVudENvbmZpZyA9IGV2ZW50Q29uZmlnO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goXCJjbGlja1wiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goZXZlbnQua2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyTGlzdGVuZXIoKSB7XHJcbiAgICB9XHJcbiAgICByZWdpc3RlckVtaXR0ZXIoKSB7XHJcbiAgICB9XHJcbiAgICBnZXRDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRDb25maWc7XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlcihjb21wLCBpZCkge1xyXG4gICAgICAgIGlmIChjb21wLmNvbXBvbmVudElkID09IHVuZGVmaW5lZCB8fCBjb21wLmNvbXBvbmVudElkID09IG51bGwpIHtcclxuICAgICAgICAgICAgY29tcC5jb21wb25lbnRJZCA9IGlkO1xyXG4gICAgICAgICAgICBjb21wLnN5c3RlbSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5zZXQoaWQsIGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhcIkV2ZW50IEhhbmRsZXIgcmVnaXN0ZXJlZFwiKTtcclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXIoY29tcCkge1xyXG4gICAgICAgIGxldCBkZWxldGVkID0gdGhpcy5jb21wb25lbnRzLmdldChjb21wKTtcclxuICAgICAgICBpZiAoZGVsZXRlZCkge1xyXG4gICAgICAgICAgICBkZWxldGVkLmFsaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlZC5wdXNoKGRlbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXZlbnQgSGFuZGxlclwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkV2ZW50ICBIYW5kbGVyIENvbXBvbmVudHM6XCIgKyB0aGlzLmNvbXBvbmVudHMuc2l6ZSk7XHJcbiAgICAgICAgbGV0IGxlbiA9IHRoaXMuY29tcG9uZW50cy5zaXplO1xyXG4gICAgICAgIGxldCBrZXlzID0gWy4uLnRoaXMuY29tcG9uZW50cy5rZXlzKCldO1xyXG4gICAgICAgIGZvciAobGV0IGNvbXAgb2Yga2V5cykge1xyXG4gICAgICAgICAgICBsZXQgbGlzdGVuYWJsZSA9IHRoaXMuY29tcG9uZW50cy5nZXQoY29tcCk7XHJcbiAgICAgICAgICAgIC8vbGV0IGV2ZW50TWFwID0gbGlzdGVuYWJsZS5ldmVudE1hcFxyXG4gICAgICAgICAgICAvL2ZvciAobGV0IGUgb2YgdGhpcy5ldmVudHMpIHtcclxuICAgICAgICAgICAgLy8gICBpZiAoZXZlbnRNYXApIHtcclxuICAgICAgICAgICAgLy8gICAgIGxldCBmdW5jID0gZXZlbnRNYXAuZ2V0KGUpXHJcbiAgICAgICAgICAgIC8vICAgaWYgKGZ1bmMpIHtcclxuICAgICAgICAgICAgLy8gICAgIGZ1bmMoKVxyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgbGlzdGVuYWJsZS51cGRhdGUoZHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAodGhpcy5kZWxldGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGNvbXAgPSB0aGlzLmRlbGV0ZWQucG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoY29tcD8uY29tcG9uZW50SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50cyA9IFtdO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50SGFuZGxlci5qcy5tYXAiLCJleHBvcnQgY29uc3QgUEhZU0lDU19UQUcgPSBcIlBIWVNJQ1NcIjtcclxuZXhwb3J0IGNvbnN0IEdSQVBISUNTX1RBRyA9IFwiR1JBUEhJQ1NcIjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcG9uZW50VHlwZS5qcy5tYXAiLCJleHBvcnQgY2xhc3MgUXVhZFRyZWUge1xyXG4gICAgY29uc3RydWN0b3Ioc2l6ZSkge1xyXG4gICAgICAgIHRoaXMuZ2V0UXVhZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLnBhcmVudE5vZGUgPSBuZXcgUXVhZFRyZWVOb2RlKHNpemUpO1xyXG4gICAgfVxyXG4gICAgcXVlcnkoYm94KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5xdWVyeShib3gpO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICBpbnNlcnQoaXRlbSkge1xyXG4gICAgICAgIGxldCBxdWFkTm9kZSA9IHRoaXMucGFyZW50Tm9kZS5pbnNlcnQoaXRlbSk7XHJcbiAgICAgICAgdGhpcy5nZXRRdWFkLnNldChpdGVtLCBxdWFkTm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIHF1YWROb2RlO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlKGl0ZW0pIHtcclxuICAgICAgICBsZXQgcXVhZE5vZGUgPSB0aGlzLmdldFF1YWQuZ2V0KGl0ZW0pO1xyXG4gICAgICAgIGlmIChxdWFkTm9kZSkge1xyXG4gICAgICAgICAgICBxdWFkTm9kZS5yZW1vdmUoaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRRdWFkLmRlbGV0ZShpdGVtKTtcclxuICAgIH1cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudE5vZGUudG9TdHJpbmcoKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBRdWFkVHJlZU5vZGUge1xyXG4gICAgY29uc3RydWN0b3Ioc2l6ZSwgZGVwdGggPSAwKSB7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLmRlcHRoID0gMDtcclxuICAgICAgICB0aGlzLm1heERlcHRoID0gMztcclxuICAgICAgICB0aGlzLmFyZWEgPSBzaXplO1xyXG4gICAgICAgIHRoaXMuZGVwdGggPSBkZXB0aDtcclxuICAgICAgICB0aGlzLnJlc2l6ZShzaXplKTtcclxuICAgIH1cclxuICAgIHF1ZXJ5KGJveCkge1xyXG4gICAgICAgIGxldCBsaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5xdWVyeUhlbHBlcihib3gsIGxpc3QpO1xyXG4gICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgfVxyXG4gICAgcXVlcnlIZWxwZXIoYm94LCBhbnN3ZXIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGNvbGxpZGVzKGJveCwgdGhpcy5pdGVtc1tpXS5nZXRSZWN0YW5nbGUoKSkpIHtcclxuICAgICAgICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMuaXRlbXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbnMoYm94LCB0aGlzLmNoaWxkcmVuW2ldLmFyZWEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLmdldEl0ZW1MaXN0KGFuc3dlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29sbGlkZXModGhpcy5jaGlsZHJlbltpXS5hcmVhLCBib3gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnF1ZXJ5SGVscGVyKGJveCwgYW5zd2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEl0ZW1MaXN0KGxpc3QpIHtcclxuICAgICAgICBmb3IgKGxldCBpIG9mIHRoaXMuaXRlbXMpIHtcclxuICAgICAgICAgICAgbGlzdC5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbltpXS5nZXRJdGVtTGlzdChsaXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZW1vdmUoaXRlbSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLml0ZW1zW2ldID09IGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0gPSB0aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSBvZiB0aGlzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGlmIChpLnJlbW92ZShpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVjdGFuZ2xlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFyZWE7XHJcbiAgICB9XHJcbiAgICByZXNpemUocmVjdGFuZ2xlKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYXJlYSA9IHJlY3RhbmdsZTtcclxuICAgICAgICBpZiAodGhpcy5kZXB0aCArIDEgPCB0aGlzLm1heERlcHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChuZXcgUXVhZFRyZWVOb2RlKHsgcG9zOiB7IHg6IHJlY3RhbmdsZS5wb3MueCAtIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gNCwgeTogcmVjdGFuZ2xlLnBvcy55ICsgcmVjdGFuZ2xlLmRpbS5oZWlnaHQgLyA0IH0sIGRpbTogeyBsZW5ndGg6IHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gMiwgaGVpZ2h0OiByZWN0YW5nbGUuZGltLmhlaWdodCAvIDIgfSB9LCB0aGlzLmRlcHRoICsgMSkpO1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2gobmV3IFF1YWRUcmVlTm9kZSh7IHBvczogeyB4OiByZWN0YW5nbGUucG9zLnggLSByZWN0YW5nbGUuZGltLmxlbmd0aCAvIDQsIHk6IHJlY3RhbmdsZS5wb3MueSAtIHJlY3RhbmdsZS5kaW0uaGVpZ2h0IC8gNCB9LCBkaW06IHsgbGVuZ3RoOiByZWN0YW5nbGUuZGltLmxlbmd0aCAvIDIsIGhlaWdodDogcmVjdGFuZ2xlLmRpbS5oZWlnaHQgLyAyIH0gfSwgdGhpcy5kZXB0aCArIDEpKTtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKG5ldyBRdWFkVHJlZU5vZGUoeyBwb3M6IHsgeDogcmVjdGFuZ2xlLnBvcy54ICsgcmVjdGFuZ2xlLmRpbS5sZW5ndGggLyA0LCB5OiByZWN0YW5nbGUucG9zLnkgKyByZWN0YW5nbGUuZGltLmhlaWdodCAvIDQgfSwgZGltOiB7IGxlbmd0aDogcmVjdGFuZ2xlLmRpbS5sZW5ndGggLyAyLCBoZWlnaHQ6IHJlY3RhbmdsZS5kaW0uaGVpZ2h0IC8gMiB9IH0sIHRoaXMuZGVwdGggKyAxKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChuZXcgUXVhZFRyZWVOb2RlKHsgcG9zOiB7IHg6IHJlY3RhbmdsZS5wb3MueCArIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gNCwgeTogcmVjdGFuZ2xlLnBvcy55IC0gcmVjdGFuZ2xlLmRpbS5oZWlnaHQgLyA0IH0sIGRpbTogeyBsZW5ndGg6IHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gMiwgaGVpZ2h0OiByZWN0YW5nbGUuZGltLmhlaWdodCAvIDIgfSB9LCB0aGlzLmRlcHRoICsgMSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMubGVuZ3RoID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4ucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2l6ZSgpIHtcclxuICAgICAgICBsZXQgY291bnQgPSB0aGlzLml0ZW1zLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb3VudCArPSB0aGlzLmNoaWxkcmVuW2ldLnNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgfVxyXG4gICAgaW5zZXJ0KGl0ZW0pIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5zKHRoaXMuY2hpbGRyZW5baV0uYXJlYSwgaXRlbS5nZXRSZWN0YW5nbGUoKSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcHRoICsgMSA8IHRoaXMubWF4RGVwdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltpXS5pbnNlcnQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgbGV0IHRhYnMgPSBcIlwiO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kZXB0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRhYnMgKz0gXCIgICAgIFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmV0dXJuZWQgPSBcIlwiICsgdGFicztcclxuICAgICAgICByZXR1cm5lZCArPSBgUXVhZCBQb3NpdGlvbiBpcyAke3RoaXMuYXJlYS5wb3MueH0sJHt0aGlzLmFyZWEucG9zLnl9IHdpdGggYXJlYSAke3RoaXMuYXJlYS5kaW0uaGVpZ2h0fSB4ICR7dGhpcy5hcmVhLmRpbS5oZWlnaHR9IFxcbmA7XHJcbiAgICAgICAgcmV0dXJuZWQgKz0gdGFicztcclxuICAgICAgICByZXR1cm5lZCArPSBcIlF1YWQgaGFzIFwiICsgdGhpcy5jaGlsZHJlbi5sZW5ndGggKyBcIiBjaGlsZHJlbiBhdCBkZXB0aCBcIiArIHRoaXMuZGVwdGggKyBcIlxcblwiO1xyXG4gICAgICAgIHJldHVybmVkICs9IHRhYnM7XHJcbiAgICAgICAgcmV0dXJuZWQgKz0gXCJRdWFkIGhhcyBcIiArIHRoaXMuaXRlbXMubGVuZ3RoICsgXCIgaXRlbXNcXG5cIjtcclxuICAgICAgICByZXR1cm5lZCArPSB0YWJzO1xyXG4gICAgICAgIGZvciAobGV0IGkgb2YgdGhpcy5pdGVtcykge1xyXG4gICAgICAgICAgICByZXR1cm5lZCArPSBKU09OLnN0cmluZ2lmeShpKTtcclxuICAgICAgICAgICAgcmV0dXJuZWQgKz0gXCJcXG5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSBvZiB0aGlzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybmVkICs9IHRhYnMgKyBcIlxcblwiO1xyXG4gICAgICAgICAgICByZXR1cm5lZCArPSBpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0dXJuZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29udGFpbnMoY29udGFpbmVyLCBjb250YWluZWQpIHtcclxuICAgIGxldCB4MSA9IGNvbnRhaW5lZC5wb3MueCAtIGNvbnRhaW5lZC5kaW0ubGVuZ3RoIC8gMjtcclxuICAgIGxldCB5MSA9IGNvbnRhaW5lZC5wb3MueSAtIGNvbnRhaW5lZC5kaW0uaGVpZ2h0IC8gMjtcclxuICAgIGxldCB4MiA9IGNvbnRhaW5lci5wb3MueCAtIGNvbnRhaW5lci5kaW0ubGVuZ3RoIC8gMjtcclxuICAgIGxldCB5MiA9IGNvbnRhaW5lci5wb3MueSAtIGNvbnRhaW5lci5kaW0uaGVpZ2h0IC8gMjtcclxuICAgIGlmICh4MSA+PSB4MlxyXG4gICAgICAgICYmIHgxICsgY29udGFpbmVkLmRpbS5sZW5ndGggPCB4MiArIGNvbnRhaW5lci5kaW0ubGVuZ3RoXHJcbiAgICAgICAgJiYgeTEgPj0geTJcclxuICAgICAgICAmJiB5MSArIGNvbnRhaW5lZC5kaW0uaGVpZ2h0IDwgeTIgKyBjb250YWluZXIuZGltLmhlaWdodCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbGxpZGVzKHJlY3RhbmdsZTEsIHJlY3RhbmdsZTIpIHtcclxuICAgIGxldCB4MSA9IHJlY3RhbmdsZTEucG9zLnggLSByZWN0YW5nbGUxLmRpbS5sZW5ndGggLyAyO1xyXG4gICAgbGV0IHkxID0gcmVjdGFuZ2xlMS5wb3MueSAtIHJlY3RhbmdsZTEuZGltLmhlaWdodCAvIDI7XHJcbiAgICBsZXQgeDIgPSByZWN0YW5nbGUyLnBvcy54IC0gcmVjdGFuZ2xlMi5kaW0ubGVuZ3RoIC8gMjtcclxuICAgIGxldCB5MiA9IHJlY3RhbmdsZTIucG9zLnkgLSByZWN0YW5nbGUyLmRpbS5oZWlnaHQgLyAyO1xyXG4gICAgaWYgKHgxIDwgeDIgKyByZWN0YW5nbGUyLmRpbS5sZW5ndGhcclxuICAgICAgICAmJiB4MSArIHJlY3RhbmdsZTEuZGltLmxlbmd0aCA+IHgyXHJcbiAgICAgICAgJiYgeTEgPCB5MiArIHJlY3RhbmdsZTIuZGltLmhlaWdodFxyXG4gICAgICAgICYmIHkxICsgcmVjdGFuZ2xlMS5kaW0uaGVpZ2h0ID4geTIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB0ZXN0Q2hpbGRyZW4ocXVhZCkge1xyXG4gICAgbGV0IGJvb2wgPSB0cnVlO1xyXG4gICAgZm9yIChsZXQgY2hpbGQgb2YgcXVhZC5jaGlsZHJlbikge1xyXG4gICAgICAgIGJvb2wgPSB0ZXN0Q2hpbGRyZW4oY2hpbGQpO1xyXG4gICAgICAgIGxldCByZWN0YW5nbGUgPSBjaGlsZC5hcmVhO1xyXG4gICAgICAgIGlmICghYm9vbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlY3RhbmdsZS5wb3MueCArIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gNCAmJiByZWN0YW5nbGUucG9zLnkgKyByZWN0YW5nbGUuZGltLmhlaWdodCAvIDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlY3RhbmdsZS5wb3MueCAtIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gNCAmJiByZWN0YW5nbGUucG9zLnkgKyByZWN0YW5nbGUuZGltLmhlaWdodCAvIDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlY3RhbmdsZS5wb3MueCArIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gNCAmJiByZWN0YW5nbGUucG9zLnkgLSByZWN0YW5nbGUuZGltLmhlaWdodCAvIDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlY3RhbmdsZS5wb3MueCAtIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gNCAmJiByZWN0YW5nbGUucG9zLnkgLSByZWN0YW5nbGUuZGltLmhlaWdodCAvIDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJvb2w7XHJcbn1cclxuLy9jb25zb2xlLmxvZyh0ZXN0Q2hpbGRyZW4ocXVhZCkpXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1YWR0cmVlLmpzLm1hcCIsImltcG9ydCB7IFF1YWRUcmVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2VuZ2luZS9zcmMvc3RydWN0cy9RdWFkdHJlZS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUXVhZFRyZWVTdHJhdGVneSB7XHJcbiAgICBjb25zdHJ1Y3RvcihncmFwaGljc0VuZ2luZSwgc2l6ZSkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZWRFbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMucXVhZHRyZWUgPSBuZXcgUXVhZFRyZWUoc2l6ZSk7XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclN0cmF0ZWd5KGNvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMucXVhZHRyZWUuaW5zZXJ0KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBkZXJlZ2lzdGVyU3RyYXRlZ3koY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5xdWFkdHJlZS5yZW1vdmUoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJlbmRlcihyZW5kZXJpbmdBcnIpIHtcclxuICAgICAgICBmb3IgKGxldCBpIG9mIHJlbmRlcmluZ0Fycikge1xyXG4gICAgICAgICAgICBsZXQgcXVlcnkgPSBpLmdldFJlY3RhbmdsZSgpO1xyXG4gICAgICAgICAgICBsZXQgaXRlbXMgPSB0aGlzLnF1YWR0cmVlLnF1ZXJ5KHF1ZXJ5KTtcclxuICAgICAgICAgICAgaS5yZW5kZXIoaXRlbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1YWRUcmVlUmVuZGVyaW5nLmpzLm1hcCIsImltcG9ydCB7IEdSQVBISUNTX1RBRyB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMvY29tcG9uZW50VHlwZS5qc1wiO1xyXG5pbXBvcnQgeyBRdWFkVHJlZVN0cmF0ZWd5IH0gZnJvbSBcIi4uLy4uL3R5cGVzL2NvbXBvbmVudHMvZ3JhcGhpY3MvUXVhZFRyZWVSZW5kZXJpbmcuanNcIjtcclxuZXhwb3J0IGNsYXNzIEdyYXBoaWNzRW5naW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKGdyYXBoaWNzQ29uZmlnLCBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy50YWcgPSBHUkFQSElDU19UQUc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJpbmcgPSBbXTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNzQ29uZmlnID0gZ3JhcGhpY3NDb25maWc7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IFtdO1xyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gXCIwXCI7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0SW5mbyA9IGNvbnRleHQ7XHJcbiAgICAgICAgbGV0IHNpemUgPSB7XHJcbiAgICAgICAgICAgIHBvczoge1xyXG4gICAgICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgICAgICB6OiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJvdDogMCxcclxuICAgICAgICAgICAgZGltOiB7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGg6IHRoaXMuY29udGV4dEluZm8uZ2V0Q2FudmFzKCkud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuY29udGV4dEluZm8uZ2V0Q2FudmFzKCkuaGVpZ2h0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVuZGVyU3RyYXRlZ3kgPSBuZXcgUXVhZFRyZWVTdHJhdGVneSh0aGlzLCBzaXplKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyKGNvbXAsIGlkKSB7XHJcbiAgICAgICAgaWYgKGNvbXAuY29tcG9uZW50SWQgPT0gdW5kZWZpbmVkIHx8IGNvbXAuY29tcG9uZW50SWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdGVyaW5nIHVuZGVmaW5lZCBpZCBpbiBHZ3JhcGhpY3NcIik7XHJcbiAgICAgICAgICAgIGNvbXAuY29tcG9uZW50SWQgPSBpZDtcclxuICAgICAgICAgICAgY29tcC5zeXN0ZW0gPSB0aGlzO1xyXG4gICAgICAgICAgICBjb21wLmNvbnRleHQgPSB0aGlzLmNvbnRleHRJbmZvO1xyXG4gICAgICAgICAgICBpZiAoY29tcC5yZW5kZXJlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmluZy5wdXNoKGNvbXApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQdXNoaW5nIHRvIHJlbmRlcmluZ1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21wLmluaXRpYWxpemUodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5zZXQoaWQsIGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJHcmFwaGljcyBSZWdpc3RlcmluZyBpZFwiICsgY29tcC5jb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIGNvbXAuc3lzdGVtID0gdGhpcztcclxuICAgICAgICAgICAgY29tcC5jb250ZXh0ID0gdGhpcy5jb250ZXh0SW5mbztcclxuICAgICAgICAgICAgaWYgKGNvbXAucmVuZGVyZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmcucHVzaChjb21wKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUHVzaGluZyB0byByZW5kZXJpbmdcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcC5yZW5kZXJlZCA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU3RyYXRlZ3kucmVnaXN0ZXJTdHJhdGVneShjb21wKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdGVyZWQgU3RyYXRlZ3lcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcC5pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGNvbXAuY29tcG9uZW50SWQsIGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXIoaWQpIHtcclxuICAgICAgICBsZXQgZGVsZXRlZCA9IHRoaXMuY29tcG9uZW50cy5nZXQoaWQpO1xyXG4gICAgICAgIGlmIChkZWxldGVkKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZWQuYWxpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGVkLnB1c2goZGVsZXRlZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoaWQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclN0cmF0ZWd5LmRlcmVnaXN0ZXJTdHJhdGVneShkZWxldGVkKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGVsZXRlZC5lbnRpdHkgKyBcIiBzIENvbXBvbmVudCB3aXRoIGlkIFwiICsgZGVsZXRlZC5jb21wb25lbnRJZCArIFwiaXMgcG9wcGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCkge1xyXG4gICAgICAgIGxldCBjdHggPSB0aGlzLmNvbnRleHRJbmZvLmN0eDtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkdyYXBoaWNzIGVuZ2luZSBydW5uaW5nXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiR3JhcGhpY3MgQ29tcG9uZW50czogXCIgKyB0aGlzLmNvbXBvbmVudHMuc2l6ZSk7XHJcbiAgICAgICAgZm9yIChsZXQgYyBvZiB0aGlzLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgbGV0IGNvbXAgPSBjWzFdO1xyXG4gICAgICAgICAgICBjb21wLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmVuZGVyaW5nIENvbXBvbmVudHM6IFwiICsgdGhpcy5yZW5kZXJpbmcubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLnJlbmRlclN0cmF0ZWd5LnJlbmRlcih0aGlzLnJlbmRlcmluZyk7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuZGVsZXRlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBjb21wID0gdGhpcy5kZWxldGVkLnBvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuZGVsZXRlKGNvbXA/LmNvbXBvbmVudElkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRTY2VuZShzY2VuZSkge1xyXG4gICAgICAgIGxldCBnZXQgPSBzY2VuZS5lbmdpbmVDb21wb25lbnRzLmdldCh0aGlzLnRhZyk7XHJcbiAgICAgICAgaWYgKGdldCkge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlZ2lzdGVyRG9tRWxlbWVudHMoKSB7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JhcGhpY0VuZ2luZS5qcy5tYXAiLCJpbXBvcnQgeyBQSFlTSUNTX1RBRyB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMvY29tcG9uZW50VHlwZS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUGh5c2ljc0VuZ2luZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICB0aGlzLnRhZyA9IFBIWVNJQ1NfVEFHO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyKGNvbXAsIGlkKSB7XHJcbiAgICAgICAgaWYgKGNvbXAuY29tcG9uZW50SWQgPT0gdW5kZWZpbmVkIHx8IGNvbXAuY29tcG9uZW50SWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb21wLnN5c3RlbSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5zZXQoaWQsIGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29tcC5zeXN0ZW0gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGNvbXAuY29tcG9uZW50SWQsIGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXIoY29tcCkge1xyXG4gICAgICAgIGxldCBkZWxldGVkID0gdGhpcy5jb21wb25lbnRzLmdldChjb21wKTtcclxuICAgICAgICBpZiAoZGVsZXRlZCkge1xyXG4gICAgICAgICAgICBkZWxldGVkLmFsaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlZC5wdXNoKGRlbGV0ZWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZWxldGVkLmVudGl0eSArIFwiIHMgQ29tcG9uZW50IHdpdGggaWQgXCIgKyBkZWxldGVkLmNvbXBvbmVudElkICsgXCJpcyBwb3BwZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlKGR0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQaHlzaWNzIGVuZ2luZSBydW5uaW5nXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGh5c2ljcyBDb21wb25lbnRzOiBcIiArIHRoaXMuY29tcG9uZW50cy5zaXplKTtcclxuICAgICAgICBmb3IgKGxldCBjb21wIG9mIHRoaXMuY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICBjb21wWzFdLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICh0aGlzLmRlbGV0ZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgY29tcCA9IHRoaXMuZGVsZXRlZC5wb3AoKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLmRlbGV0ZShjb21wPy5jb21wb25lbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBoeXNpY3NFbmdpbmUuanMubWFwIiwiZXhwb3J0IHZhciBFbmdpbmVUeXBlO1xyXG4oZnVuY3Rpb24gKEVuZ2luZVR5cGUpIHtcclxuICAgIEVuZ2luZVR5cGVbRW5naW5lVHlwZVtcIlNPQ0tFVENMSUVOVFwiXSA9IDBdID0gXCJTT0NLRVRDTElFTlRcIjtcclxuICAgIEVuZ2luZVR5cGVbRW5naW5lVHlwZVtcIlNPQ0tFVFNFUlZFUlwiXSA9IDFdID0gXCJTT0NLRVRTRVJWRVJcIjtcclxuICAgIEVuZ2luZVR5cGVbRW5naW5lVHlwZVtcIkNMSUVOVE9OTFlcIl0gPSAyXSA9IFwiQ0xJRU5UT05MWVwiO1xyXG4gICAgRW5naW5lVHlwZVtFbmdpbmVUeXBlW1wiQk9USFwiXSA9IDNdID0gXCJCT1RIXCI7XHJcbn0pKEVuZ2luZVR5cGUgfHwgKEVuZ2luZVR5cGUgPSB7fSkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbmdpbmVUeXBlLmpzLm1hcCIsImltcG9ydCB7IEVuZ2luZVR5cGUgfSBmcm9tIFwiLi4vLi4vY29uc3RhbnRzL2VuZ2luZVR5cGUuanNcIjtcclxuZXhwb3J0IGNsYXNzIFNjcmlwdGluZ0VuZ2luZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmVUeXBlKSB7XHJcbiAgICAgICAgdGhpcy50YWcgPSBcIlNDUklQVElOR1wiO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmVuZ2luZVR5cGUgPSBlbmdpbmVUeXBlO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXIoY29tcCwgaWQpIHtcclxuICAgICAgICBpZiAoY29tcC5jb21wb25lbnRJZCA9PSB1bmRlZmluZWQgfHwgY29tcC5jb21wb25lbnRJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbXAuY29tcG9uZW50SWQgPSBpZDtcclxuICAgICAgICAgICAgY29tcC5zeXN0ZW0gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGlkLCBjb21wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbXAuY29tcG9uZW50SWQgPSBjb21wLmNvbXBvbmVudElkO1xyXG4gICAgICAgICAgICBjb21wLnN5c3RlbSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5zZXQoY29tcC5jb21wb25lbnRJZCwgY29tcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5yZWdpc3Rlcihjb21wKSB7XHJcbiAgICAgICAgbGV0IGRlbGV0ZWQgPSB0aGlzLmNvbXBvbmVudHMuZ2V0KGNvbXApO1xyXG4gICAgICAgIGlmIChkZWxldGVkKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZWQuYWxpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGVkLnB1c2goZGVsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShjb21wKSB7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNjcmlwdGluZyBlbmdpbmUgcnVubmluZ1wiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNjcmlwdGluZyBDb21wb25lbnRzOiBcIiArIHRoaXMuY29tcG9uZW50cy5zaXplKTtcclxuICAgICAgICBmb3IgKGxldCBjb21wIG9mIHRoaXMuY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICBpZiAoY29tcFsxXS5lbmdpbmVUeXBlID09IHRoaXMuZW5naW5lVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY29tcFsxXS51cGRhdGUoZHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbXBbMV0uZW5naW5lVHlwZSA9IEVuZ2luZVR5cGUuQk9USCkge1xyXG4gICAgICAgICAgICAgICAgY29tcFsxXS51cGRhdGUoZHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICh0aGlzLmRlbGV0ZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgY29tcCA9IHRoaXMuZGVsZXRlZC5wb3AoKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLmRlbGV0ZShjb21wPy5jb21wb25lbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjcmlwdGluZ0VuZ2luZS5qcy5tYXAiLCJleHBvcnQgY2xhc3MgQ29udGV4dEluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoZ3JhcGhpY3NDb25maWcpIHtcclxuICAgICAgICB0aGlzLmdyYXBoaWNzQ29uZmlnID0gZ3JhcGhpY3NDb25maWc7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljc0NvbmZpZyA9IGdyYXBoaWNzQ29uZmlnO1xyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gXCIwXCI7XHJcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gdGhpcy5nZW5lcmF0ZUNhbnZhcygpO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIHRoaXMuZGl2ID0gdGhpcy5nZW5lcmF0ZURpdih0aGlzLmdyYXBoaWNzQ29uZmlnLnBhcmVudCk7XHJcbiAgICB9XHJcbiAgICBnZW5lcmF0ZURpdihwYXJlbnQpIHtcclxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGl2LmlkID0gcGFyZW50O1xyXG4gICAgICAgIGRpdi5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBkaXYuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICBkaXYuc3R5bGUuekluZGV4ID0gXCIwXCI7XHJcbiAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICBkaXYuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwidGVzdFwiKTtcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYW52YXMoKSB7XHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJDQU5WQVNcIik7XHJcbiAgICAgICAgY2FudmFzLmlkID0gdGhpcy5ncmFwaGljc0NvbmZpZy5jYW52YXNJRDtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBhcnNlU3R5bGUodGhpcy5ncmFwaGljc0NvbmZpZy5zdHlsZSkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQmVmb3JlXCIpO1xyXG4gICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgdGhpcy5wYXJzZVN0eWxlKHRoaXMuZ3JhcGhpY3NDb25maWcuc3R5bGUpKTtcclxuICAgICAgICByZXR1cm4gY2FudmFzO1xyXG4gICAgfVxyXG4gICAgZ2V0Q3R4KCkge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpO1xyXG4gICAgICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2FudmFzKCkge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdyYXBoaWNzQ29uZmlnLmNhbnZhc0lEKTtcclxuICAgICAgICBpZiAoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbnZhcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiZW5naW5lQ2FudmFzIHNob3VsZCBiZSBhIHJlc2VydmVkIGlkIGZvciBET00gQ29tcG9uZW50c1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwYXJzZVN0eWxlKHN0eWxlT2JqZWN0KSB7XHJcbiAgICAgICAgbGV0IGNzc0FycmF5ID0gT2JqZWN0LmVudHJpZXMoc3R5bGVPYmplY3QpLm1hcCgoW2ssIHZdKSA9PiBrICsgXCI6XCIgKyB2ICsgXCI7XCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ3JhcGhpY3NDb25maWcucGFyZW50KTtcclxuICAgICAgICByZXR1cm4gY3NzQXJyYXkuam9pbihcIiBcIik7XHJcbiAgICB9XHJcbiAgICBzZXR1cCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ncmFwaGljc0NvbmZpZy5iYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSB0aGlzLmdyYXBoaWNzQ29uZmlnLmJhY2tncm91bmQ7XHJcbiAgICAgICAgICAgIGltYWdlLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgICAgICBpbWFnZS5zdHlsZS56SW5kZXggPSBcIi0xXCI7XHJcbiAgICAgICAgICAgIGltYWdlLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGltYWdlLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGltYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGV4dC5qcy5tYXAiLCJpbXBvcnQgeyBFbmdpbmVUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50cy9lbmdpbmVUeXBlLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBTY2VuZU1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoZW5naW5lQ29uZmlnLCBzY2VuZXMgPSBbXSwgc3lzdGVtcykge1xyXG4gICAgICAgIHRoaXMuc2NlbmVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaWQgPSAwO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SWQgPSAwO1xyXG4gICAgICAgIHRoaXMuc3lzdGVtcyA9IHN5c3RlbXM7XHJcbiAgICAgICAgdGhpcy5zeXN0ZW1UYWcgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVDb25maWcgPSBlbmdpbmVDb25maWc7XHJcbiAgICAgICAgbGV0IGVuZ2luZVR5cGUgPSBlbmdpbmVDb25maWcuZW5naW5lVHlwZTtcclxuICAgICAgICBpZiAoZW5naW5lVHlwZSA9PSBFbmdpbmVUeXBlLlNPQ0tFVENMSUVOVCkge1xyXG4gICAgICAgICAgICBTY2VuZU1hbmFnZXIuRW5naW5lVHlwZSA9IEVuZ2luZVR5cGUuU09DS0VUQ0xJRU5UO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmdpbmVUeXBlID09IEVuZ2luZVR5cGUuU09DS0VUU0VSVkVSKSB7XHJcbiAgICAgICAgICAgIFNjZW5lTWFuYWdlci5FbmdpbmVUeXBlID0gRW5naW5lVHlwZS5TT0NLRVRTRVJWRVI7XHJcbiAgICAgICAgICAgIC8vc3lzdGVtcy5wdXNoKG5ldyBTb2NrZXRTZXJ2ZXJNYW5hZ2VyKHRoaXMpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgU2NlbmVNYW5hZ2VyLkVuZ2luZVR5cGUgPSBFbmdpbmVUeXBlLkNMSUVOVE9OTFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdDb25maWcgPSBzY2VuZXNbaV07XHJcbiAgICAgICAgICAgIGxldCBuZXdTY2VuZSA9IG5ld0NvbmZpZztcclxuICAgICAgICAgICAgbmV3U2NlbmUuc2NlbmVNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICAgICAgbmV3U2NlbmUuZW5naW5lQ29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbiBTY2VuZSBNYW5hZ2VyXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lcy5zZXQobmV3U2NlbmUubmFtZSwgbmV3U2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFNjZW5lKHNjZW5lc1swXS5uYW1lKTtcclxuICAgICAgICB0aGlzLnNjZW5lQ29uZmlncyA9IHNjZW5lcztcclxuICAgICAgICBTY2VuZU1hbmFnZXIuY3VycmVudElkeCA9IHRoaXMuc2NlbmVDb25maWdzWzBdLm5hbWU7XHJcbiAgICAgICAgdGhpcy5zeXN0ZW1zID0gc3lzdGVtcztcclxuICAgIH1cclxuICAgIHN3aXRjaFNjZW5lcyhrZXkpIHtcclxuICAgICAgICBsZXQgc2NlbmUgPSB0aGlzLnNjZW5lcy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoc2NlbmUpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgc3lzIG9mIHRoaXMuc3lzdGVtcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXAgPSBzY2VuZS5lbmdpbmVDb21wb25lbnRzLmdldChzeXMudGFnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb21wKSB7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcImVycm9yIGluIHN0YXJ0IG1ldGhvZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEN1cnJlbnRTY2VuZSgpIHtcclxuICAgICAgICBsZXQgY3VyciA9IHRoaXMuc2NlbmVzLmdldChTY2VuZU1hbmFnZXIuY3VycmVudElkeCk7XHJcbiAgICAgICAgaWYgKGN1cnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNhbnQgZ2V0IGN1cnJlbnQgc2NlbmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0U2NlbmUoaWR4KSB7XHJcbiAgICAgICAgbGV0IHNjZW5lID0gdGhpcy5zY2VuZXMuZ2V0KGlkeCk7XHJcbiAgICAgICAgaWYgKHNjZW5lKSB7XHJcbiAgICAgICAgICAgIFNjZW5lTWFuYWdlci5jdXJyU2NlbmUgPSBzY2VuZTtcclxuICAgICAgICAgICAgU2NlbmVNYW5hZ2VyLmN1cnJlbnRJZHggPSBpZHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0VW5pcXVlSWQoKSB7XHJcbiAgICAgICAgaWYgKFNjZW5lTWFuYWdlci5FbmdpbmVUeXBlID09IEVuZ2luZVR5cGUuU09DS0VUQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgIGxldCBpZCA9IHRoaXMuaWQgLSAxO1xyXG4gICAgICAgICAgICB0aGlzLmlkLS07XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBpZCA9IHRoaXMuaWQgKyAxO1xyXG4gICAgICAgICAgICB0aGlzLmlkKys7XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRVbmlxdWVDb21wb25lbnRJZCgpIHtcclxuICAgICAgICBpZiAoU2NlbmVNYW5hZ2VyLkVuZ2luZVR5cGUgPT0gRW5naW5lVHlwZS5TT0NLRVRDTElFTlQpIHtcclxuICAgICAgICAgICAgbGV0IGlkID0gdGhpcy5jb21wb25lbnRJZCAtIDE7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50SWQtLTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGlkID0gdGhpcy5jb21wb25lbnRJZCArIDE7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50SWQrKztcclxuICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5TY2VuZU1hbmFnZXIuRW5naW5lVHlwZSA9IEVuZ2luZVR5cGUuQ0xJRU5UT05MWTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2NlbmVNYW5hZ2VyLmpzLm1hcCIsImV4cG9ydCBjbGFzcyBOYWl2ZUNvbGxpc2lvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihzeXN0ZW0pIHtcclxuICAgICAgICB0aGlzLmRlbGV0ZWQgPSBbXTtcclxuICAgICAgICB0aGlzLnN5c3RlbSA9IHN5c3RlbTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGR0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgW2tleTEsIGNvbDFdIG9mIHRoaXMuc3lzdGVtLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGNvbDEudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgW2tleTIsIGNvbDJdIG9mIHRoaXMuc3lzdGVtLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sMi52aXNpYmxlICYmIGNvbDEuY2hlY2tDb2xsaXNpb24oY29sMikgJiYgY29sMSAhPSBjb2wyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbDEuY29sbGlkZXMoY29sMik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjb2wyLmFsaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlZC5wdXNoKGNvbDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnQgY2xhc3MgU3BhdGlhbEhhc2hHcmlkU3RyYXRlZ3kge1xyXG4gICAgY29uc3RydWN0b3Ioc3lzdGVtKSB7XHJcbiAgICAgICAgdGhpcy5zeXN0ZW0gPSBzeXN0ZW07XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gW107XHJcbiAgICAgICAgdGhpcy5zeXN0ZW0uY29uZmlnLmJvdW5kcztcclxuICAgICAgICB0aGlzLmdyaWQgPSBuZXcgU3BhdGlhbEhhc2hHcmlkKHRoaXMuc3lzdGVtLmNvbmZpZy5ib3VuZHMsIDUsIDUpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGR0KSB7XHJcbiAgICB9XHJcbiAgICByZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBTcGF0aWFsSGFzaEdyaWQge1xyXG4gICAgY29uc3RydWN0b3IoYm91bmRzID0geyB0b3BYOiAwLCB0b3BZOiAwLCBib3R0b21YOiAxMDAsIGJvdHRvbVk6IDEwMCB9LCB4Q2VsbHMsIHlDZWxscykge1xyXG4gICAgICAgIHRoaXMuZ3JpZE1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLnhDZWxsID0geENlbGxzO1xyXG4gICAgICAgIHRoaXMueUNlbGwgPSB5Q2VsbHM7XHJcbiAgICAgICAgdGhpcy5ib3VuZHMgPSBib3VuZHM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Q2VsbHMgKiB5Q2VsbHM7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmdyaWRNYXAuc2V0KGksIFtdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZW1vdmUoY29sbGlkZXIpIHtcclxuICAgIH1cclxuICAgIHVwZGF0ZShjb2xsaWRlcnMpIHtcclxuICAgICAgICB0aGlzLmdyaWRNYXAuY2xlYXIoKTtcclxuICAgICAgICBmb3IgKGxldCBjb2xsaWRlciBvZiBjb2xsaWRlcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGQoY29sbGlkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZChjb2xsaWRlcikge1xyXG4gICAgICAgIGNvbnN0IHggPSBjb2xsaWRlci5ib3VuZGluZ0JveC5wb3MueDtcclxuICAgICAgICBjb25zdCB5ID0gY29sbGlkZXIuYm91bmRpbmdCb3gucG9zLnk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gY29sbGlkZXIuYm91bmRpbmdCb3guZGltLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSBjb2xsaWRlci5ib3VuZGluZ0JveC5kaW0uaGVpZ2h0O1xyXG4gICAgICAgIGxldCBjZWxsSW5kaWNlcyA9IHRoaXMuZ2V0Q2VsbEluZGV4KGNvbGxpZGVyKTtcclxuICAgICAgICBmb3IgKGxldCBpIG9mIGNlbGxJbmRpY2VzKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q2VsbEluZGV4KGNvbGxpZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIFsxLCAyXTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsaXNpb25TdHJhdGVneS5qcy5tYXAiLCJpbXBvcnQgeyBOYWl2ZUNvbGxpc2lvbiB9IGZyb20gXCIuLi8uLi90eXBlcy9jb21wb25lbnRzL2NvbGxpc2lvbi9Db2xsaXNpb25TdHJhdGVneS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgQ29sbGlzaW9uU3lzdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMudGFnID0gXCJDT0xMSVNJT05cIjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gW107XHJcbiAgICAgICAgaWYgKGNvbmZpZy5ib3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5ib3VuZHMgPSBjb25maWcuYm91bmRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbGxpc2lvblN0cmF0ZWd5ID0gbmV3IE5haXZlQ29sbGlzaW9uKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXIoY29tcCwgaWQpIHtcclxuICAgICAgICBpZiAoY29tcC5jb21wb25lbnRJZCA9PSB1bmRlZmluZWQgfHwgY29tcC5jb21wb25lbnRJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbXAuY29tcG9uZW50SWQgPSBpZDtcclxuICAgICAgICAgICAgY29tcC5zeXN0ZW0gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGlkLCBjb21wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbXAuc3lzdGVtID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldChjb21wLmNvbXBvbmVudElkLCBjb21wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TdHJhdGVneS5yZWdpc3RlckNvbXBvbmVudChjb21wKTtcclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXIoY29tcCkge1xyXG4gICAgICAgIGxldCBkZWxldGVkID0gdGhpcy5jb21wb25lbnRzLmdldChjb21wKTtcclxuICAgICAgICBpZiAoZGVsZXRlZCkge1xyXG4gICAgICAgICAgICBkZWxldGVkLmFsaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlZC5wdXNoKGRlbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29sbGlzaW9uIFN5c3RlbSBSdW5uaW5nXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29sbGlzaW9uIENvbXBvbmVudHM6IFwiICsgdGhpcy5jb21wb25lbnRzLnNpemUpO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3RyYXRlZ3kudXBkYXRlKGR0KTtcclxuICAgICAgICB3aGlsZSAodGhpcy5kZWxldGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHBvcHBlZCA9IHRoaXMuZGVsZXRlZC5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKHBvcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVDb21wb25lbnQocG9wcGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlbGV0ZUNvbXBvbmVudChjb2wpIHtcclxuICAgICAgICBpZiAoY29sLmNvbXBvbmVudElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoY29sLmNvbXBvbmVudElkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29sbGlzaW9uU3lzdGVtLmpzLm1hcCIsImltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9zeXN0ZW1zL2V2ZW50cy9FdmVudEhhbmRsZXIuanNcIjtcclxuaW1wb3J0IHsgR3JhcGhpY3NFbmdpbmUgfSBmcm9tIFwiLi4vc3lzdGVtcy9ncmFwaGljcy9HcmFwaGljRW5naW5lLmpzXCI7XHJcbmltcG9ydCB7IFBoeXNpY3NFbmdpbmUgfSBmcm9tIFwiLi4vc3lzdGVtcy9waHlzaWNzL1BoeXNpY3NFbmdpbmUuanNcIjtcclxuaW1wb3J0IHsgU2NyaXB0aW5nRW5naW5lIH0gZnJvbSBcIi4uL3N5c3RlbXMvc2NyaXB0aW5nL1NjcmlwdGluZ0VuZ2luZS5qc1wiO1xyXG5pbXBvcnQgeyBDb250ZXh0SW5mbyB9IGZyb20gXCIuL2NvbnRleHQuanNcIjtcclxuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyLmpzXCI7XHJcbmltcG9ydCB7IENvbGxpc2lvblN5c3RlbSB9IGZyb20gXCIuLi9zeXN0ZW1zL0NvbGxpc2lvbi9Db2xsaXNpb25TeXN0ZW0uanNcIjtcclxuaW1wb3J0IHsgRW5naW5lVHlwZSB9IGZyb20gXCIuLi9jb25zdGFudHMvZW5naW5lVHlwZS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVDb25maWcgPSB7XHJcbiAgICAgICAgZW5naW5lVHlwZTogRW5naW5lVHlwZS5DTElFTlRPTkxZLFxyXG4gICAgfSwgc3lzdGVtcykge1xyXG4gICAgICAgIHRoaXMuY2FudmFzSUQgPSBcImVuZ2luZUNhbnZhc1wiO1xyXG4gICAgICAgIHRoaXMuc3lzdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VydmVyVGltZSA9IDBuO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVDb25maWcgPSBnYW1lQ29uZmlnO1xyXG4gICAgICAgIGlmIChnYW1lQ29uZmlnLmdyYXBoaWNzQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dEluZm8gPSBuZXcgQ29udGV4dEluZm8oZ2FtZUNvbmZpZy5ncmFwaGljc0NvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZUNvbmZpZy5ldmVudENvbmZpZyAmJiB0aGlzLmNvbnRleHRJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKG5ldyBFdmVudEhhbmRsZXIodGhpcy5lbmdpbmVDb25maWcuZXZlbnRDb25maWcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lQ29uZmlnLnBoeXNpY3NDb25maWcpIHtcclxuICAgICAgICAgICAgdGhpcy5zeXN0ZW1zLnB1c2gobmV3IFBoeXNpY3NFbmdpbmUodGhpcy5lbmdpbmVDb25maWcucGh5c2ljc0NvbmZpZykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbmdpbmVDb25maWcuc2NyaXB0aW5nQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKG5ldyBTY3JpcHRpbmdFbmdpbmUodGhpcy5lbmdpbmVDb25maWcuZW5naW5lVHlwZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3lzdGVtcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBzeXMgb2Ygc3lzdGVtcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1zLnB1c2goc3lzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbmdpbmVDb25maWcuY29sbGlzaW9uQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKG5ldyBDb2xsaXNpb25TeXN0ZW0odGhpcy5lbmdpbmVDb25maWcuY29sbGlzaW9uQ29uZmlnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZUNvbmZpZy5ncmFwaGljc0NvbmZpZyAmJiB0aGlzLmNvbnRleHRJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY3MgPSBuZXcgR3JhcGhpY3NFbmdpbmUodGhpcy5lbmdpbmVDb25maWcuZ3JhcGhpY3NDb25maWcsIHRoaXMuY29udGV4dEluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbXMucHVzaCh0aGlzLmdyYXBoaWNzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN5c3RlbXMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgc3lzIG9mIHN5c3RlbXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKHN5cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIgPSBuZXcgU2NlbmVNYW5hZ2VyKHRoaXMuZW5naW5lQ29uZmlnLCB0aGlzLmVuZ2luZUNvbmZpZy5zY2VuZUNvbmZpZywgdGhpcy5zeXN0ZW1zKTtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgIFxyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSdcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSdcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSBcIjBcIlxyXG4gICAgICAgIHRoaXMuc2V0dXAoKVxyXG4gICAgICAgIHRoaXMuZGl2ID0gdGhpcy5nZW5lcmF0ZURpdih0aGlzLmVuZ2luZUNvbmZpZy5wYXJlbnQpIDtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZVxyXG4gICAgICAgICovXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgIHBhcnNlU3R5bGUoc3R5bGVPYmplY3Q6IE9iamVjdCk6ICBzdHJpbmcge1xyXG4gICAgICAgIGxldCBjc3NBcnJheTogc3RyaW5nW10gPSBPYmplY3QuZW50cmllcyhzdHlsZU9iamVjdCkubWFwKChbayx2XSkgPT4gayArIFwiOlwiICsgdiArIFwiO1wiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW5naW5lQ29uZmlnLnBhcmVudClcclxuICAgICAgICByZXR1cm4gY3NzQXJyYXkuam9pbihcIiBcIilcclxuICAgIH1cclxuICAgICovXHJcbiAgICAvKipcclxuICAgIGdlbmVyYXRlRGl2KHBhcmVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGRpdjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGRpdi5pZCA9IHBhcmVudFxyXG4gICAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIlxyXG4gICAgICAgIGRpdi5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIlxyXG4gICAgICAgIGRpdi5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXHJcbiAgICAgICAgZGl2LnN0eWxlLnpJbmRleCA9IFwiMVwiXHJcbiAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwiL2ltYWdlcy90ZXN0LmpwZ1wiXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVDYW52YXMoKSlcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdilcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0ZXN0XCIpXHJcbiAgICAgICAgcmV0dXJuIGRpdlxyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYW52YXMoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpXHJcbiAgICAgICAgY2FudmFzLmlkID0gdGhpcy5jYW52YXNJRFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGFyc2VTdHlsZSh0aGlzLmVuZ2luZUNvbmZpZy5zdHlsZSkpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJCZWZvcmVcIilcclxuICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdzdHlsZScsIHRoaXMucGFyc2VTdHlsZSh0aGlzLmVuZ2luZUNvbmZpZy5zdHlsZSkpXHJcbiAgICAgICAgcmV0dXJuIGNhbnZhc1xyXG4gICAgfVxyXG4gICAgZ2V0Q3R4KCkge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpXHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIilcclxuICAgIH1cclxuICAgIGdldENhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY2FudmFzSUQpXHJcbiAgICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYW52YXNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImVuZ2luZUNhbnZhcyBzaG91bGQgYmUgYSByZXNlcnZlZCBpZCBmb3IgRE9NIENvbXBvbmVudHNcIilcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgICAqXHJcbiAgICAgXHJcbiAgICBzZXR1cCgpIHtcclxuICAgICAgICBsZXQgY29uZmlnID0gdGhpcy5lbmdpbmVDb25maWdcclxuICAgICAgICBpZiAodHJ1ZSkge1xyXG4gICAgICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKVxyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBcIi9pbWFnZXMvdGVzdC5qcGdcIlxyXG4gICAgICAgICAgICBpbWFnZS5zdHlsZS5wb3NpdGlvbiA9XCJhYnNvbHV0ZVwiXHJcbiAgICAgICAgICAgIGltYWdlLnN0eWxlLnpJbmRleCA9IFwiLTFcIlxyXG4gICAgICAgICAgICBpbWFnZS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXHJcbiAgICAgICAgICAgIGltYWdlLnN0eWxlLmhlaWdodD0gXCIxMDAlXCJcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW1hZ2UpXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICovXHJcbiAgICBzdGFydChkdCkge1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydG5nIEVuZ2luIFwiKTtcclxuICAgICAgICBsZXQgY3VyciA9IHRoaXMuc2NlbmVNYW5hZ2VyLmdldEN1cnJlbnRTY2VuZSgpO1xyXG4gICAgICAgIGZvciAobGV0IHN5cyBvZiB0aGlzLnN5c3RlbXMpIHtcclxuICAgICAgICAgICAgbGV0IGNvbXAgPSB0aGlzLnNjZW5lTWFuYWdlci5nZXRDdXJyZW50U2NlbmUoKS5lbmdpbmVDb21wb25lbnRzLnNldChzeXMudGFnLCBzeXMuY29tcG9uZW50cyk7XHJcbiAgICAgICAgICAgIGN1cnIuZW5naW5lQ29tcG9uZW50cy5zZXQoc3lzLnRhZywgc3lzLmNvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5zeXN0ZW1UYWcuc2V0KHN5cy50YWcsIHN5cyk7XHJcbiAgICAgICAgICAgIGlmIChjb21wKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcImVycm9yIGluIHN0YXJ0IG1ldGhvZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY29uZmlnID0gY3Vyci5nZXRTY2VuZUNvbmZpZygpO1xyXG4gICAgICAgIGxldCBlbnRpdGllcyA9IGNvbmZpZy5lbnRpdGllcy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRpdGllczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN1cnIuYWRkRW50aXR5KGN1cnIsIGNvbmZpZy5lbnRpdGllc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZUNvbmZpZy5lbmdpbmVUeXBlID09IEVuZ2luZVR5cGUuQ0xJRU5UT05MWSB8fCB0aGlzLmVuZ2luZUNvbmZpZy5lbmdpbmVUeXBlID09IEVuZ2luZVR5cGUuU09DS0VUQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKHRpbWVzdGFtcCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlbHRhVGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgRW5naW5lLnRpbWUgKz0gZGVsdGFUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRUaW1lID0gdGltZXN0YW1wO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVXBkYXRlKDAsIGR0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlclRpbWUgPSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGltZW91dCBydW5vdXRcIik7XHJcbiAgICAgICAgICAgIH0sIGR0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICBpZiAoZHQgPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHN5cyBvZiB0aGlzLnN5c3RlbXMpIHtcclxuICAgICAgICAgICAgICAgIHN5cy51cGRhdGUoZHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGR0KTtcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodGltZXN0YW1wKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyclRpbWUgPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGVsdGFUaW1lID0gY3VyclRpbWUgLSB0aGlzLmNsaWVudFRpbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgRW5naW5lLnRpbWUgKz0gZGVsdGFUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRUaW1lID0gY3VyclRpbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgodGltZXN0YW1wKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyclRpbWUgPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGVsdGFUaW1lID0gY3VyclRpbWUgLSB0aGlzLmNsaWVudFRpbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgRW5naW5lLnRpbWUgKz0gZGVsdGFUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRUaW1lID0gY3VyclRpbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlcnZlclVwZGF0ZShkdCwgdGltZW91dCkge1xyXG4gICAgICAgIGlmIChkdCA+IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGluZ1wiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgc3lzIG9mIHRoaXMuc3lzdGVtcykge1xyXG4gICAgICAgICAgICAgICAgc3lzLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJUaW1lID0gcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWxEZWx0YSA9IE51bWJlcihjdXJyVGltZSAtIHRoaXMuc2VydmVyVGltZSkgLyAxMDAwMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVXBkYXRlKE51bWJlcihyZWFsRGVsdGEpLCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICBFbmdpbmUudGltZSArPSBOdW1iZXIocmVhbERlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlclRpbWUgPSBjdXJyVGltZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhFbmdpbmUudGltZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJUaW1lID0gcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWxEZWx0YSA9IChjdXJyVGltZSAtIHRoaXMuc2VydmVyVGltZSkgLyAxMDAwMDAwbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlclVwZGF0ZShOdW1iZXIocmVhbERlbHRhKSwgdGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgRW5naW5lLnRpbWUgKz0gTnVtYmVyKHJlYWxEZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJUaW1lID0gY3VyclRpbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5FbmdpbmUudXBkYXRlVGltZSA9IDA7XHJcbkVuZ2luZS50aW1lID0gMDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW5naW5lLmpzLm1hcCIsIi8qKlxyXG4gKiBEZXNjcmliZXMgdGhlIENTUyBwcm9wZXJ0aWVzIG9mIHRoZSBjYW52YXMgZWxlbWVudFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBoeXNpY3NDb25maWcge1xyXG59XHJcbmV4cG9ydCBjbGFzcyBHcmFwaGljc0NvbmZpZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQgPSBcImVuZ2luZURpdlwiLCBjYW52YXNJRCA9IFwiZW5naW5lQ2FudmFzXCIsIHN0eWxlID0ge30sIGJhY2tncm91bmQsIHdpZHRoID0gMTAwMCwgaGVpZ2h0ID0gNTAwKSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMuY2FudmFzSUQgPSBjYW52YXNJRDtcclxuICAgICAgICB0aGlzLnN0eWxlID0gc3R5bGU7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuICAgIH1cclxufVxyXG5leHBvcnQgY2xhc3MgU2NlbmVDb25maWcge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXRpZXMgPSBbXSkge1xyXG4gICAgICAgIHRoaXMuZW50aXRpZXMgPSBlbnRpdGllcztcclxuICAgIH1cclxufVxyXG5leHBvcnQgY2xhc3MgRXZlbnRDb25maWcge1xyXG4gICAgY29uc3RydWN0b3Ioa2V5Ym9hcmQsIG1vdXNlKSB7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZCA9IGtleWJvYXJkO1xyXG4gICAgICAgIHRoaXMubW91c2UgPSBtb3VzZTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgY2xhc3MgQ29sbGlzaW9uQ29uZmlnIHtcclxufVxyXG5leHBvcnQgY2xhc3MgU2NyaXB0aW5nQ29uZmlnIHtcclxufVxyXG5leHBvcnQgY2xhc3MgU29ja2V0U2VydmVyQ29uZmlnIHtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwIiwiZXhwb3J0IGNsYXNzIFRyYW5zZm9ybSB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbnRpdHksIHBvcyA9IHsgeDogMCwgeTogMCwgejogMCB9LCB2ZWwgPSB7IHg6IDAsIHk6IDAsIHo6IDAgfSwgYWNjZWwgPSB7IHg6IDAsIHk6IDAsIHo6IDAgfSkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVUYWcgPSBcIlBIWVNJQ1NcIjtcclxuICAgICAgICB0aGlzLmVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICB0aGlzLnBvcyA9IHBvcztcclxuICAgICAgICB0aGlzLnZlbCA9IHZlbDtcclxuICAgICAgICB0aGlzLmFjY2VsID0gYWNjZWw7XHJcbiAgICB9XHJcbiAgICBjb3B5KHRyYW5zZm9ybSkge1xyXG4gICAgICAgIHRoaXMucG9zLnggPSB0cmFuc2Zvcm0ucG9zLng7XHJcbiAgICAgICAgdGhpcy5wb3MueSA9IHRyYW5zZm9ybS5wb3MueTtcclxuICAgICAgICB0aGlzLnBvcy56ID0gdHJhbnNmb3JtLnBvcy56O1xyXG4gICAgICAgIHRoaXMudmVsLnggPSB0cmFuc2Zvcm0udmVsLng7XHJcbiAgICAgICAgdGhpcy52ZWwueSA9IHRyYW5zZm9ybS52ZWwueTtcclxuICAgICAgICB0aGlzLnZlbC56ID0gdHJhbnNmb3JtLnZlbC56O1xyXG4gICAgICAgIHRoaXMuYWNjZWwueCA9IHRyYW5zZm9ybS5hY2NlbC54O1xyXG4gICAgICAgIHRoaXMuYWNjZWwueSA9IHRyYW5zZm9ybS5hY2NlbC55O1xyXG4gICAgICAgIHRoaXMuYWNjZWwueiA9IHRyYW5zZm9ybS5hY2NlbC56O1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gdHJhbnNmb3JtLmVudGl0eTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudElkID0gdHJhbnNmb3JtLmNvbXBvbmVudElkO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRyYW5zZm9ybS52aXNpYmxlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cmFuc2Zvcm0uYWxpdmU7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBvc2l0aW9uIGlzOiBcIiArIHRoaXMucG9zLnggKyBcIiBhbmQgXCIgKyB0aGlzLnBvcy55KTtcclxuICAgICAgICB0aGlzLnZlbC54ID0gdGhpcy52ZWwueCArIHRoaXMuYWNjZWwueCAqIGR0O1xyXG4gICAgICAgIHRoaXMudmVsLnkgPSB0aGlzLnZlbC55ICsgdGhpcy5hY2NlbC55ICogZHQ7XHJcbiAgICAgICAgdGhpcy52ZWwueiA9IHRoaXMudmVsLnogKyB0aGlzLmFjY2VsLnogKiBkdDtcclxuICAgICAgICB0aGlzLnBvcy54ID0gdGhpcy5wb3MueCArIHRoaXMudmVsLnggKiBkdDtcclxuICAgICAgICB0aGlzLnBvcy55ID0gdGhpcy5wb3MueSArIHRoaXMudmVsLnkgKiBkdDtcclxuICAgICAgICB0aGlzLnBvcy56ID0gdGhpcy5wb3MueiArIHRoaXMudmVsLnogKiBkdDtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwb3M6IHRoaXMucG9zLFxyXG4gICAgICAgICAgICB2ZWw6IHRoaXMudmVsLFxyXG4gICAgICAgICAgICBhY2NlbDogdGhpcy5hY2NlbCxcclxuICAgICAgICAgICAgZW50aXR5OiB0aGlzLmVudGl0eSxcclxuICAgICAgICAgICAgY29tcG9uZW50SWQ6IHRoaXMuY29tcG9uZW50SWQsXHJcbiAgICAgICAgICAgIHZpc2libGU6IHRoaXMudmlzaWJsZSxcclxuICAgICAgICAgICAgYWxpdmU6IHRoaXMuYWxpdmUsXHJcbiAgICAgICAgICAgIGVuZ2luZVRhZzogXCJQSFlTSUNTXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcmVjdGFuZ2xlQ29weShyZWNlaXZlciwgc2VuZGVyKSB7XHJcbiAgICByZWNlaXZlci5kaW0uaGVpZ2h0ID0gc2VuZGVyLmRpbS5oZWlnaHQ7XHJcbiAgICByZWNlaXZlci5kaW0ubGVuZ3RoID0gc2VuZGVyLmRpbS5sZW5ndGg7XHJcbiAgICByZWNlaXZlci5wb3MueCA9IHNlbmRlci5wb3MueDtcclxuICAgIHJlY2VpdmVyLnBvcy55ID0gc2VuZGVyLnBvcy55O1xyXG4gICAgcmVjZWl2ZXIucG9zLnogPSBzZW5kZXIucG9zLno7XHJcbiAgICByZWNlaXZlci5yb3QgPSBzZW5kZXIucm90O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BYKHJlY3RhbmdsZSkge1xyXG4gICAgcmV0dXJuIHJlY3RhbmdsZS5wb3MueCAtIHJlY3RhbmdsZS5kaW0ubGVuZ3RoIC8gMjtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wWShyZWN0YW5nbGUpIHtcclxuICAgIHJldHVybiByZWN0YW5nbGUucG9zLnkgLSByZWN0YW5nbGUuZGltLmhlaWdodCAvIDI7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcGUuanMubWFwIiwiaW1wb3J0IHsgZ2V0VG9wWCwgZ2V0VG9wWSB9IGZyb20gXCIuLi8uLi90eXBlcy9jb21wb25lbnRzL2NvbGxpc2lvbi9zaGFwZS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eSwgc2hhcGUsIHNyYykge1xyXG4gICAgICAgIHRoaXMuZW5naW5lVGFnID0gXCJHUkFQSElDU1wiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgIHRoaXMuc3JjID0gc3JjO1xyXG4gICAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMuc2hhcGUucG9zO1xyXG4gICAgfVxyXG4gICAgdW5tb3VudCgpIHtcclxuICAgIH1cclxuICAgIGNvcHkoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SWQgPSBlbGVtZW50LmNvbXBvbmVudElkO1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gZWxlbWVudC5lbnRpdHk7XHJcbiAgICAgICAgdGhpcy5zaGFwZS5kaW0uaGVpZ2h0ID0gZWxlbWVudC5zaGFwZS5kaW0uaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc2hhcGUuZGltLmxlbmd0aCA9IGVsZW1lbnQuc2hhcGUuZGltLmxlbmd0aDtcclxuICAgICAgICBpZiAoZWxlbWVudC5zaGFwZS5wb3MueCAhPSBlbGVtZW50LnRyYW5zZm9ybS54KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZWxlbWVudC5zaGFwZS5wb3MueSAhPSBlbGVtZW50LnRyYW5zZm9ybS55KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZWxlbWVudC5zaGFwZS5wb3MueiAhPSBlbGVtZW50LnRyYW5zZm9ybS56KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoYXBlLnBvcy54ID0gZWxlbWVudC5zaGFwZS5wb3MueDtcclxuICAgICAgICB0aGlzLnNoYXBlLnBvcy55ID0gZWxlbWVudC5zaGFwZS5wb3MueTtcclxuICAgICAgICB0aGlzLnNoYXBlLnBvcy56ID0gZWxlbWVudC5zaGFwZS5wb3MuejtcclxuICAgICAgICB0aGlzLnNoYXBlLnJvdCA9IGVsZW1lbnQuc2hhcGUucm90O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGVsZW1lbnQudmlzaWJsZTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS54ID0gZWxlbWVudC50cmFuc2Zvcm0ueDtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS55ID0gZWxlbWVudC50cmFuc2Zvcm0ueTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS56ID0gZWxlbWVudC50cmFuc2Zvcm0uejtcclxuICAgIH1cclxuICAgIHZpc2l0KGVsZW1lbnQpIHtcclxuICAgIH1cclxuICAgIGdldFJlY3RhbmdsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmN0eCkge1xyXG4gICAgICAgICAgICBsZXQgeCA9IGdldFRvcFgodGhpcy5zaGFwZSk7XHJcbiAgICAgICAgICAgIGxldCB5ID0gZ2V0VG9wWSh0aGlzLnNoYXBlKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgeCwgeSwgdGhpcy5zaGFwZS5kaW0ubGVuZ3RoLCB0aGlzLnNoYXBlLmRpbS5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCkge1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSB0aGlzLnNyYztcclxuICAgIH1cclxuICAgIHNldFNyYyhzcmMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNvdXJjZSBjaGFuZ2VkXCIpO1xyXG4gICAgICAgIHRoaXMuc3JjID0gc3JjO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gc3JjO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGVudGl0eTogdGhpcy5lbnRpdHksXHJcbiAgICAgICAgICAgIGNvbXBvbmVudElkOiB0aGlzLmNvbXBvbmVudElkLFxyXG4gICAgICAgICAgICBlbmdpbmVUYWc6IHRoaXMuZW5naW5lVGFnLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMudHJhbnNmb3JtLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnZpc2libGUsXHJcbiAgICAgICAgICAgIGFsaXZlOiB0aGlzLmFsaXZlLFxyXG4gICAgICAgICAgICBzcmM6IHRoaXMuc3JjLFxyXG4gICAgICAgICAgICBzaGFwZTogdGhpcy5zaGFwZSxcclxuICAgICAgICAgICAgcmVuZGVycmVkOiB0aGlzLnJlbmRlcmVkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcHJpdGUuanMubWFwIiwiaW1wb3J0IHsgRW5naW5lVHlwZSB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMvZW5naW5lVHlwZS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgTW91c2VMaXN0ZW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihjbGlja01hcCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lVGFnID0gXCJFVkVOVEhBTkRMRVJcIjtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNsaWNrTWFwKS5tYXAoKFtrLCB2XSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5zZXQoaywgdik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGV2ZW50MSA9IGV2ZW50O1xyXG4gICAgICAgIGxldCBmdW5jID0gdGhpcy5ldmVudHMuZ2V0KGV2ZW50LmV2ZW50TmFtZSk7XHJcbiAgICAgICAgaWYgKGZ1bmMpIHtcclxuICAgICAgICAgICAgZnVuYyhldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0RXZlbnRUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiBcIk1PVVNFXCI7XHJcbiAgICB9XHJcbiAgICBjb3B5KGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5lbnRpdHkgPSBsaXN0ZW5lci5lbnRpdHk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IGxpc3RlbmVyLmNvbXBvbmVudElkO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGxpc3RlbmVyLnZpc2libGU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IGxpc3RlbmVyLmFsaXZlO1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShzeXN0ZW0pIHtcclxuICAgICAgICBzeXN0ZW0ucmVnaXN0ZXJMaXN0ZW5lcih0aGlzKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCwgY3R4KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJJbiBtb3VzZSBMaXN0ZW5lclwiKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbnRpdHk6IHRoaXMuZW50aXR5LFxyXG4gICAgICAgICAgICBlbmdpbmVUYWc6IFwiRVZFTlRIQU5ETEVSXCIsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudElkOiB0aGlzLmNvbXBvbmVudElkLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnZpc2libGUsXHJcbiAgICAgICAgICAgIGFsaXZlOiB0aGlzLmFsaXZlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldEV2ZW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmVudHM7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGNsYXNzIE1vdXNlRW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVUYWcgPSBcIkVWRU5USEFORExFUlwiO1xyXG4gICAgICAgIHRoaXMuZW5naW5lVHlwZSA9IGVuZ2luZTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUoc3lzdGVtKSB7XHJcbiAgICAgICAgc3lzdGVtLnJlZ2lzdGVyRW1pdHRlcih0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5lbmdpbmVUeXBlICE9IEVuZ2luZVR5cGUuU09DS0VUU0VSVkVSKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBpZiAoY2FudmFzKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB4ID0gZXZlbnQueCAvIHJlY3Qud2lkdGggKiBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSBldmVudC55IC8gcmVjdC5oZWlnaHQgKiBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHsgeDogeCwgeTogeSwgejogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwiY2xpY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M6IHsgeDogZXZlbnQueCwgeTogZXZlbnQueSwgejogMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6IFwiZGJsY2xpY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhZGRMaXN0ZW5lcihjb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5hZGQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGVtaXQoZXZlbnQpIHtcclxuICAgICAgICBmb3IgKGxldCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBsaXN0ZW5lci5leGVjdXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRFdmVudFR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTU9VU0VcIjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCwgY3R4KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50c1tpXSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvcHkoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IGNvbXBvbmVudC5hbGl2ZTtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBjb21wb25lbnQuYWxpdmU7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlLFxyXG4gICAgICAgICAgICBhbGl2ZTogdGhpcy5hbGl2ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGlzdGVuZXIuanMubWFwIiwiaW1wb3J0IHsgRW5naW5lVHlwZSB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMvZW5naW5lVHlwZS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgU2NyaXB0T2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVUYWcgPSBcIlNDUklQVElOR1wiO1xyXG4gICAgICAgIHRoaXMuZW5naW5lVHlwZSA9IEVuZ2luZVR5cGUuQ0xJRU5UT05MWTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgY2xhc3MgU2NyaXB0IHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCBlbmdpbmVUeXBlID0gRW5naW5lVHlwZS5DTElFTlRPTkxZKSB7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVUYWcgPSBcIlNDUklQVElOR1wiO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMuZW5naW5lVHlwZSA9IGVuZ2luZVR5cGU7XHJcbiAgICB9XHJcbiAgICBjb3B5KHNjcmlwdCkge1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCwgY3R4KSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayhkdCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW50aXR5OiB0aGlzLmVudGl0eSxcclxuICAgICAgICAgICAgZW5naW5lVGFnOiB0aGlzLmVuZ2luZVRhZyxcclxuICAgICAgICAgICAgY29tcG9uZW5JZDogdGhpcy5jb21wb25lbnRJZCxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuY2FsbGJhY2tcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjcmlwdC5qcy5tYXAiLCJpbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL3NyYy9jb21wb25lbnRzL1BoeXNpY3MvdHJhbnNmb3JtLmpzXCI7XHJcbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvc3JjL2NvbXBvbmVudHMvR3JhcGhpY3MvU3ByaXRlLmpzXCI7XHJcbmltcG9ydCB7IE1vdXNlTGlzdGVuZXIgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL3NyYy9jb21wb25lbnRzL0V2ZW50L0xpc3RlbmVyLmpzXCI7XHJcbmltcG9ydCB7IFNjcmlwdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvc3JjL2NvbXBvbmVudHMvU2NyaXB0L1NjcmlwdC5qc1wiO1xyXG5pbXBvcnQgeyBFbmdpbmVUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29uc3RhbnRzL2VuZ2luZVR5cGUuanNcIjtcclxuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29yZS9lbmdpbmUuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBsYXllciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3MgPSB7IHg6IDIwLCB5OiAyMCwgejogMCB9LCB2ZWwgPSB7IHg6IDAuMSwgeTogMCwgejogMCB9LCBlbmdpbmVUeXBlID0gRW5naW5lVHlwZS5TT0NLRVRTRVJWRVIpIHtcclxuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IFwiUGxheWVyXCI7XHJcbiAgICAgICAgbGV0IGNvbGxpZGVyQ2FsbGJhY2sgPSAoY29sbCkgPT4ge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHNoYXBlID0geyBkaW06IHsgbGVuZ3RoOiA2NCwgaGVpZ2h0OiA2NCB9LCByb3Q6IDAsIHBvczogcG9zIH07XHJcbiAgICAgICAgLy9sZXQgY29sbGlkZXI6IEJveENvbGxpZGVyID0gbmV3IEJveENvbGxpZGVyKC0xLHtsZW5ndGg6NjQsIGhlaWdodDo2NH0sIHBvcyxjb2xsaWRlckNhbGxiYWNrKVxyXG4gICAgICAgIGxldCBzcHJpdGUgPSBuZXcgU3ByaXRlKC0xLCBzaGFwZSwgXCIvaW1hZ2VzL0tuaWdodF9Gb3J3YXJkLnBuZ1wiKTtcclxuICAgICAgICBpZiAoZW5naW5lVHlwZSA9PSBFbmdpbmVUeXBlLlNPQ0tFVENMSUVOVCkge1xyXG4gICAgICAgICAgICBzcHJpdGUucmVuZGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzcHJpdGUuc3JjID0gXCIvaW1hZ2VzL1RlbXBsYXIucG5nXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKC0xLCBwb3MsIHZlbCk7XHJcbiAgICAgICAgbGV0IHNjcmlwdCA9IG5ldyBTY3JpcHQoKGR0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2NyaXB0IHJ1bmluZ1wiKTtcclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybS5wb3MueCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5wb3MueCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0udmVsLnggKj0gLTE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5naW5lVHlwZSA9PSBFbmdpbmVUeXBlLlNPQ0tFVENMSUVOVCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwcml0ZS5zcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2xpZW50IEhpdCAwOiBcIiArIEVuZ2luZS50aW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwcml0ZS5zcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIEhpdCAwOiBcIiArIEVuZ2luZS50aW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtLnBvcy54ICsgc2hhcGUuZGltLmxlbmd0aCA+IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuZ2luZVR5cGUgPT0gRW5naW5lVHlwZS5TT0NLRVRDTElFTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNsaWVudCBIaXQgNTAwOiBcIiArIEVuZ2luZS50aW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIEhpdCA1MDA6IFwiICsgRW5naW5lLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLnBvcy54ID0gNDMwO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLnZlbC54ICo9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0ucG9zLnkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ucG9zLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLnZlbC55ICo9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0ucG9zLnkgKyBzaGFwZS5kaW0uaGVpZ2h0ID4gMzAwKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ucG9zLnkgPSAzMDA7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0udmVsLnkgKj0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBFbmdpbmVUeXBlLkJPVEgpO1xyXG4gICAgICAgIGxldCBsaXN0ZW5lciA9IG5ldyBNb3VzZUxpc3RlbmVyKHsgXCJjbGlja1wiOiAoY2xpY2spID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2xpY2tcIik7XHJcbiAgICAgICAgICAgIH0gfSk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0sXHJcbiAgICAgICAgICAgIHNwcml0ZSxcclxuICAgICAgICAgICAgc2NyaXB0LFxyXG4gICAgICAgICAgICBsaXN0ZW5lclxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGxheWVyLmpzLm1hcCIsImltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gXCIuL21hbmFnZXJzL1NjZW5lTWFuYWdlci5qc1wiO1xyXG5pbXBvcnQgeyBFbmdpbmVUeXBlIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9lbmdpbmVUeXBlLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBTdGFnZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdGFnZU5hbWUsIC4uLmNvbXBvbmVudHMpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcztcclxuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IFwiU1RBR0VcIjtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuZW50aXRpZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVDb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaWQgPSAwO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SWQgPSAwO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IHN0YWdlTmFtZTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBjb21wb25lbnRzO1xyXG4gICAgfVxyXG4gICAgZ2V0U2NlbmVDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW50aXRpZXM6IFt0aGlzXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhZGRFbnRpdHkoc2NlbmUsIGVudGl0eSkge1xyXG4gICAgICAgIGxldCB1bmlxdWVJZCA9IHRoaXMuc2NlbmVNYW5hZ2VyLmdldFVuaXF1ZUlkKCk7XHJcbiAgICAgICAgZW50aXR5LmlkID0gdW5pcXVlSWQ7XHJcbiAgICAgICAgZW50aXR5LnNjZW5lID0gdGhpcztcclxuICAgICAgICB0aGlzLmVudGl0aWVzLnNldCh1bmlxdWVJZCwgZW50aXR5KTtcclxuICAgICAgICBmb3IgKGxldCBjb21wIG9mIGVudGl0eS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIGxldCBjb21wTGlzdCA9IHRoaXMuZW5naW5lQ29tcG9uZW50cy5nZXQoY29tcC5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICBjb21wLmVudGl0eSA9IGVudGl0eS5pZDtcclxuICAgICAgICAgICAgaWYgKGNvbXBMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3lzdGVtID0gdGhpcy5zY2VuZU1hbmFnZXIuc3lzdGVtVGFnLmdldChjb21wLmVuZ2luZVRhZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3lzdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtLnJlZ2lzdGVyKGNvbXAsIHRoaXMuZ2V0VW5pcXVlQ29tcG9uZW50SWQoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb21wLmVuZ2luZVRhZyArIFwiZG9lcyBub3QgZXhpc3RcIik7XHJcbiAgICAgICAgICAgICAgICBjb21wLmNvbXBvbmVudElkID0gdGhpcy5zY2VuZU1hbmFnZXIuZ2V0VW5pcXVlQ29tcG9uZW50SWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NmdWxseSBhZGRlZCBlbnRpdHlcIik7XHJcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgIH1cclxuICAgIHJlbW92ZUVudGl0eShpZCkge1xyXG4gICAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChpZCk7XHJcbiAgICAgICAgaWYgKGVudGl0eSkge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0aWVzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGMgb2YgZW50aXR5LmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcG9uZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN5c3RlbVwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGMuc3lzdGVtKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcG9uZW50IGlkIFwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGMuY29tcG9uZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgYy5zeXN0ZW0udW5yZWdpc3RlcihjLmNvbXBvbmVudElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZW50aXR5O1xyXG4gICAgfVxyXG4gICAgYWRkU2VydmVyRW50aXR5KHNjZW5lLCBlbnRpdHkpIHtcclxuICAgICAgICBpZiAoZW50aXR5LmlkID09IG51bGwgfHwgZW50aXR5LmlkID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbnRpdHkgaWQgaXMgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbnRpdHkuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICBzY2VuZS5lbnRpdGllcy5zZXQoZW50aXR5LmlkLCBlbnRpdHkpO1xyXG4gICAgICAgIGlmIChzY2VuZS5uZXdFbnRpdHlRdWV1ZSkge1xyXG4gICAgICAgICAgICBsZXQgaXNJblF1ZXVlID0gc2NlbmUubmV3RW50aXR5UXVldWUuaGFzKGVudGl0eS5pZCk7XHJcbiAgICAgICAgICAgIGlmICghaXNJblF1ZXVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb21wIG9mIGVudGl0eS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbXBMaXN0ID0gc2NlbmUuZW5naW5lQ29tcG9uZW50cy5nZXQoY29tcC5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3lzdGVtID0gc2NlbmUuc2NlbmVNYW5hZ2VyLnN5c3RlbVRhZy5nZXQoY29tcC5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3lzdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW0ucmVnaXN0ZXIoY29tcCwgdGhpcy5nZXRVbmlxdWVDb21wb25lbnRJZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29tcC5lbmdpbmVUYWcgKyBcIiB0YWdnZWQgU3lzdGVtIGlzIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NmdWxseSBhZGRlZCBlbnRpdHlzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wIG9mIGVudGl0eS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29tcExpc3QgPSBzY2VuZS5lbmdpbmVDb21wb25lbnRzLmdldChjb21wLmVuZ2luZVRhZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3lzdGVtID0gc2NlbmUuc2NlbmVNYW5hZ2VyLnN5c3RlbVRhZy5nZXQoY29tcC5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtLnJlZ2lzdGVyKGNvbXAsIHRoaXMuZ2V0VW5pcXVlQ29tcG9uZW50SWQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29tcC5lbmdpbmVUYWcgKyBcIiB0YWdnZWQgU3lzdGVtIGlzIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NmdWxseSBhZGRlZCBlbnRpdHlzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFVuaXF1ZUlkKCkge1xyXG4gICAgICAgIGlmIChTY2VuZU1hbmFnZXIuRW5naW5lVHlwZSA9PSBFbmdpbmVUeXBlLlNPQ0tFVENMSUVOVCkge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSB0aGlzLmlkIC0gMTtcclxuICAgICAgICAgICAgdGhpcy5pZC0tO1xyXG4gICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSB0aGlzLmlkICsgMTtcclxuICAgICAgICAgICAgdGhpcy5pZCsrO1xyXG4gICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0VW5pcXVlQ29tcG9uZW50SWQoKSB7XHJcbiAgICAgICAgaWYgKFNjZW5lTWFuYWdlci5FbmdpbmVUeXBlID09IEVuZ2luZVR5cGUuU09DS0VUQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgIGxldCBpZCA9IHRoaXMuY29tcG9uZW50SWQgLSAxO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudElkLS07XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBpZCA9IHRoaXMuY29tcG9uZW50SWQgKyAxO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudElkKys7XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NlbmUuanMubWFwIiwiaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9HcmFwaGljcy9TcHJpdGUuanNcIjtcclxuaW1wb3J0IHsgVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9QaHlzaWNzL3RyYW5zZm9ybS5qc1wiO1xyXG5leHBvcnQgY2xhc3MgVGVtcGxhciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3MpIHtcclxuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IFwiVGVtcGxhclwiO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgtMSwgeyB4OiBNYXRoLnJhbmRvbSgpICogMjAsIHk6IE1hdGgucmFuZG9tKCkgKiAzMCwgejogMjAgfSwgeyB4OiAxMCwgeTogMTAsIHo6IDAgfSk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUgPSBuZXcgU3ByaXRlKC0xLCB7IHBvczogdGhpcy50cmFuc2Zvcm0ucG9zLCBkaW06IHsgbGVuZ3RoOiA2NCwgaGVpZ2h0OiA2NCB9LCByb3Q6IDAgfSwgXCIvaW1hZ2VzL1RlbXBsYXIucG5nXCIpO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChwb3MpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0ucG9zLnggPSBwb3MueDtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0ucG9zLnkgPSBwb3MueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGVtcGxhci5qcy5tYXAiLCJleHBvcnQgY2xhc3MgQ2FtZXJhIHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eSA9IC0xLCB3aWR0aCA9IC0xLCBoZWlnaHQgPSAtMSwgY3VyciA9IHsgeDogMCwgeTogMCwgejogLTEgfSwgc2NhbGUgPSB7IHg6IDEsIHk6IDEgfSkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVUYWcgPSBcIkdSQVBISUNTXCI7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMucG9zID0gY3VycjtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHsgeDogMCwgeTogMCwgejogMCB9O1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcclxuICAgIH1cclxuICAgIHVubW91bnQoKSB7XHJcbiAgICB9XHJcbiAgICBnZXRSZWN0YW5nbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcG9zOiB0aGlzLnBvcyxcclxuICAgICAgICAgICAgZGltOiB7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByb3Q6IDBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgY29weShjYW1lcmEpIHtcclxuICAgICAgICB0aGlzLmVudGl0eSA9IGNhbWVyYS5lbnRpdHk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IGNhbWVyYS5jb21wb25lbnRJZDtcclxuICAgICAgICB0aGlzLndpZHRoID0gY2FtZXJhLndpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gY2FtZXJhLmhlaWdodDtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBjYW1lcmEudmlzaWJsZTtcclxuICAgICAgICB0aGlzLmFsaXZlID0gY2FtZXJhLmFsaXZlO1xyXG4gICAgICAgIHRoaXMuc2NhbGUueCA9IGNhbWVyYS5zY2FsZS54O1xyXG4gICAgICAgIHRoaXMuc2NhbGUueSA9IGNhbWVyYS5zY2FsZS55O1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSBjYW1lcmEucmVuZGVyZWQ7XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlaWdodCA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmhlaWdodCAqIC0xICogdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLndpZHRoIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy53aWR0aCAqIC0xICogdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlKGR0KSB7XHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQuY3R4O1xyXG4gICAgICAgIHRoaXMucG9zLnggKz0gdGhpcy50cmFuc2Zvcm0ueDtcclxuICAgICAgICB0aGlzLnBvcy55ICs9IHRoaXMudHJhbnNmb3JtLnk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoYXJyYXkpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY3R4LnRyYW5zbGF0ZSh0aGlzLnRyYW5zZm9ybS54LCB0aGlzLnRyYW5zZm9ybS55KTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY3R4LmNsZWFyUmVjdCgtMSAqIHRoaXMucG9zLngsIC0xICogdGhpcy5wb3MueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIGxldCBpdGVtcyA9IGFycmF5O1xyXG4gICAgICAgIGZvciAobGV0IGkgb2YgaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKGkgIT0gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgaS5yZW5kZXIoYXJyYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FtZXJhIGlzIHJlbmRlcmVkIFwiICsgaXRlbXMubGVuZ3RoICsgXCJlbGVtZW50c1wiKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS54ID0gMDtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS55ID0gMDtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY3R4LnNhdmUoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbnRpdHk6IHRoaXMuZW50aXR5LFxyXG4gICAgICAgICAgICBjb21wb25lbnRJZDogdGhpcy5jb21wb25lbnRJZCxcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgIHZpc2libGU6IHRoaXMudmlzaWJsZSxcclxuICAgICAgICAgICAgYWxpdmU6IHRoaXMuYWxpdmUsXHJcbiAgICAgICAgICAgIHNjYWxlOiB0aGlzLnNjYWxlLFxyXG4gICAgICAgICAgICByZW5kZXJlZDogdGhpcy5yZW5kZXJlZCxcclxuICAgICAgICAgICAgcG9zOiB0aGlzLnBvc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FtZXJhLmpzLm1hcCIsImltcG9ydCB7IEVuZ2luZVR5cGUgfSBmcm9tIFwiLi4vLi4vY29uc3RhbnRzL2VuZ2luZVR5cGUuanNcIjtcclxuZXhwb3J0IGNsYXNzIEtleWJvYXJkTGlzdGVuZXIge1xyXG4gICAgY29uc3RydWN0b3IoY2xpY2tNYXApIHtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZW5naW5lVGFnID0gXCJFVkVOVEhBTkRMRVJcIjtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBPYmplY3QuZW50cmllcyhjbGlja01hcCkubWFwKChbaywgdl0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuc2V0KGssIHYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0RXZlbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50cztcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoZXZlbnQpIHtcclxuICAgICAgICBsZXQgZXZlbnQxID0gZXZlbnQ7XHJcbiAgICAgICAgbGV0IGZ1bmMgPSB0aGlzLmV2ZW50cy5nZXQoZXZlbnQuZXZlbnROYW1lKTtcclxuICAgICAgICBpZiAoZnVuYykge1xyXG4gICAgICAgICAgICBmdW5jKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRFdmVudFR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiS0VZQk9BUkRcIjtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUoc3lzdGVtKSB7XHJcbiAgICAgICAgc3lzdGVtLnJlZ2lzdGVyTGlzdGVuZXIodGhpcyk7XHJcbiAgICB9XHJcbiAgICBjb3B5KGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5lbnRpdHkgPSBsaXN0ZW5lci5lbnRpdHk7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IGxpc3RlbmVyLmFsaXZlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGxpc3RlbmVyLnZpc2libGU7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IGxpc3RlbmVyLmNvbXBvbmVudElkO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGR0LCBjdHgpIHtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbnRpdHk6IHRoaXMuZW50aXR5LFxyXG4gICAgICAgICAgICBhbGl2ZTogdGhpcy5hbGl2ZSxcclxuICAgICAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlLFxyXG4gICAgICAgICAgICBjb21wb25lbnRJZDogdGhpcy5jb21wb25lbnRJZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGNsYXNzIEtleUJvYXJkRW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbmdpbmVUYWcgPSBcIkVWRU5USEFORExFUlwiO1xyXG4gICAgICAgIHRoaXMuZW5naW5lVHlwZSA9IGVuZ2luZTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUoc3lzdGVtKSB7XHJcbiAgICAgICAgc3lzdGVtLnJlZ2lzdGVyRW1pdHRlcih0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5lbmdpbmVUeXBlICE9IEVuZ2luZVR5cGUuU09DS0VUU0VSVkVSKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogXCJrZXlkb3duXCIsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBldmVudC5rZXlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhZGRMaXN0ZW5lcihjb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5hZGQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGVtaXQoZXZlbnQpIHtcclxuICAgICAgICBmb3IgKGxldCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBsaXN0ZW5lci5leGVjdXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRFdmVudFR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiS0VZQk9BUkRcIjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCwgY3R4KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmV2ZW50c1tpXSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnBvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvcHkoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5hbGl2ZSA9IGNvbXBvbmVudC5hbGl2ZTtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBjb21wb25lbnQuYWxpdmU7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlLFxyXG4gICAgICAgICAgICBhbGl2ZTogdGhpcy5hbGl2ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmQuanMubWFwIiwiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9HcmFwaGljcy9DYW1lcmEuanNcIjtcclxuaW1wb3J0IHsgS2V5Ym9hcmRMaXN0ZW5lciB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvc3JjL2NvbXBvbmVudHMvRXZlbnQvS2V5Ym9hcmQuanNcIjtcclxuZXhwb3J0IGNsYXNzIE1haW5DYW1lcmEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKC0xLCAxMDAwLCA1MDApO1xyXG4gICAgICAgIHRoaXMuY2xhc3NOYW1lID0gXCJNYWluQ2FtZXJhXCI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW3RoaXMuY2FtZXJhLCBuZXcgS2V5Ym9hcmRMaXN0ZW5lcih7XHJcbiAgICAgICAgICAgICAgICBcImtleWRvd25cIjogKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PSBcIndcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ueSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlcgaXMgcHJlc3NlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09IFwiYVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnRyYW5zZm9ybS54IC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PSBcImRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ueCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT0gXCJzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLnkgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYWluQ2FtZXJhLmpzLm1hcCIsImNvbnN0IFBBQ0tFVF9UWVBFUyA9IE9iamVjdC5jcmVhdGUobnVsbCk7IC8vIG5vIE1hcCA9IG5vIHBvbHlmaWxsXG5QQUNLRVRfVFlQRVNbXCJvcGVuXCJdID0gXCIwXCI7XG5QQUNLRVRfVFlQRVNbXCJjbG9zZVwiXSA9IFwiMVwiO1xuUEFDS0VUX1RZUEVTW1wicGluZ1wiXSA9IFwiMlwiO1xuUEFDS0VUX1RZUEVTW1wicG9uZ1wiXSA9IFwiM1wiO1xuUEFDS0VUX1RZUEVTW1wibWVzc2FnZVwiXSA9IFwiNFwiO1xuUEFDS0VUX1RZUEVTW1widXBncmFkZVwiXSA9IFwiNVwiO1xuUEFDS0VUX1RZUEVTW1wibm9vcFwiXSA9IFwiNlwiO1xuY29uc3QgUEFDS0VUX1RZUEVTX1JFVkVSU0UgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuT2JqZWN0LmtleXMoUEFDS0VUX1RZUEVTKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgUEFDS0VUX1RZUEVTX1JFVkVSU0VbUEFDS0VUX1RZUEVTW2tleV1dID0ga2V5O1xufSk7XG5jb25zdCBFUlJPUl9QQUNLRVQgPSB7IHR5cGU6IFwiZXJyb3JcIiwgZGF0YTogXCJwYXJzZXIgZXJyb3JcIiB9O1xuZXhwb3J0IHsgUEFDS0VUX1RZUEVTLCBQQUNLRVRfVFlQRVNfUkVWRVJTRSwgRVJST1JfUEFDS0VUIH07XG4iLCJpbXBvcnQgeyBQQUNLRVRfVFlQRVMgfSBmcm9tIFwiLi9jb21tb25zLmpzXCI7XG5jb25zdCB3aXRoTmF0aXZlQmxvYiA9IHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAodHlwZW9mIEJsb2IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKEJsb2IpID09PSBcIltvYmplY3QgQmxvYkNvbnN0cnVjdG9yXVwiKTtcbmNvbnN0IHdpdGhOYXRpdmVBcnJheUJ1ZmZlciA9IHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gXCJmdW5jdGlvblwiO1xuLy8gQXJyYXlCdWZmZXIuaXNWaWV3IG1ldGhvZCBpcyBub3QgZGVmaW5lZCBpbiBJRTEwXG5jb25zdCBpc1ZpZXcgPSBvYmogPT4ge1xuICAgIHJldHVybiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyBBcnJheUJ1ZmZlci5pc1ZpZXcob2JqKVxuICAgICAgICA6IG9iaiAmJiBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG59O1xuY29uc3QgZW5jb2RlUGFja2V0ID0gKHsgdHlwZSwgZGF0YSB9LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spID0+IHtcbiAgICBpZiAod2l0aE5hdGl2ZUJsb2IgJiYgZGF0YSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgaWYgKHN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlQmxvYkFzQmFzZTY0KGRhdGEsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh3aXRoTmF0aXZlQXJyYXlCdWZmZXIgJiZcbiAgICAgICAgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBpc1ZpZXcoZGF0YSkpKSB7XG4gICAgICAgIGlmIChzdXBwb3J0c0JpbmFyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVuY29kZUJsb2JBc0Jhc2U2NChuZXcgQmxvYihbZGF0YV0pLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcGxhaW4gc3RyaW5nXG4gICAgcmV0dXJuIGNhbGxiYWNrKFBBQ0tFVF9UWVBFU1t0eXBlXSArIChkYXRhIHx8IFwiXCIpKTtcbn07XG5jb25zdCBlbmNvZGVCbG9iQXNCYXNlNjQgPSAoZGF0YSwgY2FsbGJhY2spID0+IHtcbiAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZpbGVSZWFkZXIucmVzdWx0LnNwbGl0KFwiLFwiKVsxXTtcbiAgICAgICAgY2FsbGJhY2soXCJiXCIgKyAoY29udGVudCB8fCBcIlwiKSk7XG4gICAgfTtcbiAgICByZXR1cm4gZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGRhdGEpO1xufTtcbmZ1bmN0aW9uIHRvQXJyYXkoZGF0YSkge1xuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgIH1cbn1cbmxldCBURVhUX0VOQ09ERVI7XG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlUGFja2V0VG9CaW5hcnkocGFja2V0LCBjYWxsYmFjaykge1xuICAgIGlmICh3aXRoTmF0aXZlQmxvYiAmJiBwYWNrZXQuZGF0YSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgcmV0dXJuIHBhY2tldC5kYXRhXG4gICAgICAgICAgICAuYXJyYXlCdWZmZXIoKVxuICAgICAgICAgICAgLnRoZW4odG9BcnJheSlcbiAgICAgICAgICAgIC50aGVuKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSBpZiAod2l0aE5hdGl2ZUFycmF5QnVmZmVyICYmXG4gICAgICAgIChwYWNrZXQuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGlzVmlldyhwYWNrZXQuZGF0YSkpKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayh0b0FycmF5KHBhY2tldC5kYXRhKSk7XG4gICAgfVxuICAgIGVuY29kZVBhY2tldChwYWNrZXQsIGZhbHNlLCBlbmNvZGVkID0+IHtcbiAgICAgICAgaWYgKCFURVhUX0VOQ09ERVIpIHtcbiAgICAgICAgICAgIFRFWFRfRU5DT0RFUiA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKFRFWFRfRU5DT0RFUi5lbmNvZGUoZW5jb2RlZCkpO1xuICAgIH0pO1xufVxuZXhwb3J0IHsgZW5jb2RlUGFja2V0IH07XG4iLCIvLyBpbXBvcnRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9zb2NrZXRpby9iYXNlNjQtYXJyYXlidWZmZXJcbmNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuLy8gVXNlIGEgbG9va3VwIHRhYmxlIHRvIGZpbmQgdGhlIGluZGV4LlxuY29uc3QgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpO1xuZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7XG59XG5leHBvcnQgY29uc3QgZW5jb2RlID0gKGFycmF5YnVmZmVyKSA9PiB7XG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykge1xuICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07XG4gICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTtcbiAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07XG4gICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107XG4gICAgfVxuICAgIGlmIChsZW4gJSAzID09PSAyKSB7XG4gICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nO1xuICAgIH1cbiAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7XG4gICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JztcbiAgICB9XG4gICAgcmV0dXJuIGJhc2U2NDtcbn07XG5leHBvcnQgY29uc3QgZGVjb2RlID0gKGJhc2U2NCkgPT4ge1xuICAgIGxldCBidWZmZXJMZW5ndGggPSBiYXNlNjQubGVuZ3RoICogMC43NSwgbGVuID0gYmFzZTY0Lmxlbmd0aCwgaSwgcCA9IDAsIGVuY29kZWQxLCBlbmNvZGVkMiwgZW5jb2RlZDMsIGVuY29kZWQ0O1xuICAgIGlmIChiYXNlNjRbYmFzZTY0Lmxlbmd0aCAtIDFdID09PSAnPScpIHtcbiAgICAgICAgYnVmZmVyTGVuZ3RoLS07XG4gICAgICAgIGlmIChiYXNlNjRbYmFzZTY0Lmxlbmd0aCAtIDJdID09PSAnPScpIHtcbiAgICAgICAgICAgIGJ1ZmZlckxlbmd0aC0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFycmF5YnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbmd0aCksIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICBlbmNvZGVkMSA9IGxvb2t1cFtiYXNlNjQuY2hhckNvZGVBdChpKV07XG4gICAgICAgIGVuY29kZWQyID0gbG9va3VwW2Jhc2U2NC5jaGFyQ29kZUF0KGkgKyAxKV07XG4gICAgICAgIGVuY29kZWQzID0gbG9va3VwW2Jhc2U2NC5jaGFyQ29kZUF0KGkgKyAyKV07XG4gICAgICAgIGVuY29kZWQ0ID0gbG9va3VwW2Jhc2U2NC5jaGFyQ29kZUF0KGkgKyAzKV07XG4gICAgICAgIGJ5dGVzW3ArK10gPSAoZW5jb2RlZDEgPDwgMikgfCAoZW5jb2RlZDIgPj4gNCk7XG4gICAgICAgIGJ5dGVzW3ArK10gPSAoKGVuY29kZWQyICYgMTUpIDw8IDQpIHwgKGVuY29kZWQzID4+IDIpO1xuICAgICAgICBieXRlc1twKytdID0gKChlbmNvZGVkMyAmIDMpIDw8IDYpIHwgKGVuY29kZWQ0ICYgNjMpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlidWZmZXI7XG59O1xuIiwiaW1wb3J0IHsgRVJST1JfUEFDS0VULCBQQUNLRVRfVFlQRVNfUkVWRVJTRSB9IGZyb20gXCIuL2NvbW1vbnMuanNcIjtcbmltcG9ydCB7IGRlY29kZSB9IGZyb20gXCIuL2NvbnRyaWIvYmFzZTY0LWFycmF5YnVmZmVyLmpzXCI7XG5jb25zdCB3aXRoTmF0aXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgPT09IFwiZnVuY3Rpb25cIjtcbmV4cG9ydCBjb25zdCBkZWNvZGVQYWNrZXQgPSAoZW5jb2RlZFBhY2tldCwgYmluYXJ5VHlwZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZW5jb2RlZFBhY2tldCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICBkYXRhOiBtYXBCaW5hcnkoZW5jb2RlZFBhY2tldCwgYmluYXJ5VHlwZSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IGVuY29kZWRQYWNrZXQuY2hhckF0KDApO1xuICAgIGlmICh0eXBlID09PSBcImJcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICBkYXRhOiBkZWNvZGVCYXNlNjRQYWNrZXQoZW5jb2RlZFBhY2tldC5zdWJzdHJpbmcoMSksIGJpbmFyeVR5cGUpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHBhY2tldFR5cGUgPSBQQUNLRVRfVFlQRVNfUkVWRVJTRVt0eXBlXTtcbiAgICBpZiAoIXBhY2tldFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIEVSUk9SX1BBQ0tFVDtcbiAgICB9XG4gICAgcmV0dXJuIGVuY29kZWRQYWNrZXQubGVuZ3RoID4gMVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6IFBBQ0tFVF9UWVBFU19SRVZFUlNFW3R5cGVdLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlZFBhY2tldC5zdWJzdHJpbmcoMSlcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHR5cGU6IFBBQ0tFVF9UWVBFU19SRVZFUlNFW3R5cGVdXG4gICAgICAgIH07XG59O1xuY29uc3QgZGVjb2RlQmFzZTY0UGFja2V0ID0gKGRhdGEsIGJpbmFyeVR5cGUpID0+IHtcbiAgICBpZiAod2l0aE5hdGl2ZUFycmF5QnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUoZGF0YSk7XG4gICAgICAgIHJldHVybiBtYXBCaW5hcnkoZGVjb2RlZCwgYmluYXJ5VHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyBiYXNlNjQ6IHRydWUsIGRhdGEgfTsgLy8gZmFsbGJhY2sgZm9yIG9sZCBicm93c2Vyc1xuICAgIH1cbn07XG5jb25zdCBtYXBCaW5hcnkgPSAoZGF0YSwgYmluYXJ5VHlwZSkgPT4ge1xuICAgIHN3aXRjaCAoYmluYXJ5VHlwZSkge1xuICAgICAgICBjYXNlIFwiYmxvYlwiOlxuICAgICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgICAgICAgICAgLy8gZnJvbSBXZWJTb2NrZXQgKyBiaW5hcnlUeXBlIFwiYmxvYlwiXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmcm9tIEhUVFAgbG9uZy1wb2xsaW5nIG9yIFdlYlRyYW5zcG9ydFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihbZGF0YV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICBjYXNlIFwiYXJyYXlidWZmZXJcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBmcm9tIEhUVFAgbG9uZy1wb2xsaW5nIChiYXNlNjQpIG9yIFdlYlNvY2tldCArIGJpbmFyeVR5cGUgXCJhcnJheWJ1ZmZlclwiXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmcm9tIFdlYlRyYW5zcG9ydCAoVWludDhBcnJheSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgICAgICAgICB9XG4gICAgfVxufTtcbiIsImltcG9ydCB7IGVuY29kZVBhY2tldCwgZW5jb2RlUGFja2V0VG9CaW5hcnkgfSBmcm9tIFwiLi9lbmNvZGVQYWNrZXQuanNcIjtcbmltcG9ydCB7IGRlY29kZVBhY2tldCB9IGZyb20gXCIuL2RlY29kZVBhY2tldC5qc1wiO1xuY29uc3QgU0VQQVJBVE9SID0gU3RyaW5nLmZyb21DaGFyQ29kZSgzMCk7IC8vIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWxpbWl0ZXIjQVNDSUlfZGVsaW1pdGVkX3RleHRcbmNvbnN0IGVuY29kZVBheWxvYWQgPSAocGFja2V0cywgY2FsbGJhY2spID0+IHtcbiAgICAvLyBzb21lIHBhY2tldHMgbWF5IGJlIGFkZGVkIHRvIHRoZSBhcnJheSB3aGlsZSBlbmNvZGluZywgc28gdGhlIGluaXRpYWwgbGVuZ3RoIG11c3QgYmUgc2F2ZWRcbiAgICBjb25zdCBsZW5ndGggPSBwYWNrZXRzLmxlbmd0aDtcbiAgICBjb25zdCBlbmNvZGVkUGFja2V0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgcGFja2V0cy5mb3JFYWNoKChwYWNrZXQsIGkpID0+IHtcbiAgICAgICAgLy8gZm9yY2UgYmFzZTY0IGVuY29kaW5nIGZvciBiaW5hcnkgcGFja2V0c1xuICAgICAgICBlbmNvZGVQYWNrZXQocGFja2V0LCBmYWxzZSwgZW5jb2RlZFBhY2tldCA9PiB7XG4gICAgICAgICAgICBlbmNvZGVkUGFja2V0c1tpXSA9IGVuY29kZWRQYWNrZXQ7XG4gICAgICAgICAgICBpZiAoKytjb3VudCA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZW5jb2RlZFBhY2tldHMuam9pbihTRVBBUkFUT1IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuY29uc3QgZGVjb2RlUGF5bG9hZCA9IChlbmNvZGVkUGF5bG9hZCwgYmluYXJ5VHlwZSkgPT4ge1xuICAgIGNvbnN0IGVuY29kZWRQYWNrZXRzID0gZW5jb2RlZFBheWxvYWQuc3BsaXQoU0VQQVJBVE9SKTtcbiAgICBjb25zdCBwYWNrZXRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkUGFja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBkZWNvZGVkUGFja2V0ID0gZGVjb2RlUGFja2V0KGVuY29kZWRQYWNrZXRzW2ldLCBiaW5hcnlUeXBlKTtcbiAgICAgICAgcGFja2V0cy5wdXNoKGRlY29kZWRQYWNrZXQpO1xuICAgICAgICBpZiAoZGVjb2RlZFBhY2tldC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYWNrZXRzO1xufTtcbmxldCBURVhUX0RFQ09ERVI7XG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlUGFja2V0RnJvbUJpbmFyeShkYXRhLCBpc0JpbmFyeSwgYmluYXJ5VHlwZSkge1xuICAgIGlmICghVEVYVF9ERUNPREVSKSB7XG4gICAgICAgIC8vIGxhemlseSBjcmVhdGVkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggb2xkIGJyb3dzZXIgcGxhdGZvcm1zXG4gICAgICAgIFRFWFRfREVDT0RFUiA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgIH1cbiAgICAvLyA0OCA9PT0gXCIwXCIuY2hhckNvZGVBdCgwKSAoT1BFTiBwYWNrZXQgdHlwZSlcbiAgICAvLyA1NCA9PT0gXCI2XCIuY2hhckNvZGVBdCgwKSAoTk9PUCBwYWNrZXQgdHlwZSlcbiAgICBjb25zdCBpc1BsYWluQmluYXJ5ID0gaXNCaW5hcnkgfHwgZGF0YVswXSA8IDQ4IHx8IGRhdGFbMF0gPiA1NDtcbiAgICByZXR1cm4gZGVjb2RlUGFja2V0KGlzUGxhaW5CaW5hcnkgPyBkYXRhIDogVEVYVF9ERUNPREVSLmRlY29kZShkYXRhKSwgYmluYXJ5VHlwZSk7XG59XG5leHBvcnQgY29uc3QgcHJvdG9jb2wgPSA0O1xuZXhwb3J0IHsgZW5jb2RlUGFja2V0LCBlbmNvZGVQYWNrZXRUb0JpbmFyeSwgZW5jb2RlUGF5bG9hZCwgZGVjb2RlUGFja2V0LCBkZWNvZGVQYXlsb2FkIH07XG4iLCIvKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYEVtaXR0ZXJgLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xufVxuXG4vKipcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbWl4aW4ob2JqKSB7XG4gIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUub24gPVxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgKHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdKVxuICAgIC5wdXNoKGZuKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcbiAgZnVuY3Rpb24gb24oKSB7XG4gICAgdGhpcy5vZmYoZXZlbnQsIG9uKTtcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgb24uZm4gPSBmbjtcbiAgdGhpcy5vbihldmVudCwgb24pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblxuICAvLyBhbGxcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG4gIGlmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztcblxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXG4gIGlmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXG4gIHZhciBjYjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcbiAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlbW92ZSBldmVudCBzcGVjaWZpYyBhcnJheXMgZm9yIGV2ZW50IHR5cGVzIHRoYXQgbm9cbiAgLy8gb25lIGlzIHN1YnNjcmliZWQgZm9yIHRvIGF2b2lkIG1lbW9yeSBsZWFrLlxuICBpZiAoY2FsbGJhY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEVtaXQgYGV2ZW50YCB3aXRoIHRoZSBnaXZlbiBhcmdzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtNaXhlZH0gLi4uXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblxuICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSlcbiAgICAsIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIGlmIChjYWxsYmFja3MpIHtcbiAgICBjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gYWxpYXMgdXNlZCBmb3IgcmVzZXJ2ZWQgZXZlbnRzIChwcm90ZWN0ZWQgbWV0aG9kKVxuRW1pdHRlci5wcm90b3R5cGUuZW1pdFJlc2VydmVkID0gRW1pdHRlci5wcm90b3R5cGUuZW1pdDtcblxuLyoqXG4gKiBSZXR1cm4gYXJyYXkgb2YgY2FsbGJhY2tzIGZvciBgZXZlbnRgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuICByZXR1cm4gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe1xuICByZXR1cm4gISEgdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcbn07XG4iLCJleHBvcnQgY29uc3QgZ2xvYmFsVGhpc1NoaW0gPSAoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbiAgICB9XG59KSgpO1xuIiwiaW1wb3J0IHsgZ2xvYmFsVGhpc1NoaW0gYXMgZ2xvYmFsVGhpcyB9IGZyb20gXCIuL2dsb2JhbFRoaXMuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwaWNrKG9iaiwgLi4uYXR0cikge1xuICAgIHJldHVybiBhdHRyLnJlZHVjZSgoYWNjLCBrKSA9PiB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgIGFjY1trXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbi8vIEtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIHJlYWwgdGltZW91dCBmdW5jdGlvbnMgc28gdGhleSBjYW4gYmUgdXNlZCB3aGVuIG92ZXJyaWRkZW5cbmNvbnN0IE5BVElWRV9TRVRfVElNRU9VVCA9IGdsb2JhbFRoaXMuc2V0VGltZW91dDtcbmNvbnN0IE5BVElWRV9DTEVBUl9USU1FT1VUID0gZ2xvYmFsVGhpcy5jbGVhclRpbWVvdXQ7XG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFRpbWVyRnVuY3Rpb25zKG9iaiwgb3B0cykge1xuICAgIGlmIChvcHRzLnVzZU5hdGl2ZVRpbWVycykge1xuICAgICAgICBvYmouc2V0VGltZW91dEZuID0gTkFUSVZFX1NFVF9USU1FT1VULmJpbmQoZ2xvYmFsVGhpcyk7XG4gICAgICAgIG9iai5jbGVhclRpbWVvdXRGbiA9IE5BVElWRV9DTEVBUl9USU1FT1VULmJpbmQoZ2xvYmFsVGhpcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvYmouc2V0VGltZW91dEZuID0gZ2xvYmFsVGhpcy5zZXRUaW1lb3V0LmJpbmQoZ2xvYmFsVGhpcyk7XG4gICAgICAgIG9iai5jbGVhclRpbWVvdXRGbiA9IGdsb2JhbFRoaXMuY2xlYXJUaW1lb3V0LmJpbmQoZ2xvYmFsVGhpcyk7XG4gICAgfVxufVxuLy8gYmFzZTY0IGVuY29kZWQgYnVmZmVycyBhcmUgYWJvdXQgMzMlIGJpZ2dlciAoaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0KVxuY29uc3QgQkFTRTY0X09WRVJIRUFEID0gMS4zMztcbi8vIHdlIGNvdWxkIGFsc28gaGF2ZSB1c2VkIGBuZXcgQmxvYihbb2JqXSkuc2l6ZWAsIGJ1dCBpdCBpc24ndCBzdXBwb3J0ZWQgaW4gSUU5XG5leHBvcnQgZnVuY3Rpb24gYnl0ZUxlbmd0aChvYmopIHtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdXRmOExlbmd0aChvYmopO1xuICAgIH1cbiAgICAvLyBhcnJheWJ1ZmZlciBvciBibG9iXG4gICAgcmV0dXJuIE1hdGguY2VpbCgob2JqLmJ5dGVMZW5ndGggfHwgb2JqLnNpemUpICogQkFTRTY0X09WRVJIRUFEKTtcbn1cbmZ1bmN0aW9uIHV0ZjhMZW5ndGgoc3RyKSB7XG4gICAgbGV0IGMgPSAwLCBsZW5ndGggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgICAgICAgbGVuZ3RoICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAgICAgICBsZW5ndGggKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMHhkODAwIHx8IGMgPj0gMHhlMDAwKSB7XG4gICAgICAgICAgICBsZW5ndGggKz0gMztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGxlbmd0aCArPSA0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4iLCJpbXBvcnQgeyBkZWNvZGVQYWNrZXQgfSBmcm9tIFwiZW5naW5lLmlvLXBhcnNlclwiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCJAc29ja2V0LmlvL2NvbXBvbmVudC1lbWl0dGVyXCI7XG5pbXBvcnQgeyBpbnN0YWxsVGltZXJGdW5jdGlvbnMgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGUgfSBmcm9tIFwiLi9jb250cmliL3BhcnNlcXMuanNcIjtcbmNsYXNzIFRyYW5zcG9ydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZGVzY3JpcHRpb24sIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocmVhc29uKTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlRyYW5zcG9ydEVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFRyYW5zcG9ydCBleHRlbmRzIEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIFRyYW5zcG9ydCBhYnN0cmFjdCBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgaW5zdGFsbFRpbWVyRnVuY3Rpb25zKHRoaXMsIG9wdHMpO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gb3B0cy5xdWVyeTtcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBvcHRzLnNvY2tldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdHMgYW4gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uXG4gICAgICogQHBhcmFtIGRlc2NyaXB0aW9uXG4gICAgICogQHBhcmFtIGNvbnRleHQgLSB0aGUgZXJyb3IgY29udGV4dFxuICAgICAqIEByZXR1cm4ge1RyYW5zcG9ydH0gZm9yIGNoYWluaW5nXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uRXJyb3IocmVhc29uLCBkZXNjcmlwdGlvbiwgY29udGV4dCkge1xuICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJlcnJvclwiLCBuZXcgVHJhbnNwb3J0RXJyb3IocmVhc29uLCBkZXNjcmlwdGlvbiwgY29udGV4dCkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHRyYW5zcG9ydC5cbiAgICAgKi9cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjtcbiAgICAgICAgdGhpcy5kb09wZW4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgdHJhbnNwb3J0LlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcIm9wZW5pbmdcIiB8fCB0aGlzLnJlYWR5U3RhdGUgPT09IFwib3BlblwiKSB7XG4gICAgICAgICAgICB0aGlzLmRvQ2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBtdWx0aXBsZSBwYWNrZXRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGFja2V0c1xuICAgICAqL1xuICAgIHNlbmQocGFja2V0cykge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcIm9wZW5cIikge1xuICAgICAgICAgICAgdGhpcy53cml0ZShwYWNrZXRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoaXMgbWlnaHQgaGFwcGVuIGlmIHRoZSB0cmFuc3BvcnQgd2FzIHNpbGVudGx5IGNsb3NlZCBpbiB0aGUgYmVmb3JldW5sb2FkIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBvcGVuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5cIjtcbiAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIHN1cGVyLmVtaXRSZXNlcnZlZChcIm9wZW5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aXRoIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBvbkRhdGEoZGF0YSkge1xuICAgICAgICBjb25zdCBwYWNrZXQgPSBkZWNvZGVQYWNrZXQoZGF0YSwgdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSk7XG4gICAgICAgIHRoaXMub25QYWNrZXQocGFja2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdpdGggYSBkZWNvZGVkIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBvblBhY2tldChwYWNrZXQpIHtcbiAgICAgICAgc3VwZXIuZW1pdFJlc2VydmVkKFwicGFja2V0XCIsIHBhY2tldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGNsb3NlLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uQ2xvc2UoZGV0YWlscykge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJjbG9zZVwiLCBkZXRhaWxzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGF1c2VzIHRoZSB0cmFuc3BvcnQsIGluIG9yZGVyIG5vdCB0byBsb3NlIHBhY2tldHMgZHVyaW5nIGFuIHVwZ3JhZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25QYXVzZVxuICAgICAqL1xuICAgIHBhdXNlKG9uUGF1c2UpIHsgfVxuICAgIGNyZWF0ZVVyaShzY2hlbWEsIHF1ZXJ5ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIChzY2hlbWEgK1xuICAgICAgICAgICAgXCI6Ly9cIiArXG4gICAgICAgICAgICB0aGlzLl9ob3N0bmFtZSgpICtcbiAgICAgICAgICAgIHRoaXMuX3BvcnQoKSArXG4gICAgICAgICAgICB0aGlzLm9wdHMucGF0aCArXG4gICAgICAgICAgICB0aGlzLl9xdWVyeShxdWVyeSkpO1xuICAgIH1cbiAgICBfaG9zdG5hbWUoKSB7XG4gICAgICAgIGNvbnN0IGhvc3RuYW1lID0gdGhpcy5vcHRzLmhvc3RuYW1lO1xuICAgICAgICByZXR1cm4gaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgPT09IC0xID8gaG9zdG5hbWUgOiBcIltcIiArIGhvc3RuYW1lICsgXCJdXCI7XG4gICAgfVxuICAgIF9wb3J0KCkge1xuICAgICAgICBpZiAodGhpcy5vcHRzLnBvcnQgJiZcbiAgICAgICAgICAgICgodGhpcy5vcHRzLnNlY3VyZSAmJiBOdW1iZXIodGhpcy5vcHRzLnBvcnQgIT09IDQ0MykpIHx8XG4gICAgICAgICAgICAgICAgKCF0aGlzLm9wdHMuc2VjdXJlICYmIE51bWJlcih0aGlzLm9wdHMucG9ydCkgIT09IDgwKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjpcIiArIHRoaXMub3B0cy5wb3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3F1ZXJ5KHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IGVuY29kZWRRdWVyeSA9IGVuY29kZShxdWVyeSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkUXVlcnkubGVuZ3RoID8gXCI/XCIgKyBlbmNvZGVkUXVlcnkgOiBcIlwiO1xuICAgIH1cbn1cbiIsIi8vIGltcG9ydGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhbGtuL3F1ZXJ5c3RyaW5nXG4vKipcbiAqIENvbXBpbGVzIGEgcXVlcnlzdHJpbmdcbiAqIFJldHVybnMgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlKG9iaikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aClcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyYnO1xuICAgICAgICAgICAgc3RyICs9IGVuY29kZVVSSUNvbXBvbmVudChpKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChvYmpbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG4vKipcbiAqIFBhcnNlcyBhIHNpbXBsZSBxdWVyeXN0cmluZyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBxc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGUocXMpIHtcbiAgICBsZXQgcXJ5ID0ge307XG4gICAgbGV0IHBhaXJzID0gcXMuc3BsaXQoJyYnKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBsZXQgcGFpciA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgIHFyeVtkZWNvZGVVUklDb21wb25lbnQocGFpclswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xuICAgIH1cbiAgICByZXR1cm4gcXJ5O1xufVxuIiwiLy8gaW1wb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vdW5zaGlmdGlvL3llYXN0XG4ndXNlIHN0cmljdCc7XG5jb25zdCBhbHBoYWJldCA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ei1fJy5zcGxpdCgnJyksIGxlbmd0aCA9IDY0LCBtYXAgPSB7fTtcbmxldCBzZWVkID0gMCwgaSA9IDAsIHByZXY7XG4vKipcbiAqIFJldHVybiBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBudW1iZXIuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG51bSBUaGUgbnVtYmVyIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlKG51bSkge1xuICAgIGxldCBlbmNvZGVkID0gJyc7XG4gICAgZG8ge1xuICAgICAgICBlbmNvZGVkID0gYWxwaGFiZXRbbnVtICUgbGVuZ3RoXSArIGVuY29kZWQ7XG4gICAgICAgIG51bSA9IE1hdGguZmxvb3IobnVtIC8gbGVuZ3RoKTtcbiAgICB9IHdoaWxlIChudW0gPiAwKTtcbiAgICByZXR1cm4gZW5jb2RlZDtcbn1cbi8qKlxuICogUmV0dXJuIHRoZSBpbnRlZ2VyIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgZ2l2ZW4gc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybnMge051bWJlcn0gVGhlIGludGVnZXIgdmFsdWUgcmVwcmVzZW50ZWQgYnkgdGhlIHN0cmluZy5cbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGUoc3RyKSB7XG4gICAgbGV0IGRlY29kZWQgPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGVjb2RlZCA9IGRlY29kZWQgKiBsZW5ndGggKyBtYXBbc3RyLmNoYXJBdChpKV07XG4gICAgfVxuICAgIHJldHVybiBkZWNvZGVkO1xufVxuLyoqXG4gKiBZZWFzdDogQSB0aW55IGdyb3dpbmcgaWQgZ2VuZXJhdG9yLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IEEgdW5pcXVlIGlkLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHllYXN0KCkge1xuICAgIGNvbnN0IG5vdyA9IGVuY29kZSgrbmV3IERhdGUoKSk7XG4gICAgaWYgKG5vdyAhPT0gcHJldilcbiAgICAgICAgcmV0dXJuIHNlZWQgPSAwLCBwcmV2ID0gbm93O1xuICAgIHJldHVybiBub3cgKyAnLicgKyBlbmNvZGUoc2VlZCsrKTtcbn1cbi8vXG4vLyBNYXAgZWFjaCBjaGFyYWN0ZXIgdG8gaXRzIGluZGV4LlxuLy9cbmZvciAoOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAgbWFwW2FscGhhYmV0W2ldXSA9IGk7XG4iLCIvLyBpbXBvcnRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9jb21wb25lbnQvaGFzLWNvcnNcbmxldCB2YWx1ZSA9IGZhbHNlO1xudHJ5IHtcbiAgICB2YWx1ZSA9IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgJ3dpdGhDcmVkZW50aWFscycgaW4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG59XG5jYXRjaCAoZXJyKSB7XG4gICAgLy8gaWYgWE1MSHR0cCBzdXBwb3J0IGlzIGRpc2FibGVkIGluIElFIHRoZW4gaXQgd2lsbCB0aHJvd1xuICAgIC8vIHdoZW4gdHJ5aW5nIHRvIGNyZWF0ZVxufVxuZXhwb3J0IGNvbnN0IGhhc0NPUlMgPSB2YWx1ZTtcbiIsIi8vIGJyb3dzZXIgc2hpbSBmb3IgeG1saHR0cHJlcXVlc3QgbW9kdWxlXG5pbXBvcnQgeyBoYXNDT1JTIH0gZnJvbSBcIi4uL2NvbnRyaWIvaGFzLWNvcnMuanNcIjtcbmltcG9ydCB7IGdsb2JhbFRoaXNTaGltIGFzIGdsb2JhbFRoaXMgfSBmcm9tIFwiLi4vZ2xvYmFsVGhpcy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIFhIUihvcHRzKSB7XG4gICAgY29uc3QgeGRvbWFpbiA9IG9wdHMueGRvbWFpbjtcbiAgICAvLyBYTUxIdHRwUmVxdWVzdCBjYW4gYmUgZGlzYWJsZWQgb24gSUVcbiAgICB0cnkge1xuICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICYmICgheGRvbWFpbiB8fCBoYXNDT1JTKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7IH1cbiAgICBpZiAoIXhkb21haW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZ2xvYmFsVGhpc1tbXCJBY3RpdmVcIl0uY29uY2F0KFwiT2JqZWN0XCIpLmpvaW4oXCJYXCIpXShcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29va2llSmFyKCkgeyB9XG4iLCJpbXBvcnQgeyBUcmFuc3BvcnQgfSBmcm9tIFwiLi4vdHJhbnNwb3J0LmpzXCI7XG5pbXBvcnQgeyB5ZWFzdCB9IGZyb20gXCIuLi9jb250cmliL3llYXN0LmpzXCI7XG5pbXBvcnQgeyBlbmNvZGVQYXlsb2FkLCBkZWNvZGVQYXlsb2FkIH0gZnJvbSBcImVuZ2luZS5pby1wYXJzZXJcIjtcbmltcG9ydCB7IGNyZWF0ZUNvb2tpZUphciwgWEhSIGFzIFhNTEh0dHBSZXF1ZXN0LCB9IGZyb20gXCIuL3htbGh0dHByZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIkBzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXJcIjtcbmltcG9ydCB7IGluc3RhbGxUaW1lckZ1bmN0aW9ucywgcGljayB9IGZyb20gXCIuLi91dGlsLmpzXCI7XG5pbXBvcnQgeyBnbG9iYWxUaGlzU2hpbSBhcyBnbG9iYWxUaGlzIH0gZnJvbSBcIi4uL2dsb2JhbFRoaXMuanNcIjtcbmZ1bmN0aW9uIGVtcHR5KCkgeyB9XG5jb25zdCBoYXNYSFIyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Qoe1xuICAgICAgICB4ZG9tYWluOiBmYWxzZSxcbiAgICB9KTtcbiAgICByZXR1cm4gbnVsbCAhPSB4aHIucmVzcG9uc2VUeXBlO1xufSkoKTtcbmV4cG9ydCBjbGFzcyBQb2xsaW5nIGV4dGVuZHMgVHJhbnNwb3J0IHtcbiAgICAvKipcbiAgICAgKiBYSFIgUG9sbGluZyBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICogQHBhY2thZ2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHN1cGVyKG9wdHMpO1xuICAgICAgICB0aGlzLnBvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgY29uc3QgaXNTU0wgPSBcImh0dHBzOlwiID09PSBsb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgICAgIGxldCBwb3J0ID0gbG9jYXRpb24ucG9ydDtcbiAgICAgICAgICAgIC8vIHNvbWUgdXNlciBhZ2VudHMgaGF2ZSBlbXB0eSBgbG9jYXRpb24ucG9ydGBcbiAgICAgICAgICAgIGlmICghcG9ydCkge1xuICAgICAgICAgICAgICAgIHBvcnQgPSBpc1NTTCA/IFwiNDQzXCIgOiBcIjgwXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnhkID1cbiAgICAgICAgICAgICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuaG9zdG5hbWUgIT09IGxvY2F0aW9uLmhvc3RuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgICBwb3J0ICE9PSBvcHRzLnBvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFhIUiBzdXBwb3J0cyBiaW5hcnlcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGZvcmNlQmFzZTY0ID0gb3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O1xuICAgICAgICB0aGlzLnN1cHBvcnRzQmluYXJ5ID0gaGFzWEhSMiAmJiAhZm9yY2VCYXNlNjQ7XG4gICAgICAgIGlmICh0aGlzLm9wdHMud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICB0aGlzLmNvb2tpZUphciA9IGNyZWF0ZUNvb2tpZUphcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJwb2xsaW5nXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzb2NrZXQgKHRyaWdnZXJzIHBvbGxpbmcpLiBXZSB3cml0ZSBhIFBJTkcgbWVzc2FnZSB0byBkZXRlcm1pbmVcbiAgICAgKiB3aGVuIHRoZSB0cmFuc3BvcnQgaXMgb3Blbi5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBkb09wZW4oKSB7XG4gICAgICAgIHRoaXMucG9sbCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXVzZXMgcG9sbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uUGF1c2UgLSBjYWxsYmFjayB1cG9uIGJ1ZmZlcnMgYXJlIGZsdXNoZWQgYW5kIHRyYW5zcG9ydCBpcyBwYXVzZWRcbiAgICAgKiBAcGFja2FnZVxuICAgICAqL1xuICAgIHBhdXNlKG9uUGF1c2UpIHtcbiAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJwYXVzaW5nXCI7XG4gICAgICAgIGNvbnN0IHBhdXNlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJwYXVzZWRcIjtcbiAgICAgICAgICAgIG9uUGF1c2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucG9sbGluZyB8fCAhdGhpcy53cml0YWJsZSkge1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0b3RhbCsrO1xuICAgICAgICAgICAgICAgIHRoaXMub25jZShcInBvbGxDb21wbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC0tdG90YWwgfHwgcGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy53cml0YWJsZSkge1xuICAgICAgICAgICAgICAgIHRvdGFsKys7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmNlKFwiZHJhaW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAtLXRvdGFsIHx8IHBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXVzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBwb2xsaW5nIGN5Y2xlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwb2xsKCkge1xuICAgICAgICB0aGlzLnBvbGxpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmRvUG9sbCgpO1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBvbGxcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJsb2FkcyBvbkRhdGEgdG8gZGV0ZWN0IHBheWxvYWRzLlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uRGF0YShkYXRhKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKHBhY2tldCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgaXRzIHRoZSBmaXJzdCBtZXNzYWdlIHdlIGNvbnNpZGVyIHRoZSB0cmFuc3BvcnQgb3BlblxuICAgICAgICAgICAgaWYgKFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgJiYgcGFja2V0LnR5cGUgPT09IFwib3BlblwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIGl0cyBhIGNsb3NlIHBhY2tldCwgd2UgY2xvc2UgdGhlIG9uZ29pbmcgcmVxdWVzdHNcbiAgICAgICAgICAgIGlmIChcImNsb3NlXCIgPT09IHBhY2tldC50eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlKHsgZGVzY3JpcHRpb246IFwidHJhbnNwb3J0IGNsb3NlZCBieSB0aGUgc2VydmVyXCIgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ5cGFzcyBvbkRhdGEgYW5kIGhhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgICAgICAgdGhpcy5vblBhY2tldChwYWNrZXQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBkZWNvZGUgcGF5bG9hZFxuICAgICAgICBkZWNvZGVQYXlsb2FkKGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpLmZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICAvLyBpZiBhbiBldmVudCBkaWQgbm90IHRyaWdnZXIgY2xvc2luZ1xuICAgICAgICBpZiAoXCJjbG9zZWRcIiAhPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBnb3QgZGF0YSB3ZSdyZSBub3QgcG9sbGluZ1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBvbGxDb21wbGV0ZVwiKTtcbiAgICAgICAgICAgIGlmIChcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgcG9sbGluZywgc2VuZCBhIGNsb3NlIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBkb0Nsb3NlKCkge1xuICAgICAgICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoW3sgdHlwZTogXCJjbG9zZVwiIH1dKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwib3BlblwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpbiBjYXNlIHdlJ3JlIHRyeWluZyB0byBjbG9zZSB3aGlsZVxuICAgICAgICAgICAgLy8gaGFuZHNoYWtpbmcgaXMgaW4gcHJvZ3Jlc3MgKEdILTE2NClcbiAgICAgICAgICAgIHRoaXMub25jZShcIm9wZW5cIiwgY2xvc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyBhIHBhY2tldHMgcGF5bG9hZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhY2tldHMgLSBkYXRhIHBhY2tldHNcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgd3JpdGUocGFja2V0cykge1xuICAgICAgICB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG4gICAgICAgIGVuY29kZVBheWxvYWQocGFja2V0cywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZG9Xcml0ZShkYXRhLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkcmFpblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHVyaSBmb3IgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdXJpKCkge1xuICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLm9wdHMuc2VjdXJlID8gXCJodHRwc1wiIDogXCJodHRwXCI7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcbiAgICAgICAgLy8gY2FjaGUgYnVzdGluZyBpcyBmb3JjZWRcbiAgICAgICAgaWYgKGZhbHNlICE9PSB0aGlzLm9wdHMudGltZXN0YW1wUmVxdWVzdHMpIHtcbiAgICAgICAgICAgIHF1ZXJ5W3RoaXMub3B0cy50aW1lc3RhbXBQYXJhbV0gPSB5ZWFzdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSAmJiAhcXVlcnkuc2lkKSB7XG4gICAgICAgICAgICBxdWVyeS5iNjQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVVyaShzY2hlbWEsIHF1ZXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICByZXF1ZXN0KG9wdHMgPSB7fSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKG9wdHMsIHsgeGQ6IHRoaXMueGQsIGNvb2tpZUphcjogdGhpcy5jb29raWVKYXIgfSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMudXJpKCksIG9wdHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBkYXRhLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsZWQgdXBvbiBmbHVzaC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGRvV3JpdGUoZGF0YSwgZm4pIHtcbiAgICAgICAgY29uc3QgcmVxID0gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVxLm9uKFwic3VjY2Vzc1wiLCBmbik7XG4gICAgICAgIHJlcS5vbihcImVycm9yXCIsICh4aHJTdGF0dXMsIGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihcInhociBwb3N0IGVycm9yXCIsIHhoclN0YXR1cywgY29udGV4dCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSBwb2xsIGN5Y2xlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBkb1BvbGwoKSB7XG4gICAgICAgIGNvbnN0IHJlcSA9IHRoaXMucmVxdWVzdCgpO1xuICAgICAgICByZXEub24oXCJkYXRhXCIsIHRoaXMub25EYXRhLmJpbmQodGhpcykpO1xuICAgICAgICByZXEub24oXCJlcnJvclwiLCAoeGhyU3RhdHVzLCBjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJ4aHIgcG9sbCBlcnJvclwiLCB4aHJTdGF0dXMsIGNvbnRleHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb2xsWGhyID0gcmVxO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0IGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogUmVxdWVzdCBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcGFja2FnZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgb3B0cykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpbnN0YWxsVGltZXJGdW5jdGlvbnModGhpcywgb3B0cyk7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICAgIHRoaXMubWV0aG9kID0gb3B0cy5tZXRob2QgfHwgXCJHRVRcIjtcbiAgICAgICAgdGhpcy51cmkgPSB1cmk7XG4gICAgICAgIHRoaXMuZGF0YSA9IHVuZGVmaW5lZCAhPT0gb3B0cy5kYXRhID8gb3B0cy5kYXRhIDogbnVsbDtcbiAgICAgICAgdGhpcy5jcmVhdGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgWEhSIG9iamVjdCBhbmQgc2VuZHMgdGhlIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBvcHRzID0gcGljayh0aGlzLm9wdHMsIFwiYWdlbnRcIiwgXCJwZnhcIiwgXCJrZXlcIiwgXCJwYXNzcGhyYXNlXCIsIFwiY2VydFwiLCBcImNhXCIsIFwiY2lwaGVyc1wiLCBcInJlamVjdFVuYXV0aG9yaXplZFwiLCBcImF1dG9VbnJlZlwiKTtcbiAgICAgICAgb3B0cy54ZG9tYWluID0gISF0aGlzLm9wdHMueGQ7XG4gICAgICAgIGNvbnN0IHhociA9ICh0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdChvcHRzKSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmksIHRydWUpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICB4aHIuc2V0RGlzYWJsZUhlYWRlckNoZWNrICYmIHhoci5zZXREaXNhYmxlSGVhZGVyQ2hlY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5vcHRzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5leHRyYUhlYWRlcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihpLCB0aGlzLm9wdHMuZXh0cmFIZWFkZXJzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgIGlmIChcIlBPU1RcIiA9PT0gdGhpcy5tZXRob2QpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgIChfYSA9IHRoaXMub3B0cy5jb29raWVKYXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hZGRDb29raWVzKHhocik7XG4gICAgICAgICAgICAvLyBpZTYgY2hlY2tcbiAgICAgICAgICAgIGlmIChcIndpdGhDcmVkZW50aWFsc1wiIGluIHhocikge1xuICAgICAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLm9wdHMud2l0aENyZWRlbnRpYWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5yZXF1ZXN0VGltZW91dCkge1xuICAgICAgICAgICAgICAgIHhoci50aW1lb3V0ID0gdGhpcy5vcHRzLnJlcXVlc3RUaW1lb3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMub3B0cy5jb29raWVKYXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wYXJzZUNvb2tpZXMoeGhyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKDQgIT09IHhoci5yZWFkeVN0YXRlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKDIwMCA9PT0geGhyLnN0YXR1cyB8fCAxMjIzID09PSB4aHIuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Mb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGBlcnJvcmAgZXZlbnQgaGFuZGxlciB0aGF0J3MgdXNlci1zZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9lcyBub3QgdGhyb3cgaW4gdGhlIHNhbWUgdGljayBhbmQgZ2V0cyBjYXVnaHQgaGVyZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRpbWVvdXRGbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IodHlwZW9mIHhoci5zdGF0dXMgPT09IFwibnVtYmVyXCIgPyB4aHIuc3RhdHVzIDogMCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIuc2VuZCh0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBOZWVkIHRvIGRlZmVyIHNpbmNlIC5jcmVhdGUoKSBpcyBjYWxsZWQgZGlyZWN0bHkgZnJvbSB0aGUgY29uc3RydWN0b3JcbiAgICAgICAgICAgIC8vIGFuZCB0aHVzIHRoZSAnZXJyb3InIGV2ZW50IGNhbiBvbmx5IGJlIG9ubHkgYm91bmQgKmFmdGVyKiB0aGlzIGV4Y2VwdGlvblxuICAgICAgICAgICAgLy8gb2NjdXJzLiAgVGhlcmVmb3JlLCBhbHNvLCB3ZSBjYW5ub3QgdGhyb3cgaGVyZSBhdCBhbGwuXG4gICAgICAgICAgICB0aGlzLnNldFRpbWVvdXRGbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkVycm9yKGUpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IFJlcXVlc3QucmVxdWVzdHNDb3VudCsrO1xuICAgICAgICAgICAgUmVxdWVzdC5yZXF1ZXN0c1t0aGlzLmluZGV4XSA9IHRoaXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyLCB0aGlzLnhocik7XG4gICAgICAgIHRoaXMuY2xlYW51cCh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW5zIHVwIGhvdXNlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjbGVhbnVwKGZyb21FcnJvcikge1xuICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIHRoaXMueGhyIHx8IG51bGwgPT09IHRoaXMueGhyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZW1wdHk7XG4gICAgICAgIGlmIChmcm9tRXJyb3IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy54aHIuYWJvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBkZWxldGUgUmVxdWVzdC5yZXF1ZXN0c1t0aGlzLmluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnhociA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uTG9hZCgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMueGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZGF0YVwiLCBkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFib3J0cyB0aGUgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYWNrYWdlXG4gICAgICovXG4gICAgYWJvcnQoKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgIH1cbn1cblJlcXVlc3QucmVxdWVzdHNDb3VudCA9IDA7XG5SZXF1ZXN0LnJlcXVlc3RzID0ge307XG4vKipcbiAqIEFib3J0cyBwZW5kaW5nIHJlcXVlc3RzIHdoZW4gdW5sb2FkaW5nIHRoZSB3aW5kb3cuIFRoaXMgaXMgbmVlZGVkIHRvIHByZXZlbnRcbiAqIG1lbW9yeSBsZWFrcyAoZS5nLiB3aGVuIHVzaW5nIElFKSBhbmQgdG8gZW5zdXJlIHRoYXQgbm8gc3B1cmlvdXMgZXJyb3IgaXNcbiAqIGVtaXR0ZWQuXG4gKi9cbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKHR5cGVvZiBhdHRhY2hFdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLCB1bmxvYWRIYW5kbGVyKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCB0ZXJtaW5hdGlvbkV2ZW50ID0gXCJvbnBhZ2VoaWRlXCIgaW4gZ2xvYmFsVGhpcyA/IFwicGFnZWhpZGVcIiA6IFwidW5sb2FkXCI7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIodGVybWluYXRpb25FdmVudCwgdW5sb2FkSGFuZGxlciwgZmFsc2UpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVubG9hZEhhbmRsZXIoKSB7XG4gICAgZm9yIChsZXQgaSBpbiBSZXF1ZXN0LnJlcXVlc3RzKSB7XG4gICAgICAgIGlmIChSZXF1ZXN0LnJlcXVlc3RzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICBSZXF1ZXN0LnJlcXVlc3RzW2ldLmFib3J0KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnbG9iYWxUaGlzU2hpbSBhcyBnbG9iYWxUaGlzIH0gZnJvbSBcIi4uL2dsb2JhbFRoaXMuanNcIjtcbmV4cG9ydCBjb25zdCBuZXh0VGljayA9ICgoKSA9PiB7XG4gICAgY29uc3QgaXNQcm9taXNlQXZhaWxhYmxlID0gdHlwZW9mIFByb21pc2UgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgUHJvbWlzZS5yZXNvbHZlID09PSBcImZ1bmN0aW9uXCI7XG4gICAgaWYgKGlzUHJvbWlzZUF2YWlsYWJsZSkge1xuICAgICAgICByZXR1cm4gKGNiKSA9PiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGNiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAoY2IsIHNldFRpbWVvdXRGbikgPT4gc2V0VGltZW91dEZuKGNiLCAwKTtcbiAgICB9XG59KSgpO1xuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0IHx8IGdsb2JhbFRoaXMuTW96V2ViU29ja2V0O1xuZXhwb3J0IGNvbnN0IHVzaW5nQnJvd3NlcldlYlNvY2tldCA9IHRydWU7XG5leHBvcnQgY29uc3QgZGVmYXVsdEJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XG4iLCJpbXBvcnQgeyBUcmFuc3BvcnQgfSBmcm9tIFwiLi4vdHJhbnNwb3J0LmpzXCI7XG5pbXBvcnQgeyB5ZWFzdCB9IGZyb20gXCIuLi9jb250cmliL3llYXN0LmpzXCI7XG5pbXBvcnQgeyBwaWNrIH0gZnJvbSBcIi4uL3V0aWwuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRCaW5hcnlUeXBlLCBuZXh0VGljaywgdXNpbmdCcm93c2VyV2ViU29ja2V0LCBXZWJTb2NrZXQsIH0gZnJvbSBcIi4vd2Vic29ja2V0LWNvbnN0cnVjdG9yLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGVQYWNrZXQgfSBmcm9tIFwiZW5naW5lLmlvLXBhcnNlclwiO1xuLy8gZGV0ZWN0IFJlYWN0TmF0aXZlIGVudmlyb25tZW50XG5jb25zdCBpc1JlYWN0TmF0aXZlID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gXCJzdHJpbmdcIiAmJlxuICAgIG5hdmlnYXRvci5wcm9kdWN0LnRvTG93ZXJDYXNlKCkgPT09IFwicmVhY3RuYXRpdmVcIjtcbmV4cG9ydCBjbGFzcyBXUyBleHRlbmRzIFRyYW5zcG9ydCB7XG4gICAgLyoqXG4gICAgICogV2ViU29ja2V0IHRyYW5zcG9ydCBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gY29ubmVjdGlvbiBvcHRpb25zXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgc3VwZXIob3B0cyk7XG4gICAgICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSAhb3B0cy5mb3JjZUJhc2U2NDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIndlYnNvY2tldFwiO1xuICAgIH1cbiAgICBkb09wZW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5jaGVjaygpKSB7XG4gICAgICAgICAgICAvLyBsZXQgcHJvYmUgdGltZW91dFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVyaSA9IHRoaXMudXJpKCk7XG4gICAgICAgIGNvbnN0IHByb3RvY29scyA9IHRoaXMub3B0cy5wcm90b2NvbHM7XG4gICAgICAgIC8vIFJlYWN0IE5hdGl2ZSBvbmx5IHN1cHBvcnRzIHRoZSAnaGVhZGVycycgb3B0aW9uLCBhbmQgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgYW55dGhpbmcgZWxzZSBpcyBwYXNzZWRcbiAgICAgICAgY29uc3Qgb3B0cyA9IGlzUmVhY3ROYXRpdmVcbiAgICAgICAgICAgID8ge31cbiAgICAgICAgICAgIDogcGljayh0aGlzLm9wdHMsIFwiYWdlbnRcIiwgXCJwZXJNZXNzYWdlRGVmbGF0ZVwiLCBcInBmeFwiLCBcImtleVwiLCBcInBhc3NwaHJhc2VcIiwgXCJjZXJ0XCIsIFwiY2FcIiwgXCJjaXBoZXJzXCIsIFwicmVqZWN0VW5hdXRob3JpemVkXCIsIFwibG9jYWxBZGRyZXNzXCIsIFwicHJvdG9jb2xWZXJzaW9uXCIsIFwib3JpZ2luXCIsIFwibWF4UGF5bG9hZFwiLCBcImZhbWlseVwiLCBcImNoZWNrU2VydmVySWRlbnRpdHlcIik7XG4gICAgICAgIGlmICh0aGlzLm9wdHMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICBvcHRzLmhlYWRlcnMgPSB0aGlzLm9wdHMuZXh0cmFIZWFkZXJzO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndzID1cbiAgICAgICAgICAgICAgICB1c2luZ0Jyb3dzZXJXZWJTb2NrZXQgJiYgIWlzUmVhY3ROYXRpdmVcbiAgICAgICAgICAgICAgICAgICAgPyBwcm90b2NvbHNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IFdlYlNvY2tldCh1cmksIHByb3RvY29scylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IFdlYlNvY2tldCh1cmkpXG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFdlYlNvY2tldCh1cmksIHByb3RvY29scywgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndzLmJpbmFyeVR5cGUgPSB0aGlzLnNvY2tldC5iaW5hcnlUeXBlIHx8IGRlZmF1bHRCaW5hcnlUeXBlO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBzb2NrZXRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMud3Mub25vcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5hdXRvVW5yZWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndzLl9zb2NrZXQudW5yZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud3Mub25jbG9zZSA9IChjbG9zZUV2ZW50KSA9PiB0aGlzLm9uQ2xvc2Uoe1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwid2Vic29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkXCIsXG4gICAgICAgICAgICBjb250ZXh0OiBjbG9zZUV2ZW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53cy5vbm1lc3NhZ2UgPSAoZXYpID0+IHRoaXMub25EYXRhKGV2LmRhdGEpO1xuICAgICAgICB0aGlzLndzLm9uZXJyb3IgPSAoZSkgPT4gdGhpcy5vbkVycm9yKFwid2Vic29ja2V0IGVycm9yXCIsIGUpO1xuICAgIH1cbiAgICB3cml0ZShwYWNrZXRzKSB7XG4gICAgICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgLy8gZW5jb2RlUGFja2V0IGVmZmljaWVudCBhcyBpdCB1c2VzIFdTIGZyYW1pbmdcbiAgICAgICAgLy8gbm8gbmVlZCBmb3IgZW5jb2RlUGF5bG9hZFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhY2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBhY2tldCA9IHBhY2tldHNbaV07XG4gICAgICAgICAgICBjb25zdCBsYXN0UGFja2V0ID0gaSA9PT0gcGFja2V0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgZW5jb2RlUGFja2V0KHBhY2tldCwgdGhpcy5zdXBwb3J0c0JpbmFyeSwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgY3JlYXRlIGEgbmV3IG9iamVjdCAoR0gtNDM3KVxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdHMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzaW5nQnJvd3NlcldlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFja2V0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuY29tcHJlc3MgPSBwYWNrZXQub3B0aW9ucy5jb21wcmVzcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRzLnBlck1lc3NhZ2VEZWZsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyaW5nXCIgPT09IHR5cGVvZiBkYXRhID8gQnVmZmVyLmJ5dGVMZW5ndGgoZGF0YSkgOiBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gPCB0aGlzLm9wdHMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5jb21wcmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB0aGUgd2Vic29ja2V0IGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkIGJ1dCB0aGUgYnJvd3NlciBkaWRuJ3RcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgY2hhbmNlIG9mIGluZm9ybWluZyB1cyBhYm91dCBpdCB5ZXQsIGluIHRoYXQgY2FzZSBzZW5kIHdpbGxcbiAgICAgICAgICAgICAgICAvLyB0aHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2luZ0Jyb3dzZXJXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFR5cGVFcnJvciBpcyB0aHJvd24gd2hlbiBwYXNzaW5nIHRoZSBzZWNvbmQgYXJndW1lbnQgb24gU2FmYXJpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndzLnNlbmQoZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RQYWNrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFrZSBkcmFpblxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZlciB0byBuZXh0IHRpY2sgdG8gYWxsb3cgU29ja2V0IHRvIGNsZWFyIHdyaXRlQnVmZmVyXG4gICAgICAgICAgICAgICAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkcmFpblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5zZXRUaW1lb3V0Rm4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvQ2xvc2UoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy53cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy53cy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy53cyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHVyaSBmb3IgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdXJpKCkge1xuICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLm9wdHMuc2VjdXJlID8gXCJ3c3NcIiA6IFwid3NcIjtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O1xuICAgICAgICAvLyBhcHBlbmQgdGltZXN0YW1wIHRvIFVSSVxuICAgICAgICBpZiAodGhpcy5vcHRzLnRpbWVzdGFtcFJlcXVlc3RzKSB7XG4gICAgICAgICAgICBxdWVyeVt0aGlzLm9wdHMudGltZXN0YW1wUGFyYW1dID0geWVhc3QoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb21tdW5pY2F0ZSBiaW5hcnkgc3VwcG9ydCBjYXBhYmlsaXRpZXNcbiAgICAgICAgaWYgKCF0aGlzLnN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICBxdWVyeS5iNjQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVVyaShzY2hlbWEsIHF1ZXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmVhdHVyZSBkZXRlY3Rpb24gZm9yIFdlYlNvY2tldC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHdoZXRoZXIgdGhpcyB0cmFuc3BvcnQgaXMgYXZhaWxhYmxlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAhIVdlYlNvY2tldDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUcmFuc3BvcnQgfSBmcm9tIFwiLi4vdHJhbnNwb3J0LmpzXCI7XG5pbXBvcnQgeyBuZXh0VGljayB9IGZyb20gXCIuL3dlYnNvY2tldC1jb25zdHJ1Y3Rvci5qc1wiO1xuaW1wb3J0IHsgZW5jb2RlUGFja2V0VG9CaW5hcnksIGRlY29kZVBhY2tldEZyb21CaW5hcnksIH0gZnJvbSBcImVuZ2luZS5pby1wYXJzZXJcIjtcbmZ1bmN0aW9uIHNob3VsZEluY2x1ZGVCaW5hcnlIZWFkZXIocGFja2V0LCBlbmNvZGVkKSB7XG4gICAgLy8gNDggPT09IFwiMFwiLmNoYXJDb2RlQXQoMCkgKE9QRU4gcGFja2V0IHR5cGUpXG4gICAgLy8gNTQgPT09IFwiNlwiLmNoYXJDb2RlQXQoMCkgKE5PT1AgcGFja2V0IHR5cGUpXG4gICAgcmV0dXJuIChwYWNrZXQudHlwZSA9PT0gXCJtZXNzYWdlXCIgJiZcbiAgICAgICAgdHlwZW9mIHBhY2tldC5kYXRhICE9PSBcInN0cmluZ1wiICYmXG4gICAgICAgIGVuY29kZWRbMF0gPj0gNDggJiZcbiAgICAgICAgZW5jb2RlZFswXSA8PSA1NCk7XG59XG5leHBvcnQgY2xhc3MgV1QgZXh0ZW5kcyBUcmFuc3BvcnQge1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJ3ZWJ0cmFuc3BvcnRcIjtcbiAgICB9XG4gICAgZG9PcGVuKCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICh0eXBlb2YgV2ViVHJhbnNwb3J0ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMudHJhbnNwb3J0ID0gbmV3IFdlYlRyYW5zcG9ydCh0aGlzLmNyZWF0ZVVyaShcImh0dHBzXCIpLCB0aGlzLm9wdHMudHJhbnNwb3J0T3B0aW9uc1t0aGlzLm5hbWVdKTtcbiAgICAgICAgdGhpcy50cmFuc3BvcnQuY2xvc2VkXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJ3ZWJ0cmFuc3BvcnQgZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIG5vdGU6IHdlIGNvdWxkIGhhdmUgdXNlZCBhc3luYy9hd2FpdCwgYnV0IHRoYXQgd291bGQgcmVxdWlyZSBzb21lIGFkZGl0aW9uYWwgcG9seWZpbGxzXG4gICAgICAgIHRoaXMudHJhbnNwb3J0LnJlYWR5LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQuY3JlYXRlQmlkaXJlY3Rpb25hbFN0cmVhbSgpLnRoZW4oKHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5yZWFkYWJsZS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlciA9IHN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcbiAgICAgICAgICAgICAgICBsZXQgYmluYXJ5RmxhZztcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZWFkKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiaW5hcnlGbGFnICYmIHZhbHVlLmJ5dGVMZW5ndGggPT09IDEgJiYgdmFsdWVbMF0gPT09IDU0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluYXJ5RmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGV4cG9zZSBiaW5hcnl0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblBhY2tldChkZWNvZGVQYWNrZXRGcm9tQmluYXJ5KHZhbHVlLCBiaW5hcnlGbGFnLCBcImFycmF5YnVmZmVyXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5hcnlGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlYWQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kc2hha2UgPSB0aGlzLnF1ZXJ5LnNpZCA/IGAwe1wic2lkXCI6XCIke3RoaXMucXVlcnkuc2lkfVwifWAgOiBcIjBcIjtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlclxuICAgICAgICAgICAgICAgICAgICAud3JpdGUobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGhhbmRzaGFrZSkpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMub25PcGVuKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3cml0ZShwYWNrZXRzKSB7XG4gICAgICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwYWNrZXQgPSBwYWNrZXRzW2ldO1xuICAgICAgICAgICAgY29uc3QgbGFzdFBhY2tldCA9IGkgPT09IHBhY2tldHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGVuY29kZVBhY2tldFRvQmluYXJ5KHBhY2tldCwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkSW5jbHVkZUJpbmFyeUhlYWRlcihwYWNrZXQsIGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKFVpbnQ4QXJyYXkub2YoNTQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIud3JpdGUoZGF0YSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0UGFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkcmFpblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuc2V0VGltZW91dEZuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9DbG9zZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLnRyYW5zcG9ydCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUG9sbGluZyB9IGZyb20gXCIuL3BvbGxpbmcuanNcIjtcbmltcG9ydCB7IFdTIH0gZnJvbSBcIi4vd2Vic29ja2V0LmpzXCI7XG5pbXBvcnQgeyBXVCB9IGZyb20gXCIuL3dlYnRyYW5zcG9ydC5qc1wiO1xuZXhwb3J0IGNvbnN0IHRyYW5zcG9ydHMgPSB7XG4gICAgd2Vic29ja2V0OiBXUyxcbiAgICB3ZWJ0cmFuc3BvcnQ6IFdULFxuICAgIHBvbGxpbmc6IFBvbGxpbmcsXG59O1xuIiwiLy8gaW1wb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZ2Fsa24vcGFyc2V1cmlcbi8qKlxuICogUGFyc2VzIGEgVVJJXG4gKlxuICogTm90ZTogd2UgY291bGQgYWxzbyBoYXZlIHVzZWQgdGhlIGJ1aWx0LWluIFVSTCBvYmplY3QsIGJ1dCBpdCBpc24ndCBzdXBwb3J0ZWQgb24gYWxsIHBsYXRmb3Jtcy5cbiAqXG4gKiBTZWU6XG4gKiAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9VUkxcbiAqIC0gaHR0cHM6Ly9jYW5pdXNlLmNvbS91cmxcbiAqIC0gaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzM5ODYjYXBwZW5kaXgtQlxuICpcbiAqIEhpc3Rvcnkgb2YgdGhlIHBhcnNlKCkgbWV0aG9kOlxuICogLSBmaXJzdCBjb21taXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9zb2NrZXRpby9zb2NrZXQuaW8tY2xpZW50L2NvbW1pdC80ZWUxZDVkOTRiMzkwNmE5YzA1MmI0NTlmMWE4MThiMTVmMzhmOTFjXG4gKiAtIGV4cG9ydCBpbnRvIGl0cyBvd24gbW9kdWxlOiBodHRwczovL2dpdGh1Yi5jb20vc29ja2V0aW8vZW5naW5lLmlvLWNsaWVudC9jb21taXQvZGUyYzU2MWU0NTY0ZWZlYjc4ZjFiZGIxYmEzOWVmODFiMjgyMmNiM1xuICogLSByZWltcG9ydDogaHR0cHM6Ly9naXRodWIuY29tL3NvY2tldGlvL2VuZ2luZS5pby1jbGllbnQvY29tbWl0L2RmMzIyNzdjM2Y2ZDYyMmVlYzVlZDA5ZjQ5M2NhZTNmMzM5MWQyNDJcbiAqXG4gKiBAYXV0aG9yIFN0ZXZlbiBMZXZpdGhhbiA8c3RldmVubGV2aXRoYW4uY29tPiAoTUlUIGxpY2Vuc2UpXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuY29uc3QgcmUgPSAvXig/Oig/IVteOkBcXC8/I10rOlteOkBcXC9dKkApKGh0dHB8aHR0cHN8d3N8d3NzKTpcXC9cXC8pPygoPzooKFteOkBcXC8/I10qKSg/OjooW146QFxcLz8jXSopKT8pP0ApPygoPzpbYS1mMC05XXswLDR9Oil7Miw3fVthLWYwLTldezAsNH18W146XFwvPyNdKikoPzo6KFxcZCopKT8pKCgoXFwvKD86W14/I10oPyFbXj8jXFwvXSpcXC5bXj8jXFwvLl0rKD86Wz8jXXwkKSkpKlxcLz8pPyhbXj8jXFwvXSopKSg/OlxcPyhbXiNdKikpPyg/OiMoLiopKT8pLztcbmNvbnN0IHBhcnRzID0gW1xuICAgICdzb3VyY2UnLCAncHJvdG9jb2wnLCAnYXV0aG9yaXR5JywgJ3VzZXJJbmZvJywgJ3VzZXInLCAncGFzc3dvcmQnLCAnaG9zdCcsICdwb3J0JywgJ3JlbGF0aXZlJywgJ3BhdGgnLCAnZGlyZWN0b3J5JywgJ2ZpbGUnLCAncXVlcnknLCAnYW5jaG9yJ1xuXTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgICBjb25zdCBzcmMgPSBzdHIsIGIgPSBzdHIuaW5kZXhPZignWycpLCBlID0gc3RyLmluZGV4T2YoJ10nKTtcbiAgICBpZiAoYiAhPSAtMSAmJiBlICE9IC0xKSB7XG4gICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgYikgKyBzdHIuc3Vic3RyaW5nKGIsIGUpLnJlcGxhY2UoLzovZywgJzsnKSArIHN0ci5zdWJzdHJpbmcoZSwgc3RyLmxlbmd0aCk7XG4gICAgfVxuICAgIGxldCBtID0gcmUuZXhlYyhzdHIgfHwgJycpLCB1cmkgPSB7fSwgaSA9IDE0O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdXJpW3BhcnRzW2ldXSA9IG1baV0gfHwgJyc7XG4gICAgfVxuICAgIGlmIChiICE9IC0xICYmIGUgIT0gLTEpIHtcbiAgICAgICAgdXJpLnNvdXJjZSA9IHNyYztcbiAgICAgICAgdXJpLmhvc3QgPSB1cmkuaG9zdC5zdWJzdHJpbmcoMSwgdXJpLmhvc3QubGVuZ3RoIC0gMSkucmVwbGFjZSgvOy9nLCAnOicpO1xuICAgICAgICB1cmkuYXV0aG9yaXR5ID0gdXJpLmF1dGhvcml0eS5yZXBsYWNlKCdbJywgJycpLnJlcGxhY2UoJ10nLCAnJykucmVwbGFjZSgvOy9nLCAnOicpO1xuICAgICAgICB1cmkuaXB2NnVyaSA9IHRydWU7XG4gICAgfVxuICAgIHVyaS5wYXRoTmFtZXMgPSBwYXRoTmFtZXModXJpLCB1cmlbJ3BhdGgnXSk7XG4gICAgdXJpLnF1ZXJ5S2V5ID0gcXVlcnlLZXkodXJpLCB1cmlbJ3F1ZXJ5J10pO1xuICAgIHJldHVybiB1cmk7XG59XG5mdW5jdGlvbiBwYXRoTmFtZXMob2JqLCBwYXRoKSB7XG4gICAgY29uc3QgcmVneCA9IC9cXC97Miw5fS9nLCBuYW1lcyA9IHBhdGgucmVwbGFjZShyZWd4LCBcIi9cIikuc3BsaXQoXCIvXCIpO1xuICAgIGlmIChwYXRoLnNsaWNlKDAsIDEpID09ICcvJyB8fCBwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuYW1lcy5zcGxpY2UoMCwgMSk7XG4gICAgfVxuICAgIGlmIChwYXRoLnNsaWNlKC0xKSA9PSAnLycpIHtcbiAgICAgICAgbmFtZXMuc3BsaWNlKG5hbWVzLmxlbmd0aCAtIDEsIDEpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXM7XG59XG5mdW5jdGlvbiBxdWVyeUtleSh1cmksIHF1ZXJ5KSB7XG4gICAgY29uc3QgZGF0YSA9IHt9O1xuICAgIHF1ZXJ5LnJlcGxhY2UoLyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nLCBmdW5jdGlvbiAoJDAsICQxLCAkMikge1xuICAgICAgICBpZiAoJDEpIHtcbiAgICAgICAgICAgIGRhdGFbJDFdID0gJDI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cbiIsImltcG9ydCB7IHRyYW5zcG9ydHMgfSBmcm9tIFwiLi90cmFuc3BvcnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpbnN0YWxsVGltZXJGdW5jdGlvbnMsIGJ5dGVMZW5ndGggfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwiLi9jb250cmliL3BhcnNlcXMuanNcIjtcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSBcIi4vY29udHJpYi9wYXJzZXVyaS5qc1wiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCJAc29ja2V0LmlvL2NvbXBvbmVudC1lbWl0dGVyXCI7XG5pbXBvcnQgeyBwcm90b2NvbCB9IGZyb20gXCJlbmdpbmUuaW8tcGFyc2VyXCI7XG5leHBvcnQgY2xhc3MgU29ja2V0IGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogU29ja2V0IGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSB1cmkgLSB1cmkgb3Igb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgb3B0cyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud3JpdGVCdWZmZXIgPSBbXTtcbiAgICAgICAgaWYgKHVyaSAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgdXJpKSB7XG4gICAgICAgICAgICBvcHRzID0gdXJpO1xuICAgICAgICAgICAgdXJpID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJpKSB7XG4gICAgICAgICAgICB1cmkgPSBwYXJzZSh1cmkpO1xuICAgICAgICAgICAgb3B0cy5ob3N0bmFtZSA9IHVyaS5ob3N0O1xuICAgICAgICAgICAgb3B0cy5zZWN1cmUgPSB1cmkucHJvdG9jb2wgPT09IFwiaHR0cHNcIiB8fCB1cmkucHJvdG9jb2wgPT09IFwid3NzXCI7XG4gICAgICAgICAgICBvcHRzLnBvcnQgPSB1cmkucG9ydDtcbiAgICAgICAgICAgIGlmICh1cmkucXVlcnkpXG4gICAgICAgICAgICAgICAgb3B0cy5xdWVyeSA9IHVyaS5xdWVyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRzLmhvc3QpIHtcbiAgICAgICAgICAgIG9wdHMuaG9zdG5hbWUgPSBwYXJzZShvcHRzLmhvc3QpLmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFsbFRpbWVyRnVuY3Rpb25zKHRoaXMsIG9wdHMpO1xuICAgICAgICB0aGlzLnNlY3VyZSA9XG4gICAgICAgICAgICBudWxsICE9IG9wdHMuc2VjdXJlXG4gICAgICAgICAgICAgICAgPyBvcHRzLnNlY3VyZVxuICAgICAgICAgICAgICAgIDogdHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIFwiaHR0cHM6XCIgPT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICBpZiAob3B0cy5ob3N0bmFtZSAmJiAhb3B0cy5wb3J0KSB7XG4gICAgICAgICAgICAvLyBpZiBubyBwb3J0IGlzIHNwZWNpZmllZCBtYW51YWxseSwgdXNlIHRoZSBwcm90b2NvbCBkZWZhdWx0XG4gICAgICAgICAgICBvcHRzLnBvcnQgPSB0aGlzLnNlY3VyZSA/IFwiNDQzXCIgOiBcIjgwXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3N0bmFtZSA9XG4gICAgICAgICAgICBvcHRzLmhvc3RuYW1lIHx8XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiA/IGxvY2F0aW9uLmhvc3RuYW1lIDogXCJsb2NhbGhvc3RcIik7XG4gICAgICAgIHRoaXMucG9ydCA9XG4gICAgICAgICAgICBvcHRzLnBvcnQgfHxcbiAgICAgICAgICAgICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIGxvY2F0aW9uLnBvcnRcbiAgICAgICAgICAgICAgICAgICAgPyBsb2NhdGlvbi5wb3J0XG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5zZWN1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCI0NDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIjgwXCIpO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydHMgPSBvcHRzLnRyYW5zcG9ydHMgfHwgW1xuICAgICAgICAgICAgXCJwb2xsaW5nXCIsXG4gICAgICAgICAgICBcIndlYnNvY2tldFwiLFxuICAgICAgICAgICAgXCJ3ZWJ0cmFuc3BvcnRcIixcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy53cml0ZUJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSAwO1xuICAgICAgICB0aGlzLm9wdHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHBhdGg6IFwiL2VuZ2luZS5pb1wiLFxuICAgICAgICAgICAgYWdlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSxcbiAgICAgICAgICAgIHVwZ3JhZGU6IHRydWUsXG4gICAgICAgICAgICB0aW1lc3RhbXBQYXJhbTogXCJ0XCIsXG4gICAgICAgICAgICByZW1lbWJlclVwZ3JhZGU6IGZhbHNlLFxuICAgICAgICAgICAgYWRkVHJhaWxpbmdTbGFzaDogdHJ1ZSxcbiAgICAgICAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogdHJ1ZSxcbiAgICAgICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlOiB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAxMDI0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zcG9ydE9wdGlvbnM6IHt9LFxuICAgICAgICAgICAgY2xvc2VPbkJlZm9yZXVubG9hZDogZmFsc2UsXG4gICAgICAgIH0sIG9wdHMpO1xuICAgICAgICB0aGlzLm9wdHMucGF0aCA9XG4gICAgICAgICAgICB0aGlzLm9wdHMucGF0aC5yZXBsYWNlKC9cXC8kLywgXCJcIikgK1xuICAgICAgICAgICAgICAgICh0aGlzLm9wdHMuYWRkVHJhaWxpbmdTbGFzaCA/IFwiL1wiIDogXCJcIik7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRzLnF1ZXJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLm9wdHMucXVlcnkgPSBkZWNvZGUodGhpcy5vcHRzLnF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgb24gaGFuZHNoYWtlXG4gICAgICAgIHRoaXMuaWQgPSBudWxsO1xuICAgICAgICB0aGlzLnVwZ3JhZGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5waW5nSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgLy8gc2V0IG9uIGhlYXJ0YmVhdFxuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0VGltZXIgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5jbG9zZU9uQmVmb3JldW5sb2FkKSB7XG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCBjbG9zZXMgdGhlIGNvbm5lY3Rpb24gd2hlbiB0aGUgXCJiZWZvcmV1bmxvYWRcIiBldmVudCBpcyBlbWl0dGVkIGJ1dCBub3QgQ2hyb21lLiBUaGlzIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlcyBldmVyeSBicm93c2VyIGJlaGF2ZXMgdGhlIHNhbWUgKG5vIFwiZGlzY29ubmVjdFwiIGV2ZW50IGF0IHRoZSBTb2NrZXQuSU8gbGV2ZWwgd2hlbiB0aGUgcGFnZSBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NlZC9yZWxvYWRlZClcbiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZXVubG9hZEV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2lsZW50bHkgY2xvc2UgdGhlIHRyYW5zcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIHRoaXMuYmVmb3JldW5sb2FkRXZlbnRMaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaG9zdG5hbWUgIT09IFwibG9jYWxob3N0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZmxpbmVFdmVudExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwibmV0d29yayBjb25uZWN0aW9uIGxvc3RcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLm9mZmxpbmVFdmVudExpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdHJhbnNwb3J0IG9mIHRoZSBnaXZlbiB0eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSB0cmFuc3BvcnQgbmFtZVxuICAgICAqIEByZXR1cm4ge1RyYW5zcG9ydH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGNyZWF0ZVRyYW5zcG9ydChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRzLnF1ZXJ5KTtcbiAgICAgICAgLy8gYXBwZW5kIGVuZ2luZS5pbyBwcm90b2NvbCBpZGVudGlmaWVyXG4gICAgICAgIHF1ZXJ5LkVJTyA9IHByb3RvY29sO1xuICAgICAgICAvLyB0cmFuc3BvcnQgbmFtZVxuICAgICAgICBxdWVyeS50cmFuc3BvcnQgPSBuYW1lO1xuICAgICAgICAvLyBzZXNzaW9uIGlkIGlmIHdlIGFscmVhZHkgaGF2ZSBvbmVcbiAgICAgICAgaWYgKHRoaXMuaWQpXG4gICAgICAgICAgICBxdWVyeS5zaWQgPSB0aGlzLmlkO1xuICAgICAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRzLCB7XG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIHNvY2tldDogdGhpcyxcbiAgICAgICAgICAgIGhvc3RuYW1lOiB0aGlzLmhvc3RuYW1lLFxuICAgICAgICAgICAgc2VjdXJlOiB0aGlzLnNlY3VyZSxcbiAgICAgICAgICAgIHBvcnQ6IHRoaXMucG9ydCxcbiAgICAgICAgfSwgdGhpcy5vcHRzLnRyYW5zcG9ydE9wdGlvbnNbbmFtZV0pO1xuICAgICAgICByZXR1cm4gbmV3IHRyYW5zcG9ydHNbbmFtZV0ob3B0cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIHRyYW5zcG9ydCB0byB1c2UgYW5kIHN0YXJ0cyBwcm9iZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb3BlbigpIHtcbiAgICAgICAgbGV0IHRyYW5zcG9ydDtcbiAgICAgICAgaWYgKHRoaXMub3B0cy5yZW1lbWJlclVwZ3JhZGUgJiZcbiAgICAgICAgICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgJiZcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0cy5pbmRleE9mKFwid2Vic29ja2V0XCIpICE9PSAtMSkge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gXCJ3ZWJzb2NrZXRcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgwID09PSB0aGlzLnRyYW5zcG9ydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBFbWl0IGVycm9yIG9uIG5leHQgdGljayBzbyBpdCBjYW4gYmUgbGlzdGVuZWQgdG9cbiAgICAgICAgICAgIHRoaXMuc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImVycm9yXCIsIFwiTm8gdHJhbnNwb3J0cyBhdmFpbGFibGVcIik7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IHRoaXMudHJhbnNwb3J0c1swXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjtcbiAgICAgICAgLy8gUmV0cnkgd2l0aCB0aGUgbmV4dCB0cmFuc3BvcnQgaWYgdGhlIHRyYW5zcG9ydCBpcyBkaXNhYmxlZCAoanNvbnA6IGZhbHNlKVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gdGhpcy5jcmVhdGVUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc3BvcnQub3BlbigpO1xuICAgICAgICB0aGlzLnNldFRyYW5zcG9ydCh0cmFuc3BvcnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHRyYW5zcG9ydC4gRGlzYWJsZXMgdGhlIGV4aXN0aW5nIG9uZSAoaWYgYW55KS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc3BvcnQpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCB1cCB0cmFuc3BvcnRcbiAgICAgICAgdGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG4gICAgICAgIC8vIHNldCB1cCB0cmFuc3BvcnQgbGlzdGVuZXJzXG4gICAgICAgIHRyYW5zcG9ydFxuICAgICAgICAgICAgLm9uKFwiZHJhaW5cIiwgdGhpcy5vbkRyYWluLmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oXCJwYWNrZXRcIiwgdGhpcy5vblBhY2tldC5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgLm9uKFwiZXJyb3JcIiwgdGhpcy5vbkVycm9yLmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oXCJjbG9zZVwiLCAocmVhc29uKSA9PiB0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIiwgcmVhc29uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2JlcyBhIHRyYW5zcG9ydC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gdHJhbnNwb3J0IG5hbWVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByb2JlKG5hbWUpIHtcbiAgICAgICAgbGV0IHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KG5hbWUpO1xuICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XG4gICAgICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgb25UcmFuc3BvcnRPcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZhaWxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInBpbmdcIiwgZGF0YTogXCJwcm9iZVwiIH1dKTtcbiAgICAgICAgICAgIHRyYW5zcG9ydC5vbmNlKFwicGFja2V0XCIsIChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmFpbGVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKFwicG9uZ1wiID09PSBtc2cudHlwZSAmJiBcInByb2JlXCIgPT09IG1zZy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBncmFkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJ1cGdyYWRpbmdcIiwgdHJhbnNwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFuc3BvcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBcIndlYnNvY2tldFwiID09PSB0cmFuc3BvcnQubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQucGF1c2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWxlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJjbG9zZWRcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInVwZ3JhZGVcIiB9XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInVwZ3JhZGVcIiwgdHJhbnNwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZ3JhZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcInByb2JlIGVycm9yXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGVyci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJ1cGdyYWRlRXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gZnJlZXplVHJhbnNwb3J0KCkge1xuICAgICAgICAgICAgaWYgKGZhaWxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBBbnkgY2FsbGJhY2sgY2FsbGVkIGJ5IHRyYW5zcG9ydCBzaG91bGQgYmUgaWdub3JlZCBzaW5jZSBub3dcbiAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICB0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGFuZGxlIGFueSBlcnJvciB0aGF0IGhhcHBlbnMgd2hpbGUgcHJvYmluZ1xuICAgICAgICBjb25zdCBvbmVycm9yID0gKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJwcm9iZSBlcnJvcjogXCIgKyBlcnIpO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgZXJyb3IudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7XG4gICAgICAgICAgICBmcmVlemVUcmFuc3BvcnQoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwidXBncmFkZUVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gb25UcmFuc3BvcnRDbG9zZSgpIHtcbiAgICAgICAgICAgIG9uZXJyb3IoXCJ0cmFuc3BvcnQgY2xvc2VkXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gdGhlIHNvY2tldCBpcyBjbG9zZWQgd2hpbGUgd2UncmUgcHJvYmluZ1xuICAgICAgICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgICAgICAgICAgb25lcnJvcihcInNvY2tldCBjbG9zZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB0aGUgc29ja2V0IGlzIHVwZ3JhZGVkIHdoaWxlIHdlJ3JlIHByb2JpbmdcbiAgICAgICAgZnVuY3Rpb24gb251cGdyYWRlKHRvKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNwb3J0ICYmIHRvLm5hbWUgIT09IHRyYW5zcG9ydC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgZnJlZXplVHJhbnNwb3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgb24gdGhlIHRyYW5zcG9ydCBhbmQgb24gc2VsZlxuICAgICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICAgICAgdHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKFwib3BlblwiLCBvblRyYW5zcG9ydE9wZW4pO1xuICAgICAgICAgICAgdHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIiwgb25lcnJvcik7XG4gICAgICAgICAgICB0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLCBvblRyYW5zcG9ydENsb3NlKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKFwiY2xvc2VcIiwgb25jbG9zZSk7XG4gICAgICAgICAgICB0aGlzLm9mZihcInVwZ3JhZGluZ1wiLCBvbnVwZ3JhZGUpO1xuICAgICAgICB9O1xuICAgICAgICB0cmFuc3BvcnQub25jZShcIm9wZW5cIiwgb25UcmFuc3BvcnRPcGVuKTtcbiAgICAgICAgdHJhbnNwb3J0Lm9uY2UoXCJlcnJvclwiLCBvbmVycm9yKTtcbiAgICAgICAgdHJhbnNwb3J0Lm9uY2UoXCJjbG9zZVwiLCBvblRyYW5zcG9ydENsb3NlKTtcbiAgICAgICAgdGhpcy5vbmNlKFwiY2xvc2VcIiwgb25jbG9zZSk7XG4gICAgICAgIHRoaXMub25jZShcInVwZ3JhZGluZ1wiLCBvbnVwZ3JhZGUpO1xuICAgICAgICBpZiAodGhpcy51cGdyYWRlcy5pbmRleE9mKFwid2VidHJhbnNwb3J0XCIpICE9PSAtMSAmJlxuICAgICAgICAgICAgbmFtZSAhPT0gXCJ3ZWJ0cmFuc3BvcnRcIikge1xuICAgICAgICAgICAgLy8gZmF2b3IgV2ViVHJhbnNwb3J0XG4gICAgICAgICAgICB0aGlzLnNldFRpbWVvdXRGbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFmYWlsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0Lm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNwb3J0Lm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBjb25uZWN0aW9uIGlzIGRlZW1lZCBvcGVuLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlblwiO1xuICAgICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gXCJ3ZWJzb2NrZXRcIiA9PT0gdGhpcy50cmFuc3BvcnQubmFtZTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciBgcmVhZHlTdGF0ZWAgaW4gY2FzZSBhbiBgb3BlbmBcbiAgICAgICAgLy8gbGlzdGVuZXIgYWxyZWFkeSBjbG9zZWQgdGhlIHNvY2tldFxuICAgICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLm9wdHMudXBncmFkZSkge1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgY29uc3QgbCA9IHRoaXMudXBncmFkZXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2JlKHRoaXMudXBncmFkZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uUGFja2V0KHBhY2tldCkge1xuICAgICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgICAgICAgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgICAgICAgXCJjbG9zaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgIC8vIFNvY2tldCBpcyBsaXZlIC0gYW55IHBhY2tldCBjb3VudHNcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiaGVhcnRiZWF0XCIpO1xuICAgICAgICAgICAgc3dpdGNoIChwYWNrZXQudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25IYW5kc2hha2UoSlNPTi5wYXJzZShwYWNrZXQuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicGluZ1wiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0UGluZ1RpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kUGFja2V0KFwicG9uZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBvbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJzZXJ2ZXIgZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgZXJyLmNvZGUgPSBwYWNrZXQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZGF0YVwiLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwibWVzc2FnZVwiLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGhhbmRzaGFrZSBjb21wbGV0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBoYW5kc2hha2Ugb2JqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbkhhbmRzaGFrZShkYXRhKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiaGFuZHNoYWtlXCIsIGRhdGEpO1xuICAgICAgICB0aGlzLmlkID0gZGF0YS5zaWQ7XG4gICAgICAgIHRoaXMudHJhbnNwb3J0LnF1ZXJ5LnNpZCA9IGRhdGEuc2lkO1xuICAgICAgICB0aGlzLnVwZ3JhZGVzID0gdGhpcy5maWx0ZXJVcGdyYWRlcyhkYXRhLnVwZ3JhZGVzKTtcbiAgICAgICAgdGhpcy5waW5nSW50ZXJ2YWwgPSBkYXRhLnBpbmdJbnRlcnZhbDtcbiAgICAgICAgdGhpcy5waW5nVGltZW91dCA9IGRhdGEucGluZ1RpbWVvdXQ7XG4gICAgICAgIHRoaXMubWF4UGF5bG9hZCA9IGRhdGEubWF4UGF5bG9hZDtcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgLy8gSW4gY2FzZSBvcGVuIGhhbmRsZXIgY2xvc2VzIHNvY2tldFxuICAgICAgICBpZiAoXCJjbG9zZWRcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnJlc2V0UGluZ1RpbWVvdXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhbmQgcmVzZXRzIHBpbmcgdGltZW91dCB0aW1lciBiYXNlZCBvbiBzZXJ2ZXIgcGluZ3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHJlc2V0UGluZ1RpbWVvdXQoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0Rm4odGhpcy5waW5nVGltZW91dFRpbWVyKTtcbiAgICAgICAgdGhpcy5waW5nVGltZW91dFRpbWVyID0gdGhpcy5zZXRUaW1lb3V0Rm4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkNsb3NlKFwicGluZyB0aW1lb3V0XCIpO1xuICAgICAgICB9LCB0aGlzLnBpbmdJbnRlcnZhbCArIHRoaXMucGluZ1RpbWVvdXQpO1xuICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgdGhpcy5waW5nVGltZW91dFRpbWVyLnVucmVmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIG9uIGBkcmFpbmAgZXZlbnRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25EcmFpbigpIHtcbiAgICAgICAgdGhpcy53cml0ZUJ1ZmZlci5zcGxpY2UoMCwgdGhpcy5wcmV2QnVmZmVyTGVuKTtcbiAgICAgICAgLy8gc2V0dGluZyBwcmV2QnVmZmVyTGVuID0gMCBpcyB2ZXJ5IGltcG9ydGFudFxuICAgICAgICAvLyBmb3IgZXhhbXBsZSwgd2hlbiB1cGdyYWRpbmcsIHVwZ3JhZGUgcGFja2V0IGlzIHNlbnQgb3ZlcixcbiAgICAgICAgLy8gYW5kIGEgbm9uemVybyBwcmV2QnVmZmVyTGVuIGNvdWxkIGNhdXNlIHByb2JsZW1zIG9uIGBkcmFpbmBcbiAgICAgICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gMDtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImRyYWluXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZsdXNoIHdyaXRlIGJ1ZmZlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGZsdXNoKCkge1xuICAgICAgICBpZiAoXCJjbG9zZWRcIiAhPT0gdGhpcy5yZWFkeVN0YXRlICYmXG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC53cml0YWJsZSAmJlxuICAgICAgICAgICAgIXRoaXMudXBncmFkaW5nICYmXG4gICAgICAgICAgICB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcGFja2V0cyA9IHRoaXMuZ2V0V3JpdGFibGVQYWNrZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKHBhY2tldHMpO1xuICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiBjdXJyZW50IGxlbmd0aCBvZiB3cml0ZUJ1ZmZlclxuICAgICAgICAgICAgLy8gc3BsaWNlIHdyaXRlQnVmZmVyIGFuZCBjYWxsYmFja0J1ZmZlciBvbiBgZHJhaW5gXG4gICAgICAgICAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSBwYWNrZXRzLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZmx1c2hcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlIHRoZSBlbmNvZGVkIHNpemUgb2YgdGhlIHdyaXRlQnVmZmVyIGlzIGJlbG93IHRoZSBtYXhQYXlsb2FkIHZhbHVlIHNlbnQgYnkgdGhlIHNlcnZlciAob25seSBmb3IgSFRUUFxuICAgICAqIGxvbmctcG9sbGluZylcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZ2V0V3JpdGFibGVQYWNrZXRzKCkge1xuICAgICAgICBjb25zdCBzaG91bGRDaGVja1BheWxvYWRTaXplID0gdGhpcy5tYXhQYXlsb2FkICYmXG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5uYW1lID09PSBcInBvbGxpbmdcIiAmJlxuICAgICAgICAgICAgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGggPiAxO1xuICAgICAgICBpZiAoIXNob3VsZENoZWNrUGF5bG9hZFNpemUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlQnVmZmVyO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXlsb2FkU2l6ZSA9IDE7IC8vIGZpcnN0IHBhY2tldCB0eXBlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMud3JpdGVCdWZmZXJbaV0uZGF0YTtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFNpemUgKz0gYnl0ZUxlbmd0aChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID4gMCAmJiBwYXlsb2FkU2l6ZSA+IHRoaXMubWF4UGF5bG9hZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlQnVmZmVyLnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF5bG9hZFNpemUgKz0gMjsgLy8gc2VwYXJhdG9yICsgcGFja2V0IHR5cGVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53cml0ZUJ1ZmZlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBtZXNzYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1zZyAtIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7U29ja2V0fSBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgd3JpdGUobXNnLCBvcHRpb25zLCBmbikge1xuICAgICAgICB0aGlzLnNlbmRQYWNrZXQoXCJtZXNzYWdlXCIsIG1zZywgb3B0aW9ucywgZm4pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2VuZChtc2csIG9wdGlvbnMsIGZuKSB7XG4gICAgICAgIHRoaXMuc2VuZFBhY2tldChcIm1lc3NhZ2VcIiwgbXNnLCBvcHRpb25zLCBmbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlOiBwYWNrZXQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc2VuZFBhY2tldCh0eXBlLCBkYXRhLCBvcHRpb25zLCBmbikge1xuICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgZGF0YSkge1xuICAgICAgICAgICAgZm4gPSBkYXRhO1xuICAgICAgICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgZm4gPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiY2xvc2luZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJjbG9zZWRcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMuY29tcHJlc3MgPSBmYWxzZSAhPT0gb3B0aW9ucy5jb21wcmVzcztcbiAgICAgICAgY29uc3QgcGFja2V0ID0ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBhY2tldENyZWF0ZVwiLCBwYWNrZXQpO1xuICAgICAgICB0aGlzLndyaXRlQnVmZmVyLnB1c2gocGFja2V0KTtcbiAgICAgICAgaWYgKGZuKVxuICAgICAgICAgICAgdGhpcy5vbmNlKFwiZmx1c2hcIiwgZm4pO1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgY29uc3QgY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoXCJmb3JjZWQgY2xvc2VcIik7XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjbGVhbnVwQW5kQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZihcInVwZ3JhZGVcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKFwidXBncmFkZUVycm9yXCIsIGNsZWFudXBBbmRDbG9zZSk7XG4gICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB3YWl0Rm9yVXBncmFkZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIHdhaXQgZm9yIHVwZ3JhZGUgdG8gZmluaXNoIHNpbmNlIHdlIGNhbid0IHNlbmQgcGFja2V0cyB3aGlsZSBwYXVzaW5nIGEgdHJhbnNwb3J0XG4gICAgICAgICAgICB0aGlzLm9uY2UoXCJ1cGdyYWRlXCIsIGNsZWFudXBBbmRDbG9zZSk7XG4gICAgICAgICAgICB0aGlzLm9uY2UoXCJ1cGdyYWRlRXJyb3JcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJjbG9zaW5nXCI7XG4gICAgICAgICAgICBpZiAodGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uY2UoXCJkcmFpblwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwZ3JhZGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdEZvclVwZ3JhZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudXBncmFkaW5nKSB7XG4gICAgICAgICAgICAgICAgd2FpdEZvclVwZ3JhZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHRyYW5zcG9ydCBlcnJvclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbkVycm9yKGVycikge1xuICAgICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGVycm9yXCIsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHRyYW5zcG9ydCBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25DbG9zZShyZWFzb24sIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8XG4gICAgICAgICAgICBcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlIHx8XG4gICAgICAgICAgICBcImNsb3NpbmdcIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAvLyBjbGVhciB0aW1lcnNcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0Rm4odGhpcy5waW5nVGltZW91dFRpbWVyKTtcbiAgICAgICAgICAgIC8vIHN0b3AgZXZlbnQgZnJvbSBmaXJpbmcgYWdhaW4gZm9yIHRyYW5zcG9ydFxuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKFwiY2xvc2VcIik7XG4gICAgICAgICAgICAvLyBlbnN1cmUgdHJhbnNwb3J0IHdvbid0IHN0YXkgb3BlblxuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQuY2xvc2UoKTtcbiAgICAgICAgICAgIC8vIGlnbm9yZSBmdXJ0aGVyIHRyYW5zcG9ydCBjb21tdW5pY2F0aW9uXG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCB0aGlzLmJlZm9yZXVubG9hZEV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLm9mZmxpbmVFdmVudExpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZXQgcmVhZHkgc3RhdGVcbiAgICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgICAgICAvLyBjbGVhciBzZXNzaW9uIGlkXG4gICAgICAgICAgICB0aGlzLmlkID0gbnVsbDtcbiAgICAgICAgICAgIC8vIGVtaXQgY2xvc2UgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY2xvc2VcIiwgcmVhc29uLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAvLyBjbGVhbiBidWZmZXJzIGFmdGVyLCBzbyB1c2VycyBjYW4gc3RpbGxcbiAgICAgICAgICAgIC8vIGdyYWIgdGhlIGJ1ZmZlcnMgb24gYGNsb3NlYCBldmVudFxuICAgICAgICAgICAgdGhpcy53cml0ZUJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXJzIHVwZ3JhZGVzLCByZXR1cm5pbmcgb25seSB0aG9zZSBtYXRjaGluZyBjbGllbnQgdHJhbnNwb3J0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVwZ3JhZGVzIC0gc2VydmVyIHVwZ3JhZGVzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBmaWx0ZXJVcGdyYWRlcyh1cGdyYWRlcykge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZFVwZ3JhZGVzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgaiA9IHVwZ3JhZGVzLmxlbmd0aDtcbiAgICAgICAgZm9yICg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh+dGhpcy50cmFuc3BvcnRzLmluZGV4T2YodXBncmFkZXNbaV0pKVxuICAgICAgICAgICAgICAgIGZpbHRlcmVkVXBncmFkZXMucHVzaCh1cGdyYWRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkVXBncmFkZXM7XG4gICAgfVxufVxuU29ja2V0LnByb3RvY29sID0gcHJvdG9jb2w7XG4iLCJpbXBvcnQgeyBTb2NrZXQgfSBmcm9tIFwiLi9zb2NrZXQuanNcIjtcbmV4cG9ydCB7IFNvY2tldCB9O1xuZXhwb3J0IGNvbnN0IHByb3RvY29sID0gU29ja2V0LnByb3RvY29sO1xuZXhwb3J0IHsgVHJhbnNwb3J0IH0gZnJvbSBcIi4vdHJhbnNwb3J0LmpzXCI7XG5leHBvcnQgeyB0cmFuc3BvcnRzIH0gZnJvbSBcIi4vdHJhbnNwb3J0cy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgaW5zdGFsbFRpbWVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IHsgcGFyc2UgfSBmcm9tIFwiLi9jb250cmliL3BhcnNldXJpLmpzXCI7XG5leHBvcnQgeyBuZXh0VGljayB9IGZyb20gXCIuL3RyYW5zcG9ydHMvd2Vic29ja2V0LWNvbnN0cnVjdG9yLmpzXCI7XG4iLCJjb25zdCB3aXRoTmF0aXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IGlzVmlldyA9IChvYmopID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gQXJyYXlCdWZmZXIuaXNWaWV3KG9iailcbiAgICAgICAgOiBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG59O1xuY29uc3QgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3Qgd2l0aE5hdGl2ZUJsb2IgPSB0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgKHR5cGVvZiBCbG9iICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwoQmxvYikgPT09IFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCIpO1xuY29uc3Qgd2l0aE5hdGl2ZUZpbGUgPSB0eXBlb2YgRmlsZSA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwoRmlsZSkgPT09IFwiW29iamVjdCBGaWxlQ29uc3RydWN0b3JdXCIpO1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGEgQnVmZmVyLCBhbiBBcnJheUJ1ZmZlciwgYSBCbG9iIG9yIGEgRmlsZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNCaW5hcnkob2JqKSB7XG4gICAgcmV0dXJuICgod2l0aE5hdGl2ZUFycmF5QnVmZmVyICYmIChvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBpc1ZpZXcob2JqKSkpIHx8XG4gICAgICAgICh3aXRoTmF0aXZlQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iKSB8fFxuICAgICAgICAod2l0aE5hdGl2ZUZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0JpbmFyeShvYmosIHRvSlNPTikge1xuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYgKGhhc0JpbmFyeShvYmpbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaXNCaW5hcnkob2JqKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9iai50b0pTT04gJiZcbiAgICAgICAgdHlwZW9mIG9iai50b0pTT04gPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICBhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBoYXNCaW5hcnkob2JqLnRvSlNPTigpLCB0cnVlKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpICYmIGhhc0JpbmFyeShvYmpba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiIsImltcG9ydCB7IGlzQmluYXJ5IH0gZnJvbSBcIi4vaXMtYmluYXJ5LmpzXCI7XG4vKipcbiAqIFJlcGxhY2VzIGV2ZXJ5IEJ1ZmZlciB8IEFycmF5QnVmZmVyIHwgQmxvYiB8IEZpbGUgaW4gcGFja2V0IHdpdGggYSBudW1iZXJlZCBwbGFjZWhvbGRlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFja2V0IC0gc29ja2V0LmlvIGV2ZW50IHBhY2tldFxuICogQHJldHVybiB7T2JqZWN0fSB3aXRoIGRlY29uc3RydWN0ZWQgcGFja2V0IGFuZCBsaXN0IG9mIGJ1ZmZlcnNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29uc3RydWN0UGFja2V0KHBhY2tldCkge1xuICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTtcbiAgICBjb25zdCBwYWNrZXREYXRhID0gcGFja2V0LmRhdGE7XG4gICAgY29uc3QgcGFjayA9IHBhY2tldDtcbiAgICBwYWNrLmRhdGEgPSBfZGVjb25zdHJ1Y3RQYWNrZXQocGFja2V0RGF0YSwgYnVmZmVycyk7XG4gICAgcGFjay5hdHRhY2htZW50cyA9IGJ1ZmZlcnMubGVuZ3RoOyAvLyBudW1iZXIgb2YgYmluYXJ5ICdhdHRhY2htZW50cydcbiAgICByZXR1cm4geyBwYWNrZXQ6IHBhY2ssIGJ1ZmZlcnM6IGJ1ZmZlcnMgfTtcbn1cbmZ1bmN0aW9uIF9kZWNvbnN0cnVjdFBhY2tldChkYXRhLCBidWZmZXJzKSB7XG4gICAgaWYgKCFkYXRhKVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBpZiAoaXNCaW5hcnkoZGF0YSkpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB7IF9wbGFjZWhvbGRlcjogdHJ1ZSwgbnVtOiBidWZmZXJzLmxlbmd0aCB9O1xuICAgICAgICBidWZmZXJzLnB1c2goZGF0YSk7XG4gICAgICAgIHJldHVybiBwbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdEYXRhW2ldID0gX2RlY29uc3RydWN0UGFja2V0KGRhdGFbaV0sIGJ1ZmZlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiAhKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICBjb25zdCBuZXdEYXRhID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAgICAgIG5ld0RhdGFba2V5XSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0sIGJ1ZmZlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cbi8qKlxuICogUmVjb25zdHJ1Y3RzIGEgYmluYXJ5IHBhY2tldCBmcm9tIGl0cyBwbGFjZWhvbGRlciBwYWNrZXQgYW5kIGJ1ZmZlcnNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFja2V0IC0gZXZlbnQgcGFja2V0IHdpdGggcGxhY2Vob2xkZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBidWZmZXJzIC0gYmluYXJ5IGJ1ZmZlcnMgdG8gcHV0IGluIHBsYWNlaG9sZGVyIHBvc2l0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fSByZWNvbnN0cnVjdGVkIHBhY2tldFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LCBidWZmZXJzKSB7XG4gICAgcGFja2V0LmRhdGEgPSBfcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LmRhdGEsIGJ1ZmZlcnMpO1xuICAgIGRlbGV0ZSBwYWNrZXQuYXR0YWNobWVudHM7IC8vIG5vIGxvbmdlciB1c2VmdWxcbiAgICByZXR1cm4gcGFja2V0O1xufVxuZnVuY3Rpb24gX3JlY29uc3RydWN0UGFja2V0KGRhdGEsIGJ1ZmZlcnMpIHtcbiAgICBpZiAoIWRhdGEpXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIGlmIChkYXRhICYmIGRhdGEuX3BsYWNlaG9sZGVyID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGlzSW5kZXhWYWxpZCA9IHR5cGVvZiBkYXRhLm51bSA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICAgICAgZGF0YS5udW0gPj0gMCAmJlxuICAgICAgICAgICAgZGF0YS5udW0gPCBidWZmZXJzLmxlbmd0aDtcbiAgICAgICAgaWYgKGlzSW5kZXhWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcnNbZGF0YS5udW1dOyAvLyBhcHByb3ByaWF0ZSBidWZmZXIgKHNob3VsZCBiZSBuYXR1cmFsIG9yZGVyIGFueXdheSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgYXR0YWNobWVudHNcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFbaV0gPSBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtpXSwgYnVmZmVycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtrZXldID0gX3JlY29uc3RydWN0UGFja2V0KGRhdGFba2V5XSwgYnVmZmVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG4iLCJpbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIkBzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXJcIjtcbmltcG9ydCB7IGRlY29uc3RydWN0UGFja2V0LCByZWNvbnN0cnVjdFBhY2tldCB9IGZyb20gXCIuL2JpbmFyeS5qc1wiO1xuaW1wb3J0IHsgaXNCaW5hcnksIGhhc0JpbmFyeSB9IGZyb20gXCIuL2lzLWJpbmFyeS5qc1wiO1xuLyoqXG4gKiBUaGVzZSBzdHJpbmdzIG11c3Qgbm90IGJlIHVzZWQgYXMgZXZlbnQgbmFtZXMsIGFzIHRoZXkgaGF2ZSBhIHNwZWNpYWwgbWVhbmluZy5cbiAqL1xuY29uc3QgUkVTRVJWRURfRVZFTlRTID0gW1xuICAgIFwiY29ubmVjdFwiLFxuICAgIFwiY29ubmVjdF9lcnJvclwiLFxuICAgIFwiZGlzY29ubmVjdFwiLFxuICAgIFwiZGlzY29ubmVjdGluZ1wiLFxuICAgIFwibmV3TGlzdGVuZXJcIixcbiAgICBcInJlbW92ZUxpc3RlbmVyXCIsIC8vIHVzZWQgYnkgdGhlIE5vZGUuanMgRXZlbnRFbWl0dGVyXG5dO1xuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3RvY29sID0gNTtcbmV4cG9ydCB2YXIgUGFja2V0VHlwZTtcbihmdW5jdGlvbiAoUGFja2V0VHlwZSkge1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkNPTk5FQ1RcIl0gPSAwXSA9IFwiQ09OTkVDVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkRJU0NPTk5FQ1RcIl0gPSAxXSA9IFwiRElTQ09OTkVDVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkVWRU5UXCJdID0gMl0gPSBcIkVWRU5UXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiQUNLXCJdID0gM10gPSBcIkFDS1wiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkNPTk5FQ1RfRVJST1JcIl0gPSA0XSA9IFwiQ09OTkVDVF9FUlJPUlwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkJJTkFSWV9FVkVOVFwiXSA9IDVdID0gXCJCSU5BUllfRVZFTlRcIjtcbiAgICBQYWNrZXRUeXBlW1BhY2tldFR5cGVbXCJCSU5BUllfQUNLXCJdID0gNl0gPSBcIkJJTkFSWV9BQ0tcIjtcbn0pKFBhY2tldFR5cGUgfHwgKFBhY2tldFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBBIHNvY2tldC5pbyBFbmNvZGVyIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBjbGFzcyBFbmNvZGVyIHtcbiAgICAvKipcbiAgICAgKiBFbmNvZGVyIGNvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZXBsYWNlciAtIGN1c3RvbSByZXBsYWNlciB0byBwYXNzIGRvd24gdG8gSlNPTi5wYXJzZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcGxhY2VyKSB7XG4gICAgICAgIHRoaXMucmVwbGFjZXIgPSByZXBsYWNlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlIGEgcGFja2V0IGFzIGEgc2luZ2xlIHN0cmluZyBpZiBub24tYmluYXJ5LCBvciBhcyBhXG4gICAgICogYnVmZmVyIHNlcXVlbmNlLCBkZXBlbmRpbmcgb24gcGFja2V0IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gcGFja2V0IG9iamVjdFxuICAgICAqL1xuICAgIGVuY29kZShvYmopIHtcbiAgICAgICAgaWYgKG9iai50eXBlID09PSBQYWNrZXRUeXBlLkVWRU5UIHx8IG9iai50eXBlID09PSBQYWNrZXRUeXBlLkFDSykge1xuICAgICAgICAgICAgaWYgKGhhc0JpbmFyeShvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQXNCaW5hcnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBvYmoudHlwZSA9PT0gUGFja2V0VHlwZS5FVkVOVFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBQYWNrZXRUeXBlLkJJTkFSWV9FVkVOVFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBQYWNrZXRUeXBlLkJJTkFSWV9BQ0ssXG4gICAgICAgICAgICAgICAgICAgIG5zcDogb2JqLm5zcCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb2JqLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBvYmouaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFt0aGlzLmVuY29kZUFzU3RyaW5nKG9iaildO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGUgcGFja2V0IGFzIHN0cmluZy5cbiAgICAgKi9cbiAgICBlbmNvZGVBc1N0cmluZyhvYmopIHtcbiAgICAgICAgLy8gZmlyc3QgaXMgdHlwZVxuICAgICAgICBsZXQgc3RyID0gXCJcIiArIG9iai50eXBlO1xuICAgICAgICAvLyBhdHRhY2htZW50cyBpZiB3ZSBoYXZlIHRoZW1cbiAgICAgICAgaWYgKG9iai50eXBlID09PSBQYWNrZXRUeXBlLkJJTkFSWV9FVkVOVCB8fFxuICAgICAgICAgICAgb2JqLnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0FDSykge1xuICAgICAgICAgICAgc3RyICs9IG9iai5hdHRhY2htZW50cyArIFwiLVwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHdlIGhhdmUgYSBuYW1lc3BhY2Ugb3RoZXIgdGhhbiBgL2BcbiAgICAgICAgLy8gd2UgYXBwZW5kIGl0IGZvbGxvd2VkIGJ5IGEgY29tbWEgYCxgXG4gICAgICAgIGlmIChvYmoubnNwICYmIFwiL1wiICE9PSBvYmoubnNwKSB7XG4gICAgICAgICAgICBzdHIgKz0gb2JqLm5zcCArIFwiLFwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IHRoZSBpZFxuICAgICAgICBpZiAobnVsbCAhPSBvYmouaWQpIHtcbiAgICAgICAgICAgIHN0ciArPSBvYmouaWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8ganNvbiBkYXRhXG4gICAgICAgIGlmIChudWxsICE9IG9iai5kYXRhKSB7XG4gICAgICAgICAgICBzdHIgKz0gSlNPTi5zdHJpbmdpZnkob2JqLmRhdGEsIHRoaXMucmVwbGFjZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZSBwYWNrZXQgYXMgJ2J1ZmZlciBzZXF1ZW5jZScgYnkgcmVtb3ZpbmcgYmxvYnMsIGFuZFxuICAgICAqIGRlY29uc3RydWN0aW5nIHBhY2tldCBpbnRvIG9iamVjdCB3aXRoIHBsYWNlaG9sZGVycyBhbmRcbiAgICAgKiBhIGxpc3Qgb2YgYnVmZmVycy5cbiAgICAgKi9cbiAgICBlbmNvZGVBc0JpbmFyeShvYmopIHtcbiAgICAgICAgY29uc3QgZGVjb25zdHJ1Y3Rpb24gPSBkZWNvbnN0cnVjdFBhY2tldChvYmopO1xuICAgICAgICBjb25zdCBwYWNrID0gdGhpcy5lbmNvZGVBc1N0cmluZyhkZWNvbnN0cnVjdGlvbi5wYWNrZXQpO1xuICAgICAgICBjb25zdCBidWZmZXJzID0gZGVjb25zdHJ1Y3Rpb24uYnVmZmVycztcbiAgICAgICAgYnVmZmVycy51bnNoaWZ0KHBhY2spOyAvLyBhZGQgcGFja2V0IGluZm8gdG8gYmVnaW5uaW5nIG9mIGRhdGEgbGlzdFxuICAgICAgICByZXR1cm4gYnVmZmVyczsgLy8gd3JpdGUgYWxsIHRoZSBidWZmZXJzXG4gICAgfVxufVxuLy8gc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg1MTEyODEvY2hlY2staWYtYS12YWx1ZS1pcy1hbi1vYmplY3QtaW4tamF2YXNjcmlwdFxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cbi8qKlxuICogQSBzb2NrZXQuaW8gRGVjb2RlciBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm4ge09iamVjdH0gZGVjb2RlclxuICovXG5leHBvcnQgY2xhc3MgRGVjb2RlciBleHRlbmRzIEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIERlY29kZXIgY29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHJldml2ZXIgLSBjdXN0b20gcmV2aXZlciB0byBwYXNzIGRvd24gdG8gSlNPTi5zdHJpbmdpZnlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXZpdmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmV2aXZlciA9IHJldml2ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYW4gZW5jb2RlZCBwYWNrZXQgc3RyaW5nIGludG8gcGFja2V0IEpTT04uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqIC0gZW5jb2RlZCBwYWNrZXRcbiAgICAgKi9cbiAgICBhZGQob2JqKSB7XG4gICAgICAgIGxldCBwYWNrZXQ7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZ290IHBsYWludGV4dCBkYXRhIHdoZW4gcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYWNrZXQgPSB0aGlzLmRlY29kZVN0cmluZyhvYmopO1xuICAgICAgICAgICAgY29uc3QgaXNCaW5hcnlFdmVudCA9IHBhY2tldC50eXBlID09PSBQYWNrZXRUeXBlLkJJTkFSWV9FVkVOVDtcbiAgICAgICAgICAgIGlmIChpc0JpbmFyeUV2ZW50IHx8IHBhY2tldC50eXBlID09PSBQYWNrZXRUeXBlLkJJTkFSWV9BQ0spIHtcbiAgICAgICAgICAgICAgICBwYWNrZXQudHlwZSA9IGlzQmluYXJ5RXZlbnQgPyBQYWNrZXRUeXBlLkVWRU5UIDogUGFja2V0VHlwZS5BQ0s7XG4gICAgICAgICAgICAgICAgLy8gYmluYXJ5IHBhY2tldCdzIGpzb25cbiAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBuZXcgQmluYXJ5UmVjb25zdHJ1Y3RvcihwYWNrZXQpO1xuICAgICAgICAgICAgICAgIC8vIG5vIGF0dGFjaG1lbnRzLCBsYWJlbGVkIGJpbmFyeSBidXQgbm8gYmluYXJ5IGRhdGEgdG8gZm9sbG93XG4gICAgICAgICAgICAgICAgaWYgKHBhY2tldC5hdHRhY2htZW50cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbm9uLWJpbmFyeSBmdWxsIHBhY2tldFxuICAgICAgICAgICAgICAgIHN1cGVyLmVtaXRSZXNlcnZlZChcImRlY29kZWRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0JpbmFyeShvYmopIHx8IG9iai5iYXNlNjQpIHtcbiAgICAgICAgICAgIC8vIHJhdyBiaW5hcnkgZGF0YVxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJnb3QgYmluYXJ5IGRhdGEgd2hlbiBub3QgcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYWNrZXQgPSB0aGlzLnJlY29uc3RydWN0b3IudGFrZUJpbmFyeURhdGEob2JqKTtcbiAgICAgICAgICAgICAgICBpZiAocGFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY2VpdmVkIGZpbmFsIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0eXBlOiBcIiArIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlIGEgcGFja2V0IFN0cmluZyAoSlNPTiBkYXRhKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFja2V0XG4gICAgICovXG4gICAgZGVjb2RlU3RyaW5nKHN0cikge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIC8vIGxvb2sgdXAgdHlwZVxuICAgICAgICBjb25zdCBwID0ge1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyKHN0ci5jaGFyQXQoMCkpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoUGFja2V0VHlwZVtwLnR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInVua25vd24gcGFja2V0IHR5cGUgXCIgKyBwLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgYXR0YWNobWVudHMgaWYgdHlwZSBiaW5hcnlcbiAgICAgICAgaWYgKHAudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfRVZFTlQgfHxcbiAgICAgICAgICAgIHAudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IGkgKyAxO1xuICAgICAgICAgICAgd2hpbGUgKHN0ci5jaGFyQXQoKytpKSAhPT0gXCItXCIgJiYgaSAhPSBzdHIubGVuZ3RoKSB7IH1cbiAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IHN0ci5zdWJzdHJpbmcoc3RhcnQsIGkpO1xuICAgICAgICAgICAgaWYgKGJ1ZiAhPSBOdW1iZXIoYnVmKSB8fCBzdHIuY2hhckF0KGkpICE9PSBcIi1cIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgYXR0YWNobWVudHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwLmF0dGFjaG1lbnRzID0gTnVtYmVyKGJ1Zik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbG9vayB1cCBuYW1lc3BhY2UgKGlmIGFueSlcbiAgICAgICAgaWYgKFwiL1wiID09PSBzdHIuY2hhckF0KGkgKyAxKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAoXCIsXCIgPT09IGMpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChpID09PSBzdHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAubnNwID0gc3RyLnN1YnN0cmluZyhzdGFydCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwLm5zcCA9IFwiL1wiO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgaWRcbiAgICAgICAgY29uc3QgbmV4dCA9IHN0ci5jaGFyQXQoaSArIDEpO1xuICAgICAgICBpZiAoXCJcIiAhPT0gbmV4dCAmJiBOdW1iZXIobmV4dCkgPT0gbmV4dCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjIHx8IE51bWJlcihjKSAhPSBjKSB7XG4gICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpID09PSBzdHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAuaWQgPSBOdW1iZXIoc3RyLnN1YnN0cmluZyhzdGFydCwgaSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb29rIHVwIGpzb24gZGF0YVxuICAgICAgICBpZiAoc3RyLmNoYXJBdCgrK2kpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy50cnlQYXJzZShzdHIuc3Vic3RyKGkpKTtcbiAgICAgICAgICAgIGlmIChEZWNvZGVyLmlzUGF5bG9hZFZhbGlkKHAudHlwZSwgcGF5bG9hZCkpIHtcbiAgICAgICAgICAgICAgICBwLmRhdGEgPSBwYXlsb2FkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwYXlsb2FkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICB0cnlQYXJzZShzdHIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0ciwgdGhpcy5yZXZpdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBpc1BheWxvYWRWYWxpZCh0eXBlLCBwYXlsb2FkKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkNPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHBheWxvYWQpO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5DT05ORUNUX0VSUk9SOlxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiB8fCBpc09iamVjdChwYXlsb2FkKTtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5FVkVOVDpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfRVZFTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHBheWxvYWQpICYmXG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcGF5bG9hZFswXSA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBwYXlsb2FkWzBdID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVTRVJWRURfRVZFTlRTLmluZGV4T2YocGF5bG9hZFswXSkgPT09IC0xKSkpO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkFDSzpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfQUNLOlxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlYWxsb2NhdGVzIGEgcGFyc2VyJ3MgcmVzb3VyY2VzXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVjb25zdHJ1Y3RvciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEEgbWFuYWdlciBvZiBhIGJpbmFyeSBldmVudCdzICdidWZmZXIgc2VxdWVuY2UnLiBTaG91bGRcbiAqIGJlIGNvbnN0cnVjdGVkIHdoZW5ldmVyIGEgcGFja2V0IG9mIHR5cGUgQklOQVJZX0VWRU5UIGlzXG4gKiBkZWNvZGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXRcbiAqIEByZXR1cm4ge0JpbmFyeVJlY29uc3RydWN0b3J9IGluaXRpYWxpemVkIHJlY29uc3RydWN0b3JcbiAqL1xuY2xhc3MgQmluYXJ5UmVjb25zdHJ1Y3RvciB7XG4gICAgY29uc3RydWN0b3IocGFja2V0KSB7XG4gICAgICAgIHRoaXMucGFja2V0ID0gcGFja2V0O1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5yZWNvblBhY2sgPSBwYWNrZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBiZSBjYWxsZWQgd2hlbiBiaW5hcnkgZGF0YSByZWNlaXZlZCBmcm9tIGNvbm5lY3Rpb25cbiAgICAgKiBhZnRlciBhIEJJTkFSWV9FVkVOVCBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0J1ZmZlciB8IEFycmF5QnVmZmVyfSBiaW5EYXRhIC0gdGhlIHJhdyBiaW5hcnkgZGF0YSByZWNlaXZlZFxuICAgICAqIEByZXR1cm4ge251bGwgfCBPYmplY3R9IHJldHVybnMgbnVsbCBpZiBtb3JlIGJpbmFyeSBkYXRhIGlzIGV4cGVjdGVkIG9yXG4gICAgICogICBhIHJlY29uc3RydWN0ZWQgcGFja2V0IG9iamVjdCBpZiBhbGwgYnVmZmVycyBoYXZlIGJlZW4gcmVjZWl2ZWQuXG4gICAgICovXG4gICAgdGFrZUJpbmFyeURhdGEoYmluRGF0YSkge1xuICAgICAgICB0aGlzLmJ1ZmZlcnMucHVzaChiaW5EYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVycy5sZW5ndGggPT09IHRoaXMucmVjb25QYWNrLmF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgICAvLyBkb25lIHdpdGggYnVmZmVyIGxpc3RcbiAgICAgICAgICAgIGNvbnN0IHBhY2tldCA9IHJlY29uc3RydWN0UGFja2V0KHRoaXMucmVjb25QYWNrLCB0aGlzLmJ1ZmZlcnMpO1xuICAgICAgICAgICAgdGhpcy5maW5pc2hlZFJlY29uc3RydWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gcGFja2V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbnMgdXAgYmluYXJ5IHBhY2tldCByZWNvbnN0cnVjdGlvbiB2YXJpYWJsZXMuXG4gICAgICovXG4gICAgZmluaXNoZWRSZWNvbnN0cnVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5yZWNvblBhY2sgPSBudWxsO1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gb24ob2JqLCBldiwgZm4pIHtcbiAgICBvYmoub24oZXYsIGZuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gc3ViRGVzdHJveSgpIHtcbiAgICAgICAgb2JqLm9mZihldiwgZm4pO1xuICAgIH07XG59XG4iLCJpbXBvcnQgeyBQYWNrZXRUeXBlIH0gZnJvbSBcInNvY2tldC5pby1wYXJzZXJcIjtcbmltcG9ydCB7IG9uIH0gZnJvbSBcIi4vb24uanNcIjtcbmltcG9ydCB7IEVtaXR0ZXIsIH0gZnJvbSBcIkBzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXJcIjtcbi8qKlxuICogSW50ZXJuYWwgZXZlbnRzLlxuICogVGhlc2UgZXZlbnRzIGNhbid0IGJlIGVtaXR0ZWQgYnkgdGhlIHVzZXIuXG4gKi9cbmNvbnN0IFJFU0VSVkVEX0VWRU5UUyA9IE9iamVjdC5mcmVlemUoe1xuICAgIGNvbm5lY3Q6IDEsXG4gICAgY29ubmVjdF9lcnJvcjogMSxcbiAgICBkaXNjb25uZWN0OiAxLFxuICAgIGRpc2Nvbm5lY3Rpbmc6IDEsXG4gICAgLy8gRXZlbnRFbWl0dGVyIHJlc2VydmVkIGV2ZW50czogaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9ldmVudHMuaHRtbCNldmVudHNfZXZlbnRfbmV3bGlzdGVuZXJcbiAgICBuZXdMaXN0ZW5lcjogMSxcbiAgICByZW1vdmVMaXN0ZW5lcjogMSxcbn0pO1xuLyoqXG4gKiBBIFNvY2tldCBpcyB0aGUgZnVuZGFtZW50YWwgY2xhc3MgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIHNlcnZlci5cbiAqXG4gKiBBIFNvY2tldCBiZWxvbmdzIHRvIGEgY2VydGFpbiBOYW1lc3BhY2UgKGJ5IGRlZmF1bHQgLykgYW5kIHVzZXMgYW4gdW5kZXJseWluZyB7QGxpbmsgTWFuYWdlcn0gdG8gY29tbXVuaWNhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHNvY2tldCA9IGlvKCk7XG4gKlxuICogc29ja2V0Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKFwiY29ubmVjdGVkXCIpO1xuICogfSk7XG4gKlxuICogLy8gc2VuZCBhbiBldmVudCB0byB0aGUgc2VydmVyXG4gKiBzb2NrZXQuZW1pdChcImZvb1wiLCBcImJhclwiKTtcbiAqXG4gKiBzb2NrZXQub24oXCJmb29iYXJcIiwgKCkgPT4ge1xuICogICAvLyBhbiBldmVudCB3YXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyXG4gKiB9KTtcbiAqXG4gKiAvLyB1cG9uIGRpc2Nvbm5lY3Rpb25cbiAqIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgKHJlYXNvbikgPT4ge1xuICogICBjb25zb2xlLmxvZyhgZGlzY29ubmVjdGVkIGR1ZSB0byAke3JlYXNvbn1gKTtcbiAqIH0pO1xuICovXG5leHBvcnQgY2xhc3MgU29ja2V0IGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogYFNvY2tldGAgY29uc3RydWN0b3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaW8sIG5zcCwgb3B0cykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgc29ja2V0IGlzIGN1cnJlbnRseSBjb25uZWN0ZWQgdG8gdGhlIHNlcnZlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogY29uc3Qgc29ja2V0ID0gaW8oKTtcbiAgICAgICAgICpcbiAgICAgICAgICogc29ja2V0Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICAgICAqICAgY29uc29sZS5sb2coc29ja2V0LmNvbm5lY3RlZCk7IC8vIHRydWVcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgICAgKiAgIGNvbnNvbGUubG9nKHNvY2tldC5jb25uZWN0ZWQpOyAvLyBmYWxzZVxuICAgICAgICAgKiB9KTtcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjb25uZWN0aW9uIHN0YXRlIHdhcyByZWNvdmVyZWQgYWZ0ZXIgYSB0ZW1wb3JhcnkgZGlzY29ubmVjdGlvbi4gSW4gdGhhdCBjYXNlLCBhbnkgbWlzc2VkIHBhY2tldHMgd2lsbFxuICAgICAgICAgKiBiZSB0cmFuc21pdHRlZCBieSB0aGUgc2VydmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWNvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1ZmZlciBmb3IgcGFja2V0cyByZWNlaXZlZCBiZWZvcmUgdGhlIENPTk5FQ1QgcGFja2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1ZmZlciBmb3IgcGFja2V0cyB0aGF0IHdpbGwgYmUgc2VudCBvbmNlIHRoZSBzb2NrZXQgaXMgY29ubmVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBxdWV1ZSBvZiBwYWNrZXRzIHRvIGJlIHNlbnQgd2l0aCByZXRyeSBpbiBjYXNlIG9mIGZhaWx1cmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBhY2tldHMgYXJlIHNlbnQgb25lIGJ5IG9uZSwgZWFjaCB3YWl0aW5nIGZvciB0aGUgc2VydmVyIGFja25vd2xlZGdlbWVudCwgaW4gb3JkZXIgdG8gZ3VhcmFudGVlIHRoZSBkZWxpdmVyeSBvcmRlci5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3F1ZXVlID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNlcXVlbmNlIHRvIGdlbmVyYXRlIHRoZSBJRCBvZiB0aGUge0BsaW5rIFF1ZXVlZFBhY2tldH0uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9xdWV1ZVNlcSA9IDA7XG4gICAgICAgIHRoaXMuaWRzID0gMDtcbiAgICAgICAgdGhpcy5hY2tzID0ge307XG4gICAgICAgIHRoaXMuZmxhZ3MgPSB7fTtcbiAgICAgICAgdGhpcy5pbyA9IGlvO1xuICAgICAgICB0aGlzLm5zcCA9IG5zcDtcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5hdXRoKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGggPSBvcHRzLmF1dGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMpO1xuICAgICAgICBpZiAodGhpcy5pby5fYXV0b0Nvbm5lY3QpXG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc29ja2V0IGlzIGN1cnJlbnRseSBkaXNjb25uZWN0ZWRcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3Qgc29ja2V0ID0gaW8oKTtcbiAgICAgKlxuICAgICAqIHNvY2tldC5vbihcImNvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coc29ja2V0LmRpc2Nvbm5lY3RlZCk7IC8vIGZhbHNlXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBzb2NrZXQub24oXCJkaXNjb25uZWN0XCIsICgpID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKHNvY2tldC5kaXNjb25uZWN0ZWQpOyAvLyB0cnVlXG4gICAgICogfSk7XG4gICAgICovXG4gICAgZ2V0IGRpc2Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNvbm5lY3RlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIG9wZW4sIGNsb3NlIGFuZCBwYWNrZXQgZXZlbnRzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN1YkV2ZW50cygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3VicylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaW8gPSB0aGlzLmlvO1xuICAgICAgICB0aGlzLnN1YnMgPSBbXG4gICAgICAgICAgICBvbihpbywgXCJvcGVuXCIsIHRoaXMub25vcGVuLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgb24oaW8sIFwicGFja2V0XCIsIHRoaXMub25wYWNrZXQuYmluZCh0aGlzKSksXG4gICAgICAgICAgICBvbihpbywgXCJlcnJvclwiLCB0aGlzLm9uZXJyb3IuYmluZCh0aGlzKSksXG4gICAgICAgICAgICBvbihpbywgXCJjbG9zZVwiLCB0aGlzLm9uY2xvc2UuYmluZCh0aGlzKSksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIFNvY2tldCB3aWxsIHRyeSB0byByZWNvbm5lY3Qgd2hlbiBpdHMgTWFuYWdlciBjb25uZWN0cyBvciByZWNvbm5lY3RzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBzb2NrZXQgPSBpbygpO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coc29ja2V0LmFjdGl2ZSk7IC8vIHRydWVcbiAgICAgKlxuICAgICAqIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgKHJlYXNvbikgPT4ge1xuICAgICAqICAgaWYgKHJlYXNvbiA9PT0gXCJpbyBzZXJ2ZXIgZGlzY29ubmVjdFwiKSB7XG4gICAgICogICAgIC8vIHRoZSBkaXNjb25uZWN0aW9uIHdhcyBpbml0aWF0ZWQgYnkgdGhlIHNlcnZlciwgeW91IG5lZWQgdG8gbWFudWFsbHkgcmVjb25uZWN0XG4gICAgICogICAgIGNvbnNvbGUubG9nKHNvY2tldC5hY3RpdmUpOyAvLyBmYWxzZVxuICAgICAqICAgfVxuICAgICAqICAgLy8gZWxzZSB0aGUgc29ja2V0IHdpbGwgYXV0b21hdGljYWxseSB0cnkgdG8gcmVjb25uZWN0XG4gICAgICogICBjb25zb2xlLmxvZyhzb2NrZXQuYWN0aXZlKTsgLy8gdHJ1ZVxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc3VicztcbiAgICB9XG4gICAgLyoqXG4gICAgICogXCJPcGVuc1wiIHRoZSBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHNvY2tldCA9IGlvKHtcbiAgICAgKiAgIGF1dG9Db25uZWN0OiBmYWxzZVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogc29ja2V0LmNvbm5lY3QoKTtcbiAgICAgKi9cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgdGhpcy5zdWJFdmVudHMoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlvW1wiX3JlY29ubmVjdGluZ1wiXSlcbiAgICAgICAgICAgIHRoaXMuaW8ub3BlbigpOyAvLyBlbnN1cmUgb3BlblxuICAgICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMuaW8uX3JlYWR5U3RhdGUpXG4gICAgICAgICAgICB0aGlzLm9ub3BlbigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHtAbGluayBjb25uZWN0KCl9LlxuICAgICAqL1xuICAgIG9wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBgbWVzc2FnZWAgZXZlbnQuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBtaW1pY3MgdGhlIFdlYlNvY2tldC5zZW5kKCkgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViU29ja2V0L3NlbmRcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogc29ja2V0LnNlbmQoXCJoZWxsb1wiKTtcbiAgICAgKlxuICAgICAqIC8vIHRoaXMgaXMgZXF1aXZhbGVudCB0b1xuICAgICAqIHNvY2tldC5lbWl0KFwibWVzc2FnZVwiLCBcImhlbGxvXCIpO1xuICAgICAqXG4gICAgICogQHJldHVybiBzZWxmXG4gICAgICovXG4gICAgc2VuZCguLi5hcmdzKSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdChcIm1lc3NhZ2VcIik7XG4gICAgICAgIHRoaXMuZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIGBlbWl0YC5cbiAgICAgKiBJZiB0aGUgZXZlbnQgaXMgaW4gYGV2ZW50c2AsIGl0J3MgZW1pdHRlZCBub3JtYWxseS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogc29ja2V0LmVtaXQoXCJoZWxsb1wiLCBcIndvcmxkXCIpO1xuICAgICAqXG4gICAgICogLy8gYWxsIHNlcmlhbGl6YWJsZSBkYXRhc3RydWN0dXJlcyBhcmUgc3VwcG9ydGVkIChubyBuZWVkIHRvIGNhbGwgSlNPTi5zdHJpbmdpZnkpXG4gICAgICogc29ja2V0LmVtaXQoXCJoZWxsb1wiLCAxLCBcIjJcIiwgeyAzOiBbXCI0XCJdLCA1OiBVaW50OEFycmF5LmZyb20oWzZdKSB9KTtcbiAgICAgKlxuICAgICAqIC8vIHdpdGggYW4gYWNrbm93bGVkZ2VtZW50IGZyb20gdGhlIHNlcnZlclxuICAgICAqIHNvY2tldC5lbWl0KFwiaGVsbG9cIiwgXCJ3b3JsZFwiLCAodmFsKSA9PiB7XG4gICAgICogICAvLyAuLi5cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqL1xuICAgIGVtaXQoZXYsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKFJFU0VSVkVEX0VWRU5UUy5oYXNPd25Qcm9wZXJ0eShldikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXCInICsgZXYudG9TdHJpbmcoKSArICdcIiBpcyBhIHJlc2VydmVkIGV2ZW50IG5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBhcmdzLnVuc2hpZnQoZXYpO1xuICAgICAgICBpZiAodGhpcy5fb3B0cy5yZXRyaWVzICYmICF0aGlzLmZsYWdzLmZyb21RdWV1ZSAmJiAhdGhpcy5mbGFncy52b2xhdGlsZSkge1xuICAgICAgICAgICAgdGhpcy5fYWRkVG9RdWV1ZShhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHtcbiAgICAgICAgICAgIHR5cGU6IFBhY2tldFR5cGUuRVZFTlQsXG4gICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICB9O1xuICAgICAgICBwYWNrZXQub3B0aW9ucyA9IHt9O1xuICAgICAgICBwYWNrZXQub3B0aW9ucy5jb21wcmVzcyA9IHRoaXMuZmxhZ3MuY29tcHJlc3MgIT09IGZhbHNlO1xuICAgICAgICAvLyBldmVudCBhY2sgY2FsbGJhY2tcbiAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmlkcysrO1xuICAgICAgICAgICAgY29uc3QgYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyQWNrQ2FsbGJhY2soaWQsIGFjayk7XG4gICAgICAgICAgICBwYWNrZXQuaWQgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1RyYW5zcG9ydFdyaXRhYmxlID0gdGhpcy5pby5lbmdpbmUgJiZcbiAgICAgICAgICAgIHRoaXMuaW8uZW5naW5lLnRyYW5zcG9ydCAmJlxuICAgICAgICAgICAgdGhpcy5pby5lbmdpbmUudHJhbnNwb3J0LndyaXRhYmxlO1xuICAgICAgICBjb25zdCBkaXNjYXJkUGFja2V0ID0gdGhpcy5mbGFncy52b2xhdGlsZSAmJiAoIWlzVHJhbnNwb3J0V3JpdGFibGUgfHwgIXRoaXMuY29ubmVjdGVkKTtcbiAgICAgICAgaWYgKGRpc2NhcmRQYWNrZXQpIHtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlPdXRnb2luZ0xpc3RlbmVycyhwYWNrZXQpO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQocGFja2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKHBhY2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFncyA9IHt9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJBY2tDYWxsYmFjayhpZCwgYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IChfYSA9IHRoaXMuZmxhZ3MudGltZW91dCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5fb3B0cy5hY2tUaW1lb3V0O1xuICAgICAgICBpZiAodGltZW91dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFja3NbaWRdID0gYWNrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgdGltZXIgPSB0aGlzLmlvLnNldFRpbWVvdXRGbigoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hY2tzW2lkXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VuZEJ1ZmZlcltpXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kQnVmZmVyLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY2suY2FsbCh0aGlzLCBuZXcgRXJyb3IoXCJvcGVyYXRpb24gaGFzIHRpbWVkIG91dFwiKSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmFja3NbaWRdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRoaXMuaW8uY2xlYXJUaW1lb3V0Rm4odGltZXIpO1xuICAgICAgICAgICAgYWNrLmFwcGx5KHRoaXMsIFtudWxsLCAuLi5hcmdzXSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50IGFuZCB3YWl0cyBmb3IgYW4gYWNrbm93bGVkZ2VtZW50XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIHdpdGhvdXQgdGltZW91dFxuICAgICAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc29ja2V0LmVtaXRXaXRoQWNrKFwiaGVsbG9cIiwgXCJ3b3JsZFwiKTtcbiAgICAgKlxuICAgICAqIC8vIHdpdGggYSBzcGVjaWZpYyB0aW1lb3V0XG4gICAgICogdHJ5IHtcbiAgICAgKiAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc29ja2V0LnRpbWVvdXQoMTAwMCkuZW1pdFdpdGhBY2soXCJoZWxsb1wiLCBcIndvcmxkXCIpO1xuICAgICAqIH0gY2F0Y2ggKGVycikge1xuICAgICAqICAgLy8gdGhlIHNlcnZlciBkaWQgbm90IGFja25vd2xlZGdlIHRoZSBldmVudCBpbiB0aGUgZ2l2ZW4gZGVsYXlcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIHdoZW4gdGhlIHNlcnZlciBhY2tub3dsZWRnZXMgdGhlIGV2ZW50XG4gICAgICovXG4gICAgZW1pdFdpdGhBY2soZXYsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gdGhlIHRpbWVvdXQgZmxhZyBpcyBvcHRpb25hbFxuICAgICAgICBjb25zdCB3aXRoRXJyID0gdGhpcy5mbGFncy50aW1lb3V0ICE9PSB1bmRlZmluZWQgfHwgdGhpcy5fb3B0cy5hY2tUaW1lb3V0ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBhcmdzLnB1c2goKGFyZzEsIGFyZzIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAod2l0aEVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnMSA/IHJlamVjdChhcmcxKSA6IHJlc29sdmUoYXJnMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShhcmcxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChldiwgLi4uYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHBhY2tldCB0byB0aGUgcXVldWUuXG4gICAgICogQHBhcmFtIGFyZ3NcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9hZGRUb1F1ZXVlKGFyZ3MpIHtcbiAgICAgICAgbGV0IGFjaztcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWNrZXQgPSB7XG4gICAgICAgICAgICBpZDogdGhpcy5fcXVldWVTZXErKyxcbiAgICAgICAgICAgIHRyeUNvdW50OiAwLFxuICAgICAgICAgICAgcGVuZGluZzogZmFsc2UsXG4gICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgZmxhZ3M6IE9iamVjdC5hc3NpZ24oeyBmcm9tUXVldWU6IHRydWUgfSwgdGhpcy5mbGFncyksXG4gICAgICAgIH07XG4gICAgICAgIGFyZ3MucHVzaCgoZXJyLCAuLi5yZXNwb25zZUFyZ3MpID0+IHtcbiAgICAgICAgICAgIGlmIChwYWNrZXQgIT09IHRoaXMuX3F1ZXVlWzBdKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHBhY2tldCBoYXMgYWxyZWFkeSBiZWVuIGFja25vd2xlZGdlZFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhc0Vycm9yID0gZXJyICE9PSBudWxsO1xuICAgICAgICAgICAgaWYgKGhhc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhY2tldC50cnlDb3VudCA+IHRoaXMuX29wdHMucmV0cmllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGFjaykge1xuICAgICAgICAgICAgICAgICAgICBhY2sobnVsbCwgLi4ucmVzcG9uc2VBcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYWNrZXQucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RyYWluUXVldWUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3F1ZXVlLnB1c2gocGFja2V0KTtcbiAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHF1ZXVlLCBhbmQgd2FpdCBmb3IgYW4gYWNrbm93bGVkZ2VtZW50IGZyb20gdGhlIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gZm9yY2UgLSB3aGV0aGVyIHRvIHJlc2VuZCBhIHBhY2tldCB0aGF0IGhhcyBub3QgYmVlbiBhY2tub3dsZWRnZWQgeWV0XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9kcmFpblF1ZXVlKGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCB8fCB0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWNrZXQgPSB0aGlzLl9xdWV1ZVswXTtcbiAgICAgICAgaWYgKHBhY2tldC5wZW5kaW5nICYmICFmb3JjZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhY2tldC5wZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgcGFja2V0LnRyeUNvdW50Kys7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBwYWNrZXQuZmxhZ3M7XG4gICAgICAgIHRoaXMuZW1pdC5hcHBseSh0aGlzLCBwYWNrZXQuYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgcGFja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhY2tldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcGFja2V0KHBhY2tldCkge1xuICAgICAgICBwYWNrZXQubnNwID0gdGhpcy5uc3A7XG4gICAgICAgIHRoaXMuaW8uX3BhY2tldChwYWNrZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgYG9wZW5gLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbm9wZW4oKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5hdXRoID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5hdXRoKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VuZENvbm5lY3RQYWNrZXQoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbmRDb25uZWN0UGFja2V0KHRoaXMuYXV0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBDT05ORUNUIHBhY2tldCB0byBpbml0aWF0ZSB0aGUgU29ja2V0LklPIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3NlbmRDb25uZWN0UGFja2V0KGRhdGEpIHtcbiAgICAgICAgdGhpcy5wYWNrZXQoe1xuICAgICAgICAgICAgdHlwZTogUGFja2V0VHlwZS5DT05ORUNULFxuICAgICAgICAgICAgZGF0YTogdGhpcy5fcGlkXG4gICAgICAgICAgICAgICAgPyBPYmplY3QuYXNzaWduKHsgcGlkOiB0aGlzLl9waWQsIG9mZnNldDogdGhpcy5fbGFzdE9mZnNldCB9LCBkYXRhKVxuICAgICAgICAgICAgICAgIDogZGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBvciBtYW5hZ2VyIGBlcnJvcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmVycm9yKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImNvbm5lY3RfZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgYGNsb3NlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWFzb25cbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRpb25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uY2xvc2UocmVhc29uLCBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBkZWxldGUgdGhpcy5pZDtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkaXNjb25uZWN0XCIsIHJlYXNvbiwgZGVzY3JpcHRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2l0aCBzb2NrZXQgcGFja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhY2tldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25wYWNrZXQocGFja2V0KSB7XG4gICAgICAgIGNvbnN0IHNhbWVOYW1lc3BhY2UgPSBwYWNrZXQubnNwID09PSB0aGlzLm5zcDtcbiAgICAgICAgaWYgKCFzYW1lTmFtZXNwYWNlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzd2l0Y2ggKHBhY2tldC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQ09OTkVDVDpcbiAgICAgICAgICAgICAgICBpZiAocGFja2V0LmRhdGEgJiYgcGFja2V0LmRhdGEuc2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25jb25uZWN0KHBhY2tldC5kYXRhLnNpZCwgcGFja2V0LmRhdGEucGlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY29ubmVjdF9lcnJvclwiLCBuZXcgRXJyb3IoXCJJdCBzZWVtcyB5b3UgYXJlIHRyeWluZyB0byByZWFjaCBhIFNvY2tldC5JTyBzZXJ2ZXIgaW4gdjIueCB3aXRoIGEgdjMueCBjbGllbnQsIGJ1dCB0aGV5IGFyZSBub3QgY29tcGF0aWJsZSAobW9yZSBpbmZvcm1hdGlvbiBoZXJlOiBodHRwczovL3NvY2tldC5pby9kb2NzL3YzL21pZ3JhdGluZy1mcm9tLTIteC10by0zLTAvKVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkVWRU5UOlxuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkJJTkFSWV9FVkVOVDpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZXZlbnQocGFja2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5BQ0s6XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQklOQVJZX0FDSzpcbiAgICAgICAgICAgICAgICB0aGlzLm9uYWNrKHBhY2tldCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuRElTQ09OTkVDVDpcbiAgICAgICAgICAgICAgICB0aGlzLm9uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkNPTk5FQ1RfRVJST1I6XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKHBhY2tldC5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBlcnIuZGF0YSA9IHBhY2tldC5kYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJjb25uZWN0X2Vycm9yXCIsIGVycik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBzZXJ2ZXIgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmV2ZW50KHBhY2tldCkge1xuICAgICAgICBjb25zdCBhcmdzID0gcGFja2V0LmRhdGEgfHwgW107XG4gICAgICAgIGlmIChudWxsICE9IHBhY2tldC5pZCkge1xuICAgICAgICAgICAgYXJncy5wdXNoKHRoaXMuYWNrKHBhY2tldC5pZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIucHVzaChPYmplY3QuZnJlZXplKGFyZ3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0RXZlbnQoYXJncykge1xuICAgICAgICBpZiAodGhpcy5fYW55TGlzdGVuZXJzICYmIHRoaXMuX2FueUxpc3RlbmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2FueUxpc3RlbmVycy5zbGljZSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdXBlci5lbWl0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICBpZiAodGhpcy5fcGlkICYmIGFyZ3MubGVuZ3RoICYmIHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RPZmZzZXQgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgYW4gYWNrIGNhbGxiYWNrIHRvIGVtaXQgd2l0aCBhbiBldmVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgYWNrKGlkKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBsZXQgc2VudCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIHByZXZlbnQgZG91YmxlIGNhbGxiYWNrc1xuICAgICAgICAgICAgaWYgKHNlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc2VudCA9IHRydWU7XG4gICAgICAgICAgICBzZWxmLnBhY2tldCh7XG4gICAgICAgICAgICAgICAgdHlwZTogUGFja2V0VHlwZS5BQ0ssXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBzZXJ2ZXIgYWNrbm93bGVnZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmFjayhwYWNrZXQpIHtcbiAgICAgICAgY29uc3QgYWNrID0gdGhpcy5hY2tzW3BhY2tldC5pZF07XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBhY2spIHtcbiAgICAgICAgICAgIGFjay5hcHBseSh0aGlzLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hY2tzW3BhY2tldC5pZF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gc2VydmVyIGNvbm5lY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uY29ubmVjdChpZCwgcGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5yZWNvdmVyZWQgPSBwaWQgJiYgdGhpcy5fcGlkID09PSBwaWQ7XG4gICAgICAgIHRoaXMuX3BpZCA9IHBpZDsgLy8gZGVmaW5lZCBvbmx5IGlmIGNvbm5lY3Rpb24gc3RhdGUgcmVjb3ZlcnkgaXMgZW5hYmxlZFxuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZW1pdEJ1ZmZlcmVkKCk7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY29ubmVjdFwiKTtcbiAgICAgICAgdGhpcy5fZHJhaW5RdWV1ZSh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdCBidWZmZXJlZCBldmVudHMgKHJlY2VpdmVkIGFuZCBlbWl0dGVkKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZW1pdEJ1ZmZlcmVkKCkge1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIuZm9yRWFjaCgoYXJncykgPT4gdGhpcy5lbWl0RXZlbnQoYXJncykpO1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goKHBhY2tldCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlPdXRnb2luZ0xpc3RlbmVycyhwYWNrZXQpO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQocGFja2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzZXJ2ZXIgZGlzY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5vbmNsb3NlKFwiaW8gc2VydmVyIGRpc2Nvbm5lY3RcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGZvcmNlZCBjbGllbnQvc2VydmVyIHNpZGUgZGlzY29ubmVjdGlvbnMsXG4gICAgICogdGhpcyBtZXRob2QgZW5zdXJlcyB0aGUgbWFuYWdlciBzdG9wcyB0cmFja2luZyB1cyBhbmRcbiAgICAgKiB0aGF0IHJlY29ubmVjdGlvbnMgZG9uJ3QgZ2V0IHRyaWdnZXJlZCBmb3IgdGhpcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicykge1xuICAgICAgICAgICAgLy8gY2xlYW4gc3Vic2NyaXB0aW9ucyB0byBhdm9pZCByZWNvbm5lY3Rpb25zXG4gICAgICAgICAgICB0aGlzLnN1YnMuZm9yRWFjaCgoc3ViRGVzdHJveSkgPT4gc3ViRGVzdHJveSgpKTtcbiAgICAgICAgICAgIHRoaXMuc3VicyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlvW1wiX2Rlc3Ryb3lcIl0odGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXQgbWFudWFsbHkuIEluIHRoYXQgY2FzZSwgdGhlIHNvY2tldCB3aWxsIG5vdCB0cnkgdG8gcmVjb25uZWN0LlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgbGFzdCBhY3RpdmUgU29ja2V0IGluc3RhbmNlIG9mIHRoZSB7QGxpbmsgTWFuYWdlcn0sIHRoZSBsb3ctbGV2ZWwgY29ubmVjdGlvbiB3aWxsIGJlIGNsb3NlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3Qgc29ja2V0ID0gaW8oKTtcbiAgICAgKlxuICAgICAqIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgKHJlYXNvbikgPT4ge1xuICAgICAqICAgLy8gY29uc29sZS5sb2cocmVhc29uKTsgcHJpbnRzIFwiaW8gY2xpZW50IGRpc2Nvbm5lY3RcIlxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQoeyB0eXBlOiBQYWNrZXRUeXBlLkRJU0NPTk5FQ1QgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIHNvY2tldCBmcm9tIHBvb2xcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgLy8gZmlyZSBldmVudHNcbiAgICAgICAgICAgIHRoaXMub25jbG9zZShcImlvIGNsaWVudCBkaXNjb25uZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Ige0BsaW5rIGRpc2Nvbm5lY3QoKX0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb21wcmVzcyBmbGFnLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBzb2NrZXQuY29tcHJlc3MoZmFsc2UpLmVtaXQoXCJoZWxsb1wiKTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21wcmVzcyAtIGlmIGB0cnVlYCwgY29tcHJlc3NlcyB0aGUgc2VuZGluZyBkYXRhXG4gICAgICogQHJldHVybiBzZWxmXG4gICAgICovXG4gICAgY29tcHJlc3MoY29tcHJlc3MpIHtcbiAgICAgICAgdGhpcy5mbGFncy5jb21wcmVzcyA9IGNvbXByZXNzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1vZGlmaWVyIGZvciBhIHN1YnNlcXVlbnQgZXZlbnQgZW1pc3Npb24gdGhhdCB0aGUgZXZlbnQgbWVzc2FnZSB3aWxsIGJlIGRyb3BwZWQgd2hlbiB0aGlzIHNvY2tldCBpcyBub3RcbiAgICAgKiByZWFkeSB0byBzZW5kIG1lc3NhZ2VzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBzb2NrZXQudm9sYXRpbGUuZW1pdChcImhlbGxvXCIpOyAvLyB0aGUgc2VydmVyIG1heSBvciBtYXkgbm90IHJlY2VpdmUgaXRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbGZcbiAgICAgKi9cbiAgICBnZXQgdm9sYXRpbGUoKSB7XG4gICAgICAgIHRoaXMuZmxhZ3Mudm9sYXRpbGUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1vZGlmaWVyIGZvciBhIHN1YnNlcXVlbnQgZXZlbnQgZW1pc3Npb24gdGhhdCB0aGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhbiBlcnJvciB3aGVuIHRoZVxuICAgICAqIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHdpdGhvdXQgYW4gYWNrbm93bGVkZ2VtZW50IGZyb20gdGhlIHNlcnZlcjpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogc29ja2V0LnRpbWVvdXQoNTAwMCkuZW1pdChcIm15LWV2ZW50XCIsIChlcnIpID0+IHtcbiAgICAgKiAgIGlmIChlcnIpIHtcbiAgICAgKiAgICAgLy8gdGhlIHNlcnZlciBkaWQgbm90IGFja25vd2xlZGdlIHRoZSBldmVudCBpbiB0aGUgZ2l2ZW4gZGVsYXlcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHNlbGZcbiAgICAgKi9cbiAgICB0aW1lb3V0KHRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5mbGFncy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgZmlyZWQgd2hlbiBhbnkgZXZlbnQgaXMgZW1pdHRlZC4gVGhlIGV2ZW50IG5hbWUgaXMgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGVcbiAgICAgKiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogc29ja2V0Lm9uQW55KChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYGdvdCAke2V2ZW50fWApO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICovXG4gICAgb25BbnkobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYW55TGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzIHx8IFtdO1xuICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGZpcmVkIHdoZW4gYW55IGV2ZW50IGlzIGVtaXR0ZWQuIFRoZSBldmVudCBuYW1lIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlXG4gICAgICogY2FsbGJhY2suIFRoZSBsaXN0ZW5lciBpcyBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHNvY2tldC5wcmVwZW5kQW55KChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYGdvdCBldmVudCAke2V2ZW50fWApO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICovXG4gICAgcHJlcGVuZEFueShsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMgPSB0aGlzLl9hbnlMaXN0ZW5lcnMgfHwgW107XG4gICAgICAgIHRoaXMuX2FueUxpc3RlbmVycy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBjYXRjaEFsbExpc3RlbmVyID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgZ290IGV2ZW50ICR7ZXZlbnR9YCk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogc29ja2V0Lm9uQW55KGNhdGNoQWxsTGlzdGVuZXIpO1xuICAgICAqXG4gICAgICogLy8gcmVtb3ZlIGEgc3BlY2lmaWMgbGlzdGVuZXJcbiAgICAgKiBzb2NrZXQub2ZmQW55KGNhdGNoQWxsTGlzdGVuZXIpO1xuICAgICAqXG4gICAgICogLy8gb3IgcmVtb3ZlIGFsbCBsaXN0ZW5lcnNcbiAgICAgKiBzb2NrZXQub2ZmQW55KCk7XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJcbiAgICAgKi9cbiAgICBvZmZBbnkobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hbnlMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdGhhdCBhcmUgbGlzdGVuaW5nIGZvciBhbnkgZXZlbnQgdGhhdCBpcyBzcGVjaWZpZWQuIFRoaXMgYXJyYXkgY2FuIGJlIG1hbmlwdWxhdGVkLFxuICAgICAqIGUuZy4gdG8gcmVtb3ZlIGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICBsaXN0ZW5lcnNBbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbnlMaXN0ZW5lcnMgfHwgW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgZmlyZWQgd2hlbiBhbnkgZXZlbnQgaXMgZW1pdHRlZC4gVGhlIGV2ZW50IG5hbWUgaXMgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGVcbiAgICAgKiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIE5vdGU6IGFja25vd2xlZGdlbWVudHMgc2VudCB0byB0aGUgc2VydmVyIGFyZSBub3QgaW5jbHVkZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHNvY2tldC5vbkFueU91dGdvaW5nKChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYHNlbnQgZXZlbnQgJHtldmVudH1gKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lclxuICAgICAqL1xuICAgIG9uQW55T3V0Z29pbmcobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMgPSB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycyB8fCBbXTtcbiAgICAgICAgdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGZpcmVkIHdoZW4gYW55IGV2ZW50IGlzIGVtaXR0ZWQuIFRoZSBldmVudCBuYW1lIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlXG4gICAgICogY2FsbGJhY2suIFRoZSBsaXN0ZW5lciBpcyBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkuXG4gICAgICpcbiAgICAgKiBOb3RlOiBhY2tub3dsZWRnZW1lbnRzIHNlbnQgdG8gdGhlIHNlcnZlciBhcmUgbm90IGluY2x1ZGVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBzb2NrZXQucHJlcGVuZEFueU91dGdvaW5nKChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYHNlbnQgZXZlbnQgJHtldmVudH1gKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lclxuICAgICAqL1xuICAgIHByZXBlbmRBbnlPdXRnb2luZyhsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycyA9IHRoaXMuX2FueU91dGdvaW5nTGlzdGVuZXJzIHx8IFtdO1xuICAgICAgICB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBjb25zdCBjYXRjaEFsbExpc3RlbmVyID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgc2VudCBldmVudCAke2V2ZW50fWApO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHNvY2tldC5vbkFueU91dGdvaW5nKGNhdGNoQWxsTGlzdGVuZXIpO1xuICAgICAqXG4gICAgICogLy8gcmVtb3ZlIGEgc3BlY2lmaWMgbGlzdGVuZXJcbiAgICAgKiBzb2NrZXQub2ZmQW55T3V0Z29pbmcoY2F0Y2hBbGxMaXN0ZW5lcik7XG4gICAgICpcbiAgICAgKiAvLyBvciByZW1vdmUgYWxsIGxpc3RlbmVyc1xuICAgICAqIHNvY2tldC5vZmZBbnlPdXRnb2luZygpO1xuICAgICAqXG4gICAgICogQHBhcmFtIFtsaXN0ZW5lcl0gLSB0aGUgY2F0Y2gtYWxsIGxpc3RlbmVyIChvcHRpb25hbClcbiAgICAgKi9cbiAgICBvZmZBbnlPdXRnb2luZyhsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXRoaXMuX2FueU91dGdvaW5nTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2FueU91dGdvaW5nTGlzdGVuZXJzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0aGF0IGFyZSBsaXN0ZW5pbmcgZm9yIGFueSBldmVudCB0aGF0IGlzIHNwZWNpZmllZC4gVGhpcyBhcnJheSBjYW4gYmUgbWFuaXB1bGF0ZWQsXG4gICAgICogZS5nLiB0byByZW1vdmUgbGlzdGVuZXJzLlxuICAgICAqL1xuICAgIGxpc3RlbmVyc0FueU91dGdvaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMgfHwgW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgbGlzdGVuZXJzIGZvciBlYWNoIHBhY2tldCBzZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG5vdGlmeU91dGdvaW5nTGlzdGVuZXJzKHBhY2tldCkge1xuICAgICAgICBpZiAodGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMgJiYgdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycy5zbGljZSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcbiAqIEluaXRpYWxpemUgYmFja29mZiB0aW1lciB3aXRoIGBvcHRzYC5cbiAqXG4gKiAtIGBtaW5gIGluaXRpYWwgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgWzEwMF1cbiAqIC0gYG1heGAgbWF4IHRpbWVvdXQgWzEwMDAwXVxuICogLSBgaml0dGVyYCBbMF1cbiAqIC0gYGZhY3RvcmAgWzJdXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBCYWNrb2ZmKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLm1zID0gb3B0cy5taW4gfHwgMTAwO1xuICAgIHRoaXMubWF4ID0gb3B0cy5tYXggfHwgMTAwMDA7XG4gICAgdGhpcy5mYWN0b3IgPSBvcHRzLmZhY3RvciB8fCAyO1xuICAgIHRoaXMuaml0dGVyID0gb3B0cy5qaXR0ZXIgPiAwICYmIG9wdHMuaml0dGVyIDw9IDEgPyBvcHRzLmppdHRlciA6IDA7XG4gICAgdGhpcy5hdHRlbXB0cyA9IDA7XG59XG4vKipcbiAqIFJldHVybiB0aGUgYmFja29mZiBkdXJhdGlvbi5cbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5CYWNrb2ZmLnByb3RvdHlwZS5kdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbXMgPSB0aGlzLm1zICogTWF0aC5wb3codGhpcy5mYWN0b3IsIHRoaXMuYXR0ZW1wdHMrKyk7XG4gICAgaWYgKHRoaXMuaml0dGVyKSB7XG4gICAgICAgIHZhciByYW5kID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgdmFyIGRldmlhdGlvbiA9IE1hdGguZmxvb3IocmFuZCAqIHRoaXMuaml0dGVyICogbXMpO1xuICAgICAgICBtcyA9IChNYXRoLmZsb29yKHJhbmQgKiAxMCkgJiAxKSA9PSAwID8gbXMgLSBkZXZpYXRpb24gOiBtcyArIGRldmlhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWluKG1zLCB0aGlzLm1heCkgfCAwO1xufTtcbi8qKlxuICogUmVzZXQgdGhlIG51bWJlciBvZiBhdHRlbXB0cy5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5CYWNrb2ZmLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmF0dGVtcHRzID0gMDtcbn07XG4vKipcbiAqIFNldCB0aGUgbWluaW11bSBkdXJhdGlvblxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbkJhY2tvZmYucHJvdG90eXBlLnNldE1pbiA9IGZ1bmN0aW9uIChtaW4pIHtcbiAgICB0aGlzLm1zID0gbWluO1xufTtcbi8qKlxuICogU2V0IHRoZSBtYXhpbXVtIGR1cmF0aW9uXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuQmFja29mZi5wcm90b3R5cGUuc2V0TWF4ID0gZnVuY3Rpb24gKG1heCkge1xuICAgIHRoaXMubWF4ID0gbWF4O1xufTtcbi8qKlxuICogU2V0IHRoZSBqaXR0ZXJcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5CYWNrb2ZmLnByb3RvdHlwZS5zZXRKaXR0ZXIgPSBmdW5jdGlvbiAoaml0dGVyKSB7XG4gICAgdGhpcy5qaXR0ZXIgPSBqaXR0ZXI7XG59O1xuIiwiaW1wb3J0IHsgU29ja2V0IGFzIEVuZ2luZSwgaW5zdGFsbFRpbWVyRnVuY3Rpb25zLCBuZXh0VGljaywgfSBmcm9tIFwiZW5naW5lLmlvLWNsaWVudFwiO1xuaW1wb3J0IHsgU29ja2V0IH0gZnJvbSBcIi4vc29ja2V0LmpzXCI7XG5pbXBvcnQgKiBhcyBwYXJzZXIgZnJvbSBcInNvY2tldC5pby1wYXJzZXJcIjtcbmltcG9ydCB7IG9uIH0gZnJvbSBcIi4vb24uanNcIjtcbmltcG9ydCB7IEJhY2tvZmYgfSBmcm9tIFwiLi9jb250cmliL2JhY2tvMi5qc1wiO1xuaW1wb3J0IHsgRW1pdHRlciwgfSBmcm9tIFwiQHNvY2tldC5pby9jb21wb25lbnQtZW1pdHRlclwiO1xuZXhwb3J0IGNsYXNzIE1hbmFnZXIgZXh0ZW5kcyBFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmksIG9wdHMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5zcHMgPSB7fTtcbiAgICAgICAgdGhpcy5zdWJzID0gW107XG4gICAgICAgIGlmICh1cmkgJiYgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHVyaSkge1xuICAgICAgICAgICAgb3B0cyA9IHVyaTtcbiAgICAgICAgICAgIHVyaSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICAgICAgb3B0cy5wYXRoID0gb3B0cy5wYXRoIHx8IFwiL3NvY2tldC5pb1wiO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICBpbnN0YWxsVGltZXJGdW5jdGlvbnModGhpcywgb3B0cyk7XG4gICAgICAgIHRoaXMucmVjb25uZWN0aW9uKG9wdHMucmVjb25uZWN0aW9uICE9PSBmYWxzZSk7XG4gICAgICAgIHRoaXMucmVjb25uZWN0aW9uQXR0ZW1wdHMob3B0cy5yZWNvbm5lY3Rpb25BdHRlbXB0cyB8fCBJbmZpbml0eSk7XG4gICAgICAgIHRoaXMucmVjb25uZWN0aW9uRGVsYXkob3B0cy5yZWNvbm5lY3Rpb25EZWxheSB8fCAxMDAwKTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heChvcHRzLnJlY29ubmVjdGlvbkRlbGF5TWF4IHx8IDUwMDApO1xuICAgICAgICB0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3IoKF9hID0gb3B0cy5yYW5kb21pemF0aW9uRmFjdG9yKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwLjUpO1xuICAgICAgICB0aGlzLmJhY2tvZmYgPSBuZXcgQmFja29mZih7XG4gICAgICAgICAgICBtaW46IHRoaXMucmVjb25uZWN0aW9uRGVsYXkoKSxcbiAgICAgICAgICAgIG1heDogdGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heCgpLFxuICAgICAgICAgICAgaml0dGVyOiB0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3IoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGltZW91dChudWxsID09IG9wdHMudGltZW91dCA/IDIwMDAwIDogb3B0cy50aW1lb3V0KTtcbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgIHRoaXMudXJpID0gdXJpO1xuICAgICAgICBjb25zdCBfcGFyc2VyID0gb3B0cy5wYXJzZXIgfHwgcGFyc2VyO1xuICAgICAgICB0aGlzLmVuY29kZXIgPSBuZXcgX3BhcnNlci5FbmNvZGVyKCk7XG4gICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBfcGFyc2VyLkRlY29kZXIoKTtcbiAgICAgICAgdGhpcy5fYXV0b0Nvbm5lY3QgPSBvcHRzLmF1dG9Db25uZWN0ICE9PSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuX2F1dG9Db25uZWN0KVxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICAgIHJlY29ubmVjdGlvbih2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb247XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbiA9ICEhdjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlY29ubmVjdGlvbkF0dGVtcHRzKHYpIHtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cztcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMgPSB2O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVjb25uZWN0aW9uRGVsYXkodikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXk7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5ID0gdjtcbiAgICAgICAgKF9hID0gdGhpcy5iYWNrb2ZmKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0TWluKHYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmFuZG9taXphdGlvbkZhY3Rvcih2KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yO1xuICAgICAgICB0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yID0gdjtcbiAgICAgICAgKF9hID0gdGhpcy5iYWNrb2ZmKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0Sml0dGVyKHYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVjb25uZWN0aW9uRGVsYXlNYXgodikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5TWF4ID0gdjtcbiAgICAgICAgKF9hID0gdGhpcy5iYWNrb2ZmKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0TWF4KHYpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGltZW91dCh2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aW1lb3V0O1xuICAgICAgICB0aGlzLl90aW1lb3V0ID0gdjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0cnlpbmcgdG8gcmVjb25uZWN0IGlmIHJlY29ubmVjdGlvbiBpcyBlbmFibGVkIGFuZCB3ZSBoYXZlIG5vdFxuICAgICAqIHN0YXJ0ZWQgcmVjb25uZWN0aW5nIHlldFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBtYXliZVJlY29ubmVjdE9uT3BlbigpIHtcbiAgICAgICAgLy8gT25seSB0cnkgdG8gcmVjb25uZWN0IGlmIGl0J3MgdGhlIGZpcnN0IHRpbWUgd2UncmUgY29ubmVjdGluZ1xuICAgICAgICBpZiAoIXRoaXMuX3JlY29ubmVjdGluZyAmJlxuICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uICYmXG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPT09IDApIHtcbiAgICAgICAgICAgIC8vIGtlZXBzIHJlY29ubmVjdGlvbiBmcm9tIGZpcmluZyB0d2ljZSBmb3IgdGhlIHNhbWUgcmVjb25uZWN0aW9uIGxvb3BcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY3VycmVudCB0cmFuc3BvcnQgYHNvY2tldGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIG9wdGlvbmFsLCBjYWxsYmFja1xuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvcGVuKGZuKSB7XG4gICAgICAgIGlmICh+dGhpcy5fcmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB0aGlzLmVuZ2luZSA9IG5ldyBFbmdpbmUodGhpcy51cmksIHRoaXMub3B0cyk7XG4gICAgICAgIGNvbnN0IHNvY2tldCA9IHRoaXMuZW5naW5lO1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwib3BlbmluZ1wiO1xuICAgICAgICB0aGlzLnNraXBSZWNvbm5lY3QgPSBmYWxzZTtcbiAgICAgICAgLy8gZW1pdCBgb3BlbmBcbiAgICAgICAgY29uc3Qgb3BlblN1YkRlc3Ryb3kgPSBvbihzb2NrZXQsIFwib3BlblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLm9ub3BlbigpO1xuICAgICAgICAgICAgZm4gJiYgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJlcnJvclwiLCBlcnIpO1xuICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgICAgZm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZG8gdGhpcyBpZiB0aGVyZSBpcyBubyBmbiB0byBoYW5kbGUgdGhlIGVycm9yXG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZVJlY29ubmVjdE9uT3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBlbWl0IGBlcnJvcmBcbiAgICAgICAgY29uc3QgZXJyb3JTdWIgPSBvbihzb2NrZXQsIFwiZXJyb3JcIiwgb25FcnJvcik7XG4gICAgICAgIGlmIChmYWxzZSAhPT0gdGhpcy5fdGltZW91dCkge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gICAgICAgICAgICAvLyBzZXQgdGltZXJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVyID0gdGhpcy5zZXRUaW1lb3V0Rm4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIG9wZW5TdWJEZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgb25FcnJvcihuZXcgRXJyb3IoXCJ0aW1lb3V0XCIpKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5hdXRvVW5yZWYpIHtcbiAgICAgICAgICAgICAgICB0aW1lci51bnJlZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdWJzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0Rm4odGltZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWJzLnB1c2gob3BlblN1YkRlc3Ryb3kpO1xuICAgICAgICB0aGlzLnN1YnMucHVzaChlcnJvclN1Yik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igb3BlbigpXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29ubmVjdChmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuKGZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gdHJhbnNwb3J0IG9wZW4uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ub3BlbigpIHtcbiAgICAgICAgLy8gY2xlYXIgb2xkIHN1YnNcbiAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIC8vIG1hcmsgYXMgb3BlblxuICAgICAgICB0aGlzLl9yZWFkeVN0YXRlID0gXCJvcGVuXCI7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwib3BlblwiKTtcbiAgICAgICAgLy8gYWRkIG5ldyBzdWJzXG4gICAgICAgIGNvbnN0IHNvY2tldCA9IHRoaXMuZW5naW5lO1xuICAgICAgICB0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsIFwicGluZ1wiLCB0aGlzLm9ucGluZy5iaW5kKHRoaXMpKSwgb24oc29ja2V0LCBcImRhdGFcIiwgdGhpcy5vbmRhdGEuYmluZCh0aGlzKSksIG9uKHNvY2tldCwgXCJlcnJvclwiLCB0aGlzLm9uZXJyb3IuYmluZCh0aGlzKSksIG9uKHNvY2tldCwgXCJjbG9zZVwiLCB0aGlzLm9uY2xvc2UuYmluZCh0aGlzKSksIG9uKHRoaXMuZGVjb2RlciwgXCJkZWNvZGVkXCIsIHRoaXMub25kZWNvZGVkLmJpbmQodGhpcykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gYSBwaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbnBpbmcoKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicGluZ1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdpdGggZGF0YS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kYXRhKGRhdGEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZGVjb2Rlci5hZGQoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMub25jbG9zZShcInBhcnNlIGVycm9yXCIsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHBhcnNlciBmdWxseSBkZWNvZGVzIGEgcGFja2V0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmRlY29kZWQocGFja2V0KSB7XG4gICAgICAgIC8vIHRoZSBuZXh0VGljayBjYWxsIHByZXZlbnRzIGFuIGV4Y2VwdGlvbiBpbiBhIHVzZXItcHJvdmlkZWQgZXZlbnQgbGlzdGVuZXIgZnJvbSB0cmlnZ2VyaW5nIGEgZGlzY29ubmVjdGlvbiBkdWUgdG8gYSBcInBhcnNlIGVycm9yXCJcbiAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICAgICAgfSwgdGhpcy5zZXRUaW1lb3V0Rm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzb2NrZXQgZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uZXJyb3IoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzb2NrZXQgZm9yIHRoZSBnaXZlbiBgbnNwYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1NvY2tldH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc29ja2V0KG5zcCwgb3B0cykge1xuICAgICAgICBsZXQgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG4gICAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgICAgICBzb2NrZXQgPSBuZXcgU29ja2V0KHRoaXMsIG5zcCwgb3B0cyk7XG4gICAgICAgICAgICB0aGlzLm5zcHNbbnNwXSA9IHNvY2tldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9hdXRvQ29ubmVjdCAmJiAhc29ja2V0LmFjdGl2ZSkge1xuICAgICAgICAgICAgc29ja2V0LmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ja2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNvY2tldCBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb2NrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9kZXN0cm95KHNvY2tldCkge1xuICAgICAgICBjb25zdCBuc3BzID0gT2JqZWN0LmtleXModGhpcy5uc3BzKTtcbiAgICAgICAgZm9yIChjb25zdCBuc3Agb2YgbnNwcykge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG4gICAgICAgICAgICBpZiAoc29ja2V0LmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcGFja2V0KHBhY2tldCkge1xuICAgICAgICBjb25zdCBlbmNvZGVkUGFja2V0cyA9IHRoaXMuZW5jb2Rlci5lbmNvZGUocGFja2V0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkUGFja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUud3JpdGUoZW5jb2RlZFBhY2tldHNbaV0sIHBhY2tldC5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cCB0cmFuc3BvcnQgc3Vic2NyaXB0aW9ucyBhbmQgcGFja2V0IGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY2xlYW51cCgpIHtcbiAgICAgICAgdGhpcy5zdWJzLmZvckVhY2goKHN1YkRlc3Ryb3kpID0+IHN1YkRlc3Ryb3koKSk7XG4gICAgICAgIHRoaXMuc3Vicy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmRlY29kZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgY3VycmVudCBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jbG9zZSgpIHtcbiAgICAgICAgdGhpcy5za2lwUmVjb25uZWN0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25jbG9zZShcImZvcmNlZCBjbG9zZVwiKTtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lKVxuICAgICAgICAgICAgdGhpcy5lbmdpbmUuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGNsb3NlKClcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25jbG9zZShyZWFzb24sIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY2xvc2VcIiwgcmVhc29uLCBkZXNjcmlwdGlvbik7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3Rpb24gJiYgIXRoaXMuc2tpcFJlY29ubmVjdCkge1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IGEgcmVjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICByZWNvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3RpbmcgfHwgdGhpcy5za2lwUmVjb25uZWN0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5iYWNrb2ZmLmF0dGVtcHRzID49IHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicmVjb25uZWN0X2ZhaWxlZFwiKTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmJhY2tvZmYuZHVyYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB0aW1lciA9IHRoaXMuc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5za2lwUmVjb25uZWN0KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RfYXR0ZW1wdFwiLCBzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGFnYWluIGZvciB0aGUgY2FzZSBzb2NrZXQgY2xvc2VkIGluIGFib3ZlIGV2ZW50c1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNraXBSZWNvbm5lY3QpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBzZWxmLm9wZW4oKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInJlY29ubmVjdF9lcnJvclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbnJlY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgICAgIHRpbWVyLnVucmVmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRGbih0aW1lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzdWNjZXNzZnVsIHJlY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25yZWNvbm5lY3QoKSB7XG4gICAgICAgIGNvbnN0IGF0dGVtcHQgPSB0aGlzLmJhY2tvZmYuYXR0ZW1wdHM7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RcIiwgYXR0ZW1wdCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdXJsIH0gZnJvbSBcIi4vdXJsLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgU29ja2V0IH0gZnJvbSBcIi4vc29ja2V0LmpzXCI7XG4vKipcbiAqIE1hbmFnZXJzIGNhY2hlLlxuICovXG5jb25zdCBjYWNoZSA9IHt9O1xuZnVuY3Rpb24gbG9va3VwKHVyaSwgb3B0cykge1xuICAgIGlmICh0eXBlb2YgdXJpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG9wdHMgPSB1cmk7XG4gICAgICAgIHVyaSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgY29uc3QgcGFyc2VkID0gdXJsKHVyaSwgb3B0cy5wYXRoIHx8IFwiL3NvY2tldC5pb1wiKTtcbiAgICBjb25zdCBzb3VyY2UgPSBwYXJzZWQuc291cmNlO1xuICAgIGNvbnN0IGlkID0gcGFyc2VkLmlkO1xuICAgIGNvbnN0IHBhdGggPSBwYXJzZWQucGF0aDtcbiAgICBjb25zdCBzYW1lTmFtZXNwYWNlID0gY2FjaGVbaWRdICYmIHBhdGggaW4gY2FjaGVbaWRdW1wibnNwc1wiXTtcbiAgICBjb25zdCBuZXdDb25uZWN0aW9uID0gb3B0cy5mb3JjZU5ldyB8fFxuICAgICAgICBvcHRzW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl0gfHxcbiAgICAgICAgZmFsc2UgPT09IG9wdHMubXVsdGlwbGV4IHx8XG4gICAgICAgIHNhbWVOYW1lc3BhY2U7XG4gICAgbGV0IGlvO1xuICAgIGlmIChuZXdDb25uZWN0aW9uKSB7XG4gICAgICAgIGlvID0gbmV3IE1hbmFnZXIoc291cmNlLCBvcHRzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgICAgICBjYWNoZVtpZF0gPSBuZXcgTWFuYWdlcihzb3VyY2UsIG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlvID0gY2FjaGVbaWRdO1xuICAgIH1cbiAgICBpZiAocGFyc2VkLnF1ZXJ5ICYmICFvcHRzLnF1ZXJ5KSB7XG4gICAgICAgIG9wdHMucXVlcnkgPSBwYXJzZWQucXVlcnlLZXk7XG4gICAgfVxuICAgIHJldHVybiBpby5zb2NrZXQocGFyc2VkLnBhdGgsIG9wdHMpO1xufVxuLy8gc28gdGhhdCBcImxvb2t1cFwiIGNhbiBiZSB1c2VkIGJvdGggYXMgYSBmdW5jdGlvbiAoZS5nLiBgaW8oLi4uKWApIGFuZCBhcyBhXG4vLyBuYW1lc3BhY2UgKGUuZy4gYGlvLmNvbm5lY3QoLi4uKWApLCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuT2JqZWN0LmFzc2lnbihsb29rdXAsIHtcbiAgICBNYW5hZ2VyLFxuICAgIFNvY2tldCxcbiAgICBpbzogbG9va3VwLFxuICAgIGNvbm5lY3Q6IGxvb2t1cCxcbn0pO1xuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHsgcHJvdG9jb2wgfSBmcm9tIFwic29ja2V0LmlvLXBhcnNlclwiO1xuLyoqXG4gKiBFeHBvc2UgY29uc3RydWN0b3JzIGZvciBzdGFuZGFsb25lIGJ1aWxkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHsgTWFuYWdlciwgU29ja2V0LCBsb29rdXAgYXMgaW8sIGxvb2t1cCBhcyBjb25uZWN0LCBsb29rdXAgYXMgZGVmYXVsdCwgfTtcbiIsImltcG9ydCB7IHBhcnNlIH0gZnJvbSBcImVuZ2luZS5pby1jbGllbnRcIjtcbi8qKlxuICogVVJMIHBhcnNlci5cbiAqXG4gKiBAcGFyYW0gdXJpIC0gdXJsXG4gKiBAcGFyYW0gcGF0aCAtIHRoZSByZXF1ZXN0IHBhdGggb2YgdGhlIGNvbm5lY3Rpb25cbiAqIEBwYXJhbSBsb2MgLSBBbiBvYmplY3QgbWVhbnQgdG8gbWltaWMgd2luZG93LmxvY2F0aW9uLlxuICogICAgICAgIERlZmF1bHRzIHRvIHdpbmRvdy5sb2NhdGlvbi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVybCh1cmksIHBhdGggPSBcIlwiLCBsb2MpIHtcbiAgICBsZXQgb2JqID0gdXJpO1xuICAgIC8vIGRlZmF1bHQgdG8gd2luZG93LmxvY2F0aW9uXG4gICAgbG9jID0gbG9jIHx8ICh0eXBlb2YgbG9jYXRpb24gIT09IFwidW5kZWZpbmVkXCIgJiYgbG9jYXRpb24pO1xuICAgIGlmIChudWxsID09IHVyaSlcbiAgICAgICAgdXJpID0gbG9jLnByb3RvY29sICsgXCIvL1wiICsgbG9jLmhvc3Q7XG4gICAgLy8gcmVsYXRpdmUgcGF0aCBzdXBwb3J0XG4gICAgaWYgKHR5cGVvZiB1cmkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKFwiL1wiID09PSB1cmkuY2hhckF0KDApKSB7XG4gICAgICAgICAgICBpZiAoXCIvXCIgPT09IHVyaS5jaGFyQXQoMSkpIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MucHJvdG9jb2wgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MuaG9zdCArIHVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIS9eKGh0dHBzP3x3c3M/KTpcXC9cXC8vLnRlc3QodXJpKSkge1xuICAgICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBsb2MpIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MucHJvdG9jb2wgKyBcIi8vXCIgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBcImh0dHBzOi8vXCIgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGFyc2VcbiAgICAgICAgb2JqID0gcGFyc2UodXJpKTtcbiAgICB9XG4gICAgLy8gbWFrZSBzdXJlIHdlIHRyZWF0IGBsb2NhbGhvc3Q6ODBgIGFuZCBgbG9jYWxob3N0YCBlcXVhbGx5XG4gICAgaWYgKCFvYmoucG9ydCkge1xuICAgICAgICBpZiAoL14oaHR0cHx3cykkLy50ZXN0KG9iai5wcm90b2NvbCkpIHtcbiAgICAgICAgICAgIG9iai5wb3J0ID0gXCI4MFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKC9eKGh0dHB8d3MpcyQvLnRlc3Qob2JqLnByb3RvY29sKSkge1xuICAgICAgICAgICAgb2JqLnBvcnQgPSBcIjQ0M1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9iai5wYXRoID0gb2JqLnBhdGggfHwgXCIvXCI7XG4gICAgY29uc3QgaXB2NiA9IG9iai5ob3N0LmluZGV4T2YoXCI6XCIpICE9PSAtMTtcbiAgICBjb25zdCBob3N0ID0gaXB2NiA/IFwiW1wiICsgb2JqLmhvc3QgKyBcIl1cIiA6IG9iai5ob3N0O1xuICAgIC8vIGRlZmluZSB1bmlxdWUgaWRcbiAgICBvYmouaWQgPSBvYmoucHJvdG9jb2wgKyBcIjovL1wiICsgaG9zdCArIFwiOlwiICsgb2JqLnBvcnQgKyBwYXRoO1xuICAgIC8vIGRlZmluZSBocmVmXG4gICAgb2JqLmhyZWYgPVxuICAgICAgICBvYmoucHJvdG9jb2wgK1xuICAgICAgICAgICAgXCI6Ly9cIiArXG4gICAgICAgICAgICBob3N0ICtcbiAgICAgICAgICAgIChsb2MgJiYgbG9jLnBvcnQgPT09IG9iai5wb3J0ID8gXCJcIiA6IFwiOlwiICsgb2JqLnBvcnQpO1xuICAgIHJldHVybiBvYmo7XG59XG4iLCJpbXBvcnQgeyBpbyB9IGZyb20gXCJzb2NrZXQuaW8tY2xpZW50XCI7XHJcbmV4cG9ydCBjbGFzcyBTb2NrZXRNYW5hZ2VyIHtcclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICBpZiAoU29ja2V0TWFuYWdlci5zb2NrZXQgPT0gdW5kZWZpbmVkIHx8IFNvY2tldE1hbmFnZXIuc29ja2V0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBpbygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gU29ja2V0TWFuYWdlci5zb2NrZXQ7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZU1hbmFnZXIsIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMudGFnID0gXCJFVkVOVEhBTkRMRVJcIjtcclxuICAgICAgICB0aGlzLmVtaXR0ZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlcmVkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gW107XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyID0gc2NlbmVNYW5hZ2VyO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuc29ja2V0LmVtaXQoXCJjbGlja1wiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuc29ja2V0LmVtaXQoXCJrZXlkb3duXCIsIGV2ZW50LmtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJMaXN0ZW5lcihjb21wb25lbnQpIHtcclxuICAgICAgICBsZXQgZW1pdHRlciA9IHRoaXMuZW1pdHRlcnMuZ2V0KGNvbXBvbmVudC5nZXRFdmVudFR5cGUoKSk7XHJcbiAgICAgICAgaWYgKGVtaXR0ZXIpIHtcclxuICAgICAgICAgICAgZW1pdHRlci5hZGRMaXN0ZW5lcihjb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChjb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlZ2lzdGVyRW1pdHRlcihjb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmVtaXR0ZXJzLnNldChjb21wb25lbnQuZ2V0RXZlbnRUeXBlKCksIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlcihjb21wKSB7XHJcbiAgICAgICAgaWYgKGNvbXAuY29tcG9uZW50SWQgPT0gdW5kZWZpbmVkIHx8IGNvbXAuY29tcG9uZW50SWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSB0aGlzLnNjZW5lTWFuYWdlci5nZXRVbmlxdWVDb21wb25lbnRJZCgpO1xyXG4gICAgICAgICAgICBjb21wLmNvbXBvbmVudElkID0gaWQ7XHJcbiAgICAgICAgICAgIGNvbXAuc3lzdGVtID0gdGhpcztcclxuICAgICAgICAgICAgY29tcC5pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGlkLCBjb21wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbXAuc3lzdGVtID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldChjb21wLmNvbXBvbmVudElkLCBjb21wKTtcclxuICAgICAgICAgICAgY29tcC5pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNvY2tldCBNYW5hZ2VyIHJlZ2lzdGVyZWRcIik7XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyKGNvbXApIHtcclxuICAgICAgICBsZXQgZGVsZXRlZCA9IHRoaXMuY29tcG9uZW50cy5nZXQoY29tcCk7XHJcbiAgICAgICAgaWYgKGRlbGV0ZWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlZC5hbGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZWQucHVzaChkZWxldGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkNsaWVudCBTb2NrZXQgSGFuZGxlclwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkNsaWVudCBTb2NrZXQgSGFuZGxlciBDb21wb25lbnRzOlwiICsgdGhpcy5jb21wb25lbnRzLnNpemUpO1xyXG4gICAgICAgIGZvciAobGV0IGVtaXR0ZXIgb2YgdGhpcy5lbWl0dGVycykge1xyXG4gICAgICAgICAgICBlbWl0dGVyWzFdLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBsZXQgZW1pdHRlciA9IHRoaXMuZW1pdHRlcnMuZ2V0KHRoaXMubGlzdGVuZXJzW2ldLmdldEV2ZW50VHlwZSgpKTtcclxuICAgICAgICAgICAgaWYgKGVtaXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGVtaXR0ZXIuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW5lcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNbaV0gPSB0aGlzLmxpc3RlbmVyc1t0aGlzLmxpc3RlbmVycy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLnBvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvY2tldE1hbmFnZXIuanMubWFwIiwiZXhwb3J0IGNsYXNzIFRleHQge1xyXG4gICAgdXBkYXRlKGR0LCBjdHgpIHtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKHRleHQpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZVRhZyA9IFwiR1JBUEhJQ1NcIjtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHsgeDogMTAwLCB5OiAxMDAsIHo6IDAgfTtcclxuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xyXG4gICAgfVxyXG4gICAgdW5tb3VudCgpIHtcclxuICAgIH1cclxuICAgIGNvcHkodGV4dCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SWQgPSB0ZXh0LmNvbXBvbmVudElkO1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gdGV4dC5lbnRpdHk7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dC50ZXh0O1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnggPSB0aGlzLnRyYW5zZm9ybS54O1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnkgPSB0aGlzLnRyYW5zZm9ybS55O1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmN0eC5maWxsVGV4dCh0aGlzLnRleHQsIHRoaXMudHJhbnNmb3JtLngsIHRoaXMudHJhbnNmb3JtLnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICB9XHJcbiAgICBnZXRSZWN0YW5nbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcG9zOiB0aGlzLnRyYW5zZm9ybSxcclxuICAgICAgICAgICAgZGltOiB7IGxlbmd0aDogMCwgaGVpZ2h0OiAwIH0sXHJcbiAgICAgICAgICAgIHJvdDogMFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICB0b0pzb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW50aXR5OiB0aGlzLmVudGl0eSxcclxuICAgICAgICAgICAgZW5naW5lVGFnOiB0aGlzLmVuZ2luZVRhZyxcclxuICAgICAgICAgICAgY29tcG9uZW50SWQ6IHRoaXMuY29tcG9uZW50SWQsXHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCxcclxuICAgICAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlLFxyXG4gICAgICAgICAgICBhbGl2ZTogdGhpcy5hbGl2ZSxcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0aGlzLnRyYW5zZm9ybVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGV4dC5qcy5tYXAiLCJpbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9HcmFwaGljcy9UZXh0LmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBMYWJlbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnRleHQgPSBuZXcgVGV4dChcInRlc3RcIik7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW3RoaXMudGV4dF07XHJcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBcIkxhYmVsXCI7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGFiZWwuanMubWFwIiwiaW1wb3J0IHsgR1JBUEhJQ1NfVEFHIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50cy9jb21wb25lbnRUeXBlLmpzXCI7XHJcbmltcG9ydCB7IGdldFRvcFgsIGdldFRvcFksIHJlY3RhbmdsZUNvcHkgfSBmcm9tIFwiLi4vLi4vdHlwZXMvY29tcG9uZW50cy9jb2xsaXNpb24vc2hhcGUuanNcIjtcclxuZXhwb3J0IGNsYXNzIFRpbWVkU3ByaXRlU2hlZXQge1xyXG4gICAgY29uc3RydWN0b3IocGF0aCwgcmVjdGFuZ2xlLCBkZWxheSwgbGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFsaXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmVuZ2luZVRhZyA9IEdSQVBISUNTX1RBRztcclxuICAgICAgICB0aGlzLnN0YXRlID0gMDtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gcmVjdGFuZ2xlLnBvcztcclxuICAgICAgICB0aGlzLnNoYXBlID0gcmVjdGFuZ2xlO1xyXG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcclxuICAgIH1cclxuICAgIHVubW91bnQoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dC5jdHgpIHtcclxuICAgICAgICAgICAgbGV0IHggPSBnZXRUb3BYKHRoaXMuc2hhcGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRyYXduIHdpdGggU3RhdGUgXCIgKyB0aGlzLnN0YXRlKTtcclxuICAgICAgICAgICAgbGV0IHkgPSBnZXRUb3BZKHRoaXMuc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCB0aGlzLnNoYXBlLmRpbS5sZW5ndGggKiB0aGlzLnN0YXRlLCAwLCB0aGlzLnNoYXBlLmRpbS5sZW5ndGgsIHRoaXMuc2hhcGUuZGltLmhlaWdodCwgeCwgeSwgdGhpcy5zaGFwZS5kaW0ubGVuZ3RoLCB0aGlzLnNoYXBlLmRpbS5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb250ZXh0IGlzIG5vdCBpbmplY3RlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IHRoaXMucGF0aDtcclxuICAgICAgICB0aGlzLnN0YXRlID0gMDtcclxuICAgIH1cclxuICAgIHVwZGF0ZShkdCwgY3R4KSB7XHJcbiAgICAgICAgdGhpcy50aW1lICs9IGR0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXBkYXRpbmcgU3ByaXRlc2hlZXRcIik7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZSA+IHRoaXMuZGVsYXkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUaW1lIGlzIGdyZWF0ZXIgdGhhbiBkZWxheVwiKTtcclxuICAgICAgICAgICAgbGV0IHN0YXRlQ2hhbmdlID0gTWF0aC5mbG9vcih0aGlzLnRpbWUgLyB0aGlzLmRlbGF5KTtcclxuICAgICAgICAgICAgbGV0IG51bVN0YXRlcyA9IE1hdGguZmxvb3IodGhpcy5pbWFnZS53aWR0aCAvIHRoaXMuc2hhcGUuZGltLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW1hZ2Ugd2lkdGggaXMgXCIgKyB0aGlzLmltYWdlLndpZHRoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdGF0ZSBjaGFuZ2UgaXMgXCIgKyBzdGF0ZUNoYW5nZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAoMSArIHRoaXMuc3RhdGUpICUgbnVtU3RhdGVzO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWUgPSB0aGlzLnRpbWUgJSB0aGlzLmRlbGF5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFJlY3RhbmdsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZTtcclxuICAgIH1cclxuICAgIGNvcHkoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5lbnRpdHkgPSBjb21wb25lbnQuZW50aXR5O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGNvbXBvbmVudC52aXNpYmxlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSBjb21wb25lbnQuYWxpdmU7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IGNvbXBvbmVudC5jb21wb25lbnRJZDtcclxuICAgICAgICB0aGlzLnBhdGggPSBjb21wb25lbnQucGF0aDtcclxuICAgICAgICB0aGlzLmRlbGF5ID0gY29tcG9uZW50LmRlbGF5O1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyZWQ7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0ueCA9IGNvbXBvbmVudC50cmFuc2Zvcm0ueDtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS55ID0gY29tcG9uZW50LnRyYW5zZm9ybS55O1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnogPSBjb21wb25lbnQudHJhbnNmb3JtLno7XHJcbiAgICAgICAgcmVjdGFuZ2xlQ29weSh0aGlzLnNoYXBlLCBjb21wb25lbnQuc2hhcGUpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGVudGl0eTogdGhpcy5lbnRpdHksXHJcbiAgICAgICAgICAgIGNvbXBvbmVudElkOiB0aGlzLmNvbXBvbmVudElkLFxyXG4gICAgICAgICAgICBlbmdpbmVUYWc6IHRoaXMuZW5naW5lVGFnLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMudHJhbnNmb3JtLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnZpc2libGUsXHJcbiAgICAgICAgICAgIGFsaXZlOiB0aGlzLmFsaXZlLFxyXG4gICAgICAgICAgICBzcmM6IHRoaXMucGF0aCxcclxuICAgICAgICAgICAgc2hhcGU6IHRoaXMuc2hhcGUsXHJcbiAgICAgICAgICAgIGRlbGF5OiB0aGlzLmRlbGF5LFxyXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcclxuICAgICAgICAgICAgdGltZTogdGhpcy50aW1lLFxyXG4gICAgICAgICAgICBwYXRoOiB0aGlzLnBhdGgsXHJcbiAgICAgICAgICAgIHJlbmRlcmVkOiB0aGlzLnJlbmRlcmVkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcHJpdGVzaGVldC5qcy5tYXAiLCJpbXBvcnQgeyBUaW1lZFNwcml0ZVNoZWV0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9HcmFwaGljcy9TcHJpdGVzaGVldC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgU3dvcmRBbmltIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtuZXcgVGltZWRTcHJpdGVTaGVldChcIi9pbWFnZXMvU3dvcmRTcHJpdGVTaGVldC5wbmdcIiwgeyBkaW06IHsgbGVuZ3RoOiAzMiwgaGVpZ2h0OiAzMiB9LCBwb3M6IHsgeDogMjAsIHk6IDIwLCB6OiAwIH0sIHJvdDogMCB9LCAzLCAzMildO1xyXG4gICAgICAgIHRoaXMuY2xhc3NOYW1lID0gXCJTV09SREFOSU1cIjtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Td29yZEFuaW0uanMubWFwIiwiLy9hZGRpblxyXG5leHBvcnQgZnVuY3Rpb24gc2VydmVyQWRkKHNjZW5lLCBlbnRpdHkpIHtcclxuICAgIGlmIChlbnRpdHkuaWQgPT0gbnVsbCB8fCBlbnRpdHkuaWQgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXR5IGlkIGlzIHVuZGVmaW5lZFwiKTtcclxuICAgIH1cclxuICAgIGVudGl0eS5zY2VuZSA9IHNjZW5lO1xyXG4gICAgc2NlbmUuZW50aXRpZXMuc2V0KGVudGl0eS5pZCwgZW50aXR5KTtcclxuICAgIGlmIChzY2VuZS5uZXdFbnRpdHlRdWV1ZSkge1xyXG4gICAgICAgIGxldCBpc0luUXVldWUgPSBzY2VuZS5uZXdFbnRpdHlRdWV1ZS5oYXMoZW50aXR5LmlkKTtcclxuICAgICAgICBpZiAoIWlzSW5RdWV1ZSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wIG9mIGVudGl0eS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29tcExpc3QgPSBzY2VuZS5lbmdpbmVDb21wb25lbnRzLmdldChjb21wLmVuZ2luZVRhZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3lzdGVtID0gc2NlbmUuc2NlbmVNYW5hZ2VyLnN5c3RlbVRhZy5nZXQoY29tcC5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtLnJlZ2lzdGVyKGNvbXAsIHNjZW5lLmdldFVuaXF1ZUNvbXBvbmVudElkKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbXAuZW5naW5lVGFnICsgXCIgdGFnZ2VkIFN5c3RlbSBpcyBub3QgZm91bmRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzZnVsbHkgYWRkZWQgZW50aXR5c1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZvciAobGV0IGNvbXAgb2YgZW50aXR5LmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgbGV0IGNvbXBMaXN0ID0gc2NlbmUuZW5naW5lQ29tcG9uZW50cy5nZXQoY29tcC5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICBpZiAoY29tcExpc3QpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzeXN0ZW0gPSBzY2VuZS5zY2VuZU1hbmFnZXIuc3lzdGVtVGFnLmdldChjb21wLmVuZ2luZVRhZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3lzdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtLnJlZ2lzdGVyKGNvbXAsIHNjZW5lLmdldFVuaXF1ZUNvbXBvbmVudElkKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29tcC5lbmdpbmVUYWcgKyBcIiB0YWdnZWQgU3lzdGVtIGlzIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NmdWxseSBhZGRlZCBlbnRpdHlzXCIpO1xyXG4gICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVudGl0eShzY2VuZSwgaWQpIHtcclxuICAgIGxldCBlbnRpdHkgPSBzY2VuZS5lbnRpdGllcy5nZXQoaWQpO1xyXG4gICAgaWYgKGVudGl0eSkge1xyXG4gICAgICAgIHNjZW5lLmVudGl0aWVzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgZm9yIChsZXQgYyBvZiBlbnRpdHkuY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbXBvbmVudFwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3lzdGVtXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjLnN5c3RlbSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcG9uZW50IGlkIFwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYy5jb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIGMuc3lzdGVtLnVucmVnaXN0ZXIoYy5jb21wb25lbnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudGl0eTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2VuZVV0aWxzLmpzLm1hcCIsImltcG9ydCB7IEVuZ2luZVR5cGUgfSBmcm9tIFwiLi4vLi4vY29uc3RhbnRzL2VuZ2luZVR5cGUuanNcIjtcclxuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSBcIi4uLy4uL2NvcmUvZW5naW5lLmpzXCI7XHJcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gXCIuLi8uLi9jb3JlL21hbmFnZXJzL1NjZW5lTWFuYWdlci5qc1wiO1xyXG5pbXBvcnQgeyBTb2NrZXRNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2NvcmUvbWFuYWdlcnMvU29ja2V0TWFuYWdlci5qc1wiO1xyXG5pbXBvcnQgeyBzZXJ2ZXJBZGQgfSBmcm9tIFwiLi4vLi4vY29yZS9zY2VuZVV0aWxzLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBTb2NrZXRDbGllbnQge1xyXG4gICAgY29uc3RydWN0b3Ioc29ja2V0TWFwLCBzb2NrZXRDb25maWcpIHtcclxuICAgICAgICB0aGlzLmVtaXNzaW9uUXVldWUgPSBbXTtcclxuICAgICAgICB0aGlzLmxpc3RlblF1ZXVlID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJMb2NrID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFsaXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmVuZ2luZVRhZyA9IFwiRVZFTlRIQU5ETEVSXCI7XHJcbiAgICAgICAgdGhpcy5zbmFwU2hvdHMgPSBbXTtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuc29ja2V0TWFwID0gc29ja2V0TWFwO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuc29ja2V0Q29uZmlnID0gc29ja2V0Q29uZmlnO1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShzeXN0ZW0pIHtcclxuICAgICAgICBzeXN0ZW0ucmVnaXN0ZXJFbWl0dGVyKHRoaXMpO1xyXG4gICAgICAgIHN5c3RlbS5yZWdpc3Rlckxpc3RlbmVyKHRoaXMpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuc29ja2V0TWFwKS5tYXAoKFtrLCB2XSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5zZXQoaywgdik7XHJcbiAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5vbihrLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZ1bmMgPSB0aGlzLmV2ZW50cy5nZXQoayk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnVuYyAmJiAhdGhpcy5saXN0ZW5lckxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RlblF1ZXVlLnNldChrLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzLnNldChcInVwZGF0ZVwiLCAoc2VydmVyRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2NlbmUgPSBTY2VuZU1hbmFnZXIuY3VyclNjZW5lO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNsaWVudCBUaW1lIERpZmZlcmVuY2UgXCIgKyAoc2VydmVyRGF0YS50aW1lIC0gRW5naW5lLnRpbWUpKTtcclxuICAgICAgICAgICAgaWYgKHNjZW5lKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRpdHlTZW50IG9mIHNlcnZlckRhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZXRTY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRTY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcXVlcmllZEVudGl0eSA9IGdldFNjZW5lLmVudGl0aWVzLmdldChlbnRpdHlTZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJpZWRFbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50aXR5U2VudC5jb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZ2luZSA9IGdldFNjZW5lLmVuZ2luZUNvbXBvbmVudHMuZ2V0KGVudGl0eVNlbnQuY29tcG9uZW50c1tpXS5lbmdpbmVUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb21wID0gZW5naW5lPy5nZXQoZW50aXR5U2VudC5jb21wb25lbnRzW2ldLmNvbXBvbmVudElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wLmNvcHkoZW50aXR5U2VudC5jb21wb25lbnRzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFkZGluZyBuZXcgRW50aXR5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVudGl0eUZhY3RvcnkgPSB0aGlzLnNvY2tldENvbmZpZy5lbnRpdHlHZW5lcmF0b3JNYXAuZ2V0KGVudGl0eVNlbnQuZW50aXR5Q2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eUZhY3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW50aXR5ID0gZW50aXR5RmFjdG9yeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5pZCA9IGVudGl0eVNlbnQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnNjZW5lID0gZ2V0U2NlbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbnRpdHkuY29tcG9uZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkuY29tcG9uZW50c1tqXS5jb3B5KGVudGl0eVNlbnQuY29tcG9uZW50c1tqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckFkZChnZXRTY2VuZSwgZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2NlbmUgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5vbihcInVwZGF0ZVwiLCAoc2VydmVyRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZnVuYyA9IHRoaXMuZXZlbnRzLmdldChcInVwZGF0ZVwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJPbiB1cGRhdGUgXCIgKyAoc2VydmVyRGF0YS50aW1lc3RhbXAgLSBFbmdpbmUudGltZSkpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJMb2NrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlblF1ZXVlLnNldChcInVwZGF0ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IFwidXBkYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VydmVyRGF0YVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZExpc3RlbmVyKGNvbXBvbmVudCkge1xyXG4gICAgICAgIGxldCBldmVudHMgPSBjb21wb25lbnQuZ2V0RXZlbnRzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XHJcbiAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5vbihldmVudFswXSwgZXZlbnRbMV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVtaXQoZXZlbnQpIHtcclxuICAgICAgICBTb2NrZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdChldmVudC5ldmVudCwgZXZlbnQuZGF0YSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZHQsIGN0eCkge1xyXG4gICAgICAgIHRoaXMudGltZSArPSBkdDtcclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5lbWlzc2lvblF1ZXVlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLmVtaXNzaW9uUXVldWVbaV0pO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXNzaW9uUXVldWUucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJMb2NrID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKGxldCBpIG9mIHRoaXMubGlzdGVuUXVldWUpIHtcclxuICAgICAgICAgICAgbGV0IGZ1bmMgPSB0aGlzLmV2ZW50cy5nZXQoaVswXSk7XHJcbiAgICAgICAgICAgIGlmIChmdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jKGlbMV0uZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlblF1ZXVlLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lckxvY2sgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHF1ZXVlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmVtaXNzaW9uUXVldWUucHVzaChldmVudCk7XHJcbiAgICB9XHJcbiAgICBjb3B5KGNvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGNvbXBvbmVudC52aXNpYmxlO1xyXG4gICAgICAgIHRoaXMuYWxpdmUgPSBjb21wb25lbnQuYWxpdmU7XHJcbiAgICAgICAgdGhpcy5zb2NrZXRDb25maWcuZW5naW5lVHlwZSA9IGNvbXBvbmVudC5zb2NrZXRDb25maWcuZW5naW5lVHlwZTtcclxuICAgIH1cclxuICAgIGdldEV2ZW50VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJTb2NrZXRTZXJ2ZXJcIjtcclxuICAgIH1cclxuICAgIC8vTGlzdGVuZXIgcG9ydGlvblxyXG4gICAgZXhlY3V0ZShldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICBsZXQgZnVuYyA9IHRoaXMuZXZlbnRzLmdldChldmVudC5ldmVudCk7XHJcbiAgICAgICAgICAgIGlmIChmdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0RXZlbnRzKCkge1xyXG4gICAgICAgIGxldCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5zb2NrZXRNYXApLm1hcCgoW2ssIHZdKSA9PiB7XHJcbiAgICAgICAgICAgIG1hcC5zZXQoaywgdik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICBsZXQgZW5naW5lVHlwZSA9IHRoaXMuc29ja2V0Q29uZmlnLmVuZ2luZVR5cGUgPT0gRW5naW5lVHlwZS5TT0NLRVRDTElFTlQgPyBFbmdpbmVUeXBlLlNPQ0tFVFNFUlZFUiA6IEVuZ2luZVR5cGUuU09DS0VUQ0xJRU5UO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZpc2libGU6IHRoaXMudmlzaWJsZSxcclxuICAgICAgICAgICAgYWxpdmU6IHRoaXMuYWxpdmUsXHJcbiAgICAgICAgICAgIHNvY2tldENvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgZW5naW5lVHlwZTogZW5naW5lVHlwZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Tb2NrZXRTZXJ2ZXJFbWl0dGVyLmpzLm1hcCIsImltcG9ydCB7IEVuZ2luZSB9IGZyb20gXCIuLi9lbmdpbmUvc3JjL2NvcmUvZW5naW5lLmpzXCI7XHJcbmltcG9ydCB7IEdyYXBoaWNzQ29uZmlnLCBTY2VuZUNvbmZpZyB9IGZyb20gXCIuLi9lbmdpbmUvc3JjL2NvcmUvY29uZmlnLmpzXCI7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3NjZW5lcy9lbnRpdGllcy9QbGF5ZXIuanNcIjtcclxuaW1wb3J0IHsgU3RhZ2UgfSBmcm9tIFwiLi4vZW5naW5lL3NyYy9jb3JlL3NjZW5lLmpzXCI7XHJcbmltcG9ydCB7IFRlbXBsYXIgfSBmcm9tIFwiLi9zY2VuZXMvZW50aXRpZXMvVGVtcGxhci5qc1wiO1xyXG5pbXBvcnQgeyBNYWluQ2FtZXJhIH0gZnJvbSBcIi4vc2NlbmVzL2VudGl0aWVzL01haW5DYW1lcmEuanNcIjtcclxuaW1wb3J0IHsgRW5naW5lVHlwZSB9IGZyb20gXCIuLi9lbmdpbmUvc3JjL2NvbnN0YW50cy9lbmdpbmVUeXBlLmpzXCI7XHJcbmltcG9ydCB7IFNvY2tldE1hbmFnZXIgfSBmcm9tIFwiLi4vZW5naW5lL3NyYy9jb3JlL21hbmFnZXJzL1NvY2tldE1hbmFnZXIuanNcIjtcclxuaW1wb3J0IHsgTGFiZWwgfSBmcm9tIFwiLi9zY2VuZXMvZW50aXRpZXMvTGFiZWwuanNcIjtcclxuaW1wb3J0IHsgU3dvcmRBbmltIH0gZnJvbSBcIi4vc2NlbmVzL2VudGl0aWVzL1N3b3JkQW5pbS5qc1wiO1xyXG5pbXBvcnQgeyBNb3VzZUxpc3RlbmVyIH0gZnJvbSBcIi4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9FdmVudC9MaXN0ZW5lci5qc1wiO1xyXG5pbXBvcnQgeyBTb2NrZXRDbGllbnQgfSBmcm9tIFwiLi4vZW5naW5lL3NyYy9jb21wb25lbnRzL0V2ZW50L1NvY2tldFNlcnZlckVtaXR0ZXIuanNcIjtcclxuaW1wb3J0IHsgS2V5Qm9hcmRFbWl0dGVyIH0gZnJvbSBcIi4uL2VuZ2luZS9zcmMvY29tcG9uZW50cy9FdmVudC9LZXlib2FyZC5qc1wiO1xyXG5sZXQgbWFwID0gbmV3IE1hcCgpO1xyXG5tYXAuc2V0KFwiVGVtcGxhclwiLCAoKSA9PiB7IHJldHVybiBuZXcgVGVtcGxhcigpOyB9KTtcclxubWFwLnNldChcIk1haW5DYW1lcmFcIiwgKCkgPT4geyBjb25zb2xlLmxvZyhcImNhbWVyYSBtYWRlXCIpOyByZXR1cm4gbmV3IE1haW5DYW1lcmEoKTsgfSk7XHJcbm1hcC5zZXQoXCJQbGF5ZXJcIiwgKCkgPT4geyByZXR1cm4gbmV3IFBsYXllcigpOyB9KTtcclxubWFwLnNldChcIkxhYmVsXCIsICgpID0+IHsgcmV0dXJuIG5ldyBMYWJlbCgpOyB9KTtcclxubWFwLnNldChcIlNXT1JEQU5JTVwiLCAoKSA9PiB7IHJldHVybiBuZXcgU3dvcmRBbmltKCk7IH0pO1xyXG5jbGFzcyBUZXN0IGV4dGVuZHMgU3RhZ2Uge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXRpZXMpIHtcclxuICAgICAgICBzdXBlcihcIk5hbWVcIik7XHJcbiAgICAgICAgdGhpcy50aW1lID0gMDtcclxuICAgICAgICB0aGlzLmVudGl0aWVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuZW5naW5lQ29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLnNjZW5lQ29uZmlnID0gbmV3IFNjZW5lQ29uZmlnKGVudGl0aWVzKTtcclxuICAgICAgICBsZXQgc29ja2V0ID0gbmV3IFNvY2tldENsaWVudCh7IFwiY29ubmVjdFwiOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIGxldCByb29tSWQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm9vbUFyciA9IHJvb21JZC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICAgICAgICBTb2NrZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdChcImpvaW5lZFwiLCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcIlBsYXllck5hbWVcIiksIHJvb21BcnJbcm9vbUFyci5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVtaXR0aW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoeyBldmVudDogXCJjbGllbnRJbml0aWFsaXplXCIsIGRhdGE6IG51bGwgfSk7XHJcbiAgICAgICAgICAgICAgICAvL2VuZ2luZS5zdGFydCgyMDAwKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImRpc2Nvbm5lY3RcIjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH0gfSwgeyBlbmdpbmVUeXBlOiBFbmdpbmVUeXBlLlNPQ0tFVENMSUVOVCwgZW50aXR5R2VuZXJhdG9yTWFwOiBtYXAgfSk7XHJcbiAgICAgICAgbGV0IG1vdXNlID0gbmV3IE1vdXNlTGlzdGVuZXIoeyBcImNsaWNrXCI6IChjbGlja0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBvc2l0aW9uIHggaXMgXCIgKyBjbGlja0V2ZW50LnBvcy54KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUG9zaXRpb24geSBpcyBcIiArIGNsaWNrRXZlbnQucG9zLnkpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJOYW1lIGlzIFwiICsgY2xpY2tFdmVudC5ldmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoeyBldmVudDogXCJjbGlja1wiLCBkYXRhOiBudWxsIH0pO1xyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3MgPSB7eDogY2xpY2tFdmVudC5wb3MueCwgeTogY2xpY2tFdmVudC5wb3MueSwgejogLTIwfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpbSA9IHtsZW5ndGg6IE1hdGgucmFuZG9tKCkgKiAzMCArIDEgLCBoZWlnaHQ6IE1hdGgucmFuZG9tKCkgKiAzMCArIDF9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSBuZXcgUmVjdGFuZ2xlRW50aXR5KHBvcywgZGltKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkRW50aXR5KHRoaXMuc2NlbmUsIHJlY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHF1YWQgPSBxdWFkdHJlZS5pbnNlcnQocmVjdC5yZWN0YW5nbGUuc2hhcGUpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHF1YWRSZWN0ID0gcXVhZE1hcC5nZXQocXVhZClcclxuICAgICAgICAgICAgICAgICAgICBpZiAocXVhZFJlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC5yZWN0YW5nbGUuY29sb3IgPSBxdWFkUmVjdC5jb2xvclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiZGJsY2xpY2tcIjogKGNsaWNrZXZudCkgPT4ge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goc29ja2V0LCBuZXcgS2V5Qm9hcmRFbWl0dGVyKEVuZ2luZVR5cGUuU09DS0VUQ0xJRU5UKSk7XHJcbiAgICB9XHJcbiAgICBnZXRTY2VuZUNvbmZpZygpIHtcclxuICAgICAgICBsZXQgcGxheWVyID0gbmV3IFBsYXllcih7IHg6IDIwLCB5OiAyMCwgejogMjAgfSwgeyB4OiAwLjEsIHk6IDAsIHo6IDAgfSwgRW5naW5lVHlwZS5TT0NLRVRDTElFTlQpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVDb25maWcuZW50aXRpZXMucHVzaCh0aGlzLCBwbGF5ZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lQ29uZmlnO1xyXG4gICAgfVxyXG59XHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgXHJcbiAgICBsZXQgc29ja2V0OiBTb2NrZXQgPSBpbygpXHJcblxyXG4gICAgbGV0IENPTkZJRzogUGhhc2VyLlR5cGVzLkNvcmUuR2FtZUNvbmZpZyA9IHtcclxuICAgICAgICB0eXBlOiBQaGFzZXIuQVVUTyxcclxuICAgICAgICB0aXRsZTogJ3Rlc3QnLFxyXG4gICAgICAgIHBhcmVudDogJ2dhbWUnLFxyXG4gICAgICAgIHNjZW5lOiBbXHJcbiAgICAgICAgICAgIG5ldyBXYWl0aW5nU2NlbmUoc29ja2V0KVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgc2NhbGU6IHtcclxuICAgICAgICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLkNFTlRFUl9CT1RILFxyXG4gICAgICAgICAgICB3aWR0aDogd2luZG93LnNjcmVlbi5hdmFpbFdpZHRoIC0gKHdpbmRvdy5vdXRlcldpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgLSAod2luZG93Lm91dGVySGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzYWJhM2FcIixcclxuICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSxcclxuXHJcbiAgICAgICAgZG9tOiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUNvbnRhaW5lcjogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICAgICBzb2NrZXQub24oXCJjb25uZWN0XCIsICgpPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkJylcclxuICAgICAgICAgICAgbGV0IHJvb21JZDogc3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXHJcbiAgICAgICAgICAgIGxldCByb29tQXJyOiBzdHJpbmdbXSAgPSByb29tSWQuc3BsaXQoXCIvXCIpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb21BcnJbcm9vbUFyci5sZW5ndGgtMV0pXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvb21JZClcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJBZGRQbGF5ZXJcIiwgd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJQbGF5ZXJOYW1lXCIpLCByb29tQXJyW3Jvb21BcnIubGVuZ3RoLTFdKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgICAgIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGlzY29ubmVjdGVkJylcclxuICAgICAgICB9KVxyXG4gICAgbGV0IGdhbWU6IFBoYXNlci5HYW1lID0gbmV3IFBoYXNlci5HYW1lKENPTkZJRylcclxuICAgIGxldCBwbGF5ZXIgPVxyXG4gICAgKi9cclxuICAgIGxldCBzY2VuZSA9IG5ldyBUZXN0KFtcclxuICAgICAgICBuZXcgTWFpbkNhbWVyYSgpLFxyXG4gICAgXSk7XHJcbiAgICBsZXQgZW5naW5lID0gbmV3IEVuZ2luZSh7XHJcbiAgICAgICAgZW5naW5lVHlwZTogRW5naW5lVHlwZS5TT0NLRVRDTElFTlQsXHJcbiAgICAgICAgZ3JhcGhpY3NDb25maWc6IG5ldyBHcmFwaGljc0NvbmZpZyhcInRlc3RcIiwgXCIxOTNhc1wiLCB7IFwiZGlzcGxheTpmbGV4O2JhY2tncm91bmQtY29sb3JcIjogXCJ3aGl0ZVwiLCBcIndpZHRoXCI6IFwiMTAwJVwiLCBcImhlaWdodFwiOiBcIjEwMCVcIiwgXCJ6LWluZGV4XCI6IFwiMFwiIH0pLFxyXG4gICAgICAgIHNjZW5lQ29uZmlnOiBbXHJcbiAgICAgICAgICAgIHNjZW5lXHJcbiAgICAgICAgXSxcclxuICAgICAgICBwaHlzaWNzQ29uZmlnOiB7fSxcclxuICAgICAgICBzY3JpcHRpbmdDb25maWc6IHt9XHJcbiAgICB9KTtcclxuICAgIGVuZ2luZS5zeXN0ZW1zLnB1c2gobmV3IFNvY2tldE1hbmFnZXIoZW5naW5lLnNjZW5lTWFuYWdlciwge1xyXG4gICAgICAgIGVudGl0eUZhY3RvcnlNYXA6IG1hcCxcclxuICAgICAgICBzb2NrZXRFdmVudE1hcDogKHNvY2tldCkgPT4ge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgc29ja2V0Lm9uKFwiY2xpZW50SW5pdGlhbGl6ZVwiLCAoZW50aXRpZXM6IEVudGl0eVBhY2tldFtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudEluaXRpYWxpemUgYWN0aXZhdGVkXCIpXHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRpdHlTZW50IG9mIGVudGl0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdldFNjZW5lID0gZW5naW5lLnNjZW5lTWFuYWdlci5zY2VuZXMuZ2V0KGVudGl0eVNlbnQuc2NlbmVJZClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0U2NlbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0VudGl0eUZhY3RvcnkgPSBtYXAuZ2V0KGVudGl0eVNlbnQuZW50aXR5Q2xhc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdFbnRpdHlGYWN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RW50aXR5ID0gbmV3RW50aXR5RmFjdG9yeSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbnRpdHkuaWQgPSBlbnRpdHlTZW50LmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbnRpdHkuc2NlbmUgPSBlbmdpbmUuc2NlbmVNYW5hZ2VyLnNjZW5lcy5nZXQoZW50aXR5U2VudC5zY2VuZUlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdFbnRpdHkuY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VudGl0eS5jb21wb25lbnRzW2ldLmNvcHkoZW50aXR5U2VudC5jb21wb25lbnRzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2NlbmUuYWRkRW50aXR5KGdldFNjZW5lLCBuZXdFbnRpdHksIC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBZGRlZCBcIisgbmV3RW50aXR5LmNsYXNzTmFtZSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBlbnRpdHk7IENsYXNzIG5hbWU6IFwiICsgZW50aXR5U2VudC5lbnRpdHlDbGFzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjZW5lIG5vdCBmb3VuZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgIGZvciAobGV0IGUgb2YgZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSAwXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5pZCApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZCA9IGUuaWRcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2VudCBpdGVtcyBpcyBcIiArIGVudGl0eSApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbmdpbmUuc2NlbmVNYW5hZ2VyLmdldEN1cnJlbnRTY2VuZSgpLmFkZEVudGl0eShlbmdpbmUuc2NlbmVNYW5hZ2VyLmdldEN1cnJlbnRTY2VuZSgpLGUgLCBlLmlkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIC8vfSlcclxuICAgICAgICAgICAgc29ja2V0Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIGxldCByb29tSWQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm9vbUFyciA9IHJvb21JZC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcImpvaW5lZFwiLCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcIlBsYXllck5hbWVcIiksIHJvb21BcnJbcm9vbUFyci5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVtaXR0aW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoXCJjbGllbnRJbml0aWFsaXplXCIpO1xyXG4gICAgICAgICAgICAgICAgLy9lbmdpbmUuc3RhcnQoMjAwMClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkpO1xyXG4gICAgZW5naW5lLnN0YXJ0KDEwKTtcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIkV2ZW50SGFuZGxlciIsImNvbnN0cnVjdG9yIiwiZXZlbnRDb25maWciLCJrZXlib2FyZCIsIm1vdXNlIiwidGhpcyIsInRhZyIsImRlbGV0ZWQiLCJjb21wb25lbnRzIiwiTWFwIiwiZXZlbnRzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHVzaCIsInJlZ2lzdGVyTGlzdGVuZXIiLCJyZWdpc3RlckVtaXR0ZXIiLCJnZXRDb25maWciLCJyZWdpc3RlciIsImNvbXAiLCJpZCIsInVuZGVmaW5lZCIsImNvbXBvbmVudElkIiwic3lzdGVtIiwic2V0IiwiY29uc29sZSIsImxvZyIsInVucmVnaXN0ZXIiLCJhbGl2ZSIsInVwZGF0ZSIsImR0Iiwic2l6ZSIsImtleXMiLCJsZW5ndGgiLCJwb3AiLCJkZWxldGUiLCJHUkFQSElDU19UQUciLCJRdWFkVHJlZSIsImdldFF1YWQiLCJwYXJlbnROb2RlIiwiUXVhZFRyZWVOb2RlIiwicXVlcnkiLCJib3giLCJjbGVhciIsImluc2VydCIsIml0ZW0iLCJxdWFkTm9kZSIsInJlbW92ZSIsIkVycm9yIiwidG9TdHJpbmciLCJkZXB0aCIsImNoaWxkcmVuIiwiaXRlbXMiLCJtYXhEZXB0aCIsImFyZWEiLCJyZXNpemUiLCJsaXN0IiwicXVlcnlIZWxwZXIiLCJhbnN3ZXIiLCJpIiwiY29sbGlkZXMiLCJnZXRSZWN0YW5nbGUiLCJjb250YWlucyIsImdldEl0ZW1MaXN0IiwicmVjdGFuZ2xlIiwicG9zIiwieCIsImRpbSIsInkiLCJoZWlnaHQiLCJjb3VudCIsInRhYnMiLCJyZXR1cm5lZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb250YWluZXIiLCJjb250YWluZWQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsInJlY3RhbmdsZTEiLCJyZWN0YW5nbGUyIiwiUXVhZFRyZWVTdHJhdGVneSIsImdyYXBoaWNzRW5naW5lIiwicmVnaXN0ZWRFbGVtZW50cyIsInF1YWR0cmVlIiwicmVnaXN0ZXJTdHJhdGVneSIsImNvbXBvbmVudCIsImRlcmVnaXN0ZXJTdHJhdGVneSIsInJlbmRlciIsInJlbmRlcmluZ0FyciIsIkdyYXBoaWNzRW5naW5lIiwiZ3JhcGhpY3NDb25maWciLCJjb250ZXh0IiwicmVuZGVyaW5nIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsIndpZHRoIiwiYm9keSIsIm1hcmdpbiIsImNvbnRleHRJbmZvIiwieiIsInJvdCIsImdldENhbnZhcyIsInJlbmRlclN0cmF0ZWd5IiwicmVuZGVyZWQiLCJpbml0aWFsaXplIiwiZW50aXR5IiwiY3R4IiwiYyIsInNldFNjZW5lIiwic2NlbmUiLCJlbmdpbmVDb21wb25lbnRzIiwicmVnaXN0ZXJEb21FbGVtZW50cyIsIlBoeXNpY3NFbmdpbmUiLCJjb25maWciLCJFbmdpbmVUeXBlIiwiU2NyaXB0aW5nRW5naW5lIiwiZW5naW5lVHlwZSIsIkJPVEgiLCJDb250ZXh0SW5mbyIsInNldHVwIiwiY2FudmFzIiwiZ2VuZXJhdGVDYW52YXMiLCJnZXRDb250ZXh0IiwiZGl2IiwiZ2VuZXJhdGVEaXYiLCJwYXJlbnQiLCJjcmVhdGVFbGVtZW50IiwiekluZGV4IiwiZGlzcGxheSIsImp1c3RpZnlDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJjYW52YXNJRCIsInBhcnNlU3R5bGUiLCJzZXRBdHRyaWJ1dGUiLCJnZXRDdHgiLCJnZXRFbGVtZW50QnlJZCIsIkhUTUxDYW52YXNFbGVtZW50Iiwic3R5bGVPYmplY3QiLCJjc3NBcnJheSIsImVudHJpZXMiLCJtYXAiLCJrIiwidiIsImpvaW4iLCJiYWNrZ3JvdW5kIiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsInBvc2l0aW9uIiwiU2NlbmVNYW5hZ2VyIiwiZW5naW5lQ29uZmlnIiwic2NlbmVzIiwic3lzdGVtcyIsInN5c3RlbVRhZyIsIlNPQ0tFVENMSUVOVCIsIlNPQ0tFVFNFUlZFUiIsIkNMSUVOVE9OTFkiLCJuZXdTY2VuZSIsInNjZW5lTWFuYWdlciIsIm5hbWUiLCJzY2VuZUNvbmZpZ3MiLCJjdXJyZW50SWR4Iiwic3dpdGNoU2NlbmVzIiwic3lzIiwiZ2V0Q3VycmVudFNjZW5lIiwiY3VyciIsImlkeCIsImN1cnJTY2VuZSIsImdldFVuaXF1ZUlkIiwiZ2V0VW5pcXVlQ29tcG9uZW50SWQiLCJOYWl2ZUNvbGxpc2lvbiIsInJlZ2lzdGVyQ29tcG9uZW50Iiwia2V5MSIsImNvbDEiLCJ2aXNpYmxlIiwia2V5MiIsImNvbDIiLCJjaGVja0NvbGxpc2lvbiIsIkNvbGxpc2lvblN5c3RlbSIsImJvdW5kcyIsImNvbGxpc2lvblN0cmF0ZWd5IiwicG9wcGVkIiwiZGVsZXRlQ29tcG9uZW50IiwiY29sIiwiRW5naW5lIiwiZ2FtZUNvbmZpZyIsInNlcnZlclRpbWUiLCJjbGllbnRUaW1lIiwicGh5c2ljc0NvbmZpZyIsInNjcmlwdGluZ0NvbmZpZyIsImNvbGxpc2lvbkNvbmZpZyIsImdyYXBoaWNzIiwic2NlbmVDb25maWciLCJydW5uaW5nIiwic3RhcnQiLCJnZXRTY2VuZUNvbmZpZyIsImVudGl0aWVzIiwiYWRkRW50aXR5IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidGltZXN0YW1wIiwidGltZSIsInNldFRpbWVvdXQiLCJzZXJ2ZXJVcGRhdGUiLCJwcm9jZXNzIiwiaHJ0aW1lIiwiYmlnaW50IiwiY3VyclRpbWUiLCJkZWx0YVRpbWUiLCJ0aW1lb3V0IiwicmVhbERlbHRhIiwiTnVtYmVyIiwidXBkYXRlVGltZSIsIkdyYXBoaWNzQ29uZmlnIiwiU2NlbmVDb25maWciLCJUcmFuc2Zvcm0iLCJ2ZWwiLCJhY2NlbCIsImVuZ2luZVRhZyIsImNvcHkiLCJ0cmFuc2Zvcm0iLCJ0b0pTT04iLCJnZXRUb3BYIiwiZ2V0VG9wWSIsIlNwcml0ZSIsInNoYXBlIiwidW5tb3VudCIsImVsZW1lbnQiLCJ2aXNpdCIsImRyYXdJbWFnZSIsInNldFNyYyIsInJlbmRlcnJlZCIsIk1vdXNlTGlzdGVuZXIiLCJjbGlja01hcCIsImV4ZWN1dGUiLCJmdW5jIiwiZXZlbnROYW1lIiwiZ2V0RXZlbnRUeXBlIiwibGlzdGVuZXIiLCJnZXRFdmVudHMiLCJTY3JpcHQiLCJjYWxsYmFjayIsInNjcmlwdCIsImNvbXBvbmVuSWQiLCJQbGF5ZXIiLCJjbGFzc05hbWUiLCJzcHJpdGUiLCJjbGljayIsIlN0YWdlIiwic3RhZ2VOYW1lIiwidW5pcXVlSWQiLCJjb21wTGlzdCIsInJlbW92ZUVudGl0eSIsImFkZFNlcnZlckVudGl0eSIsIm5ld0VudGl0eVF1ZXVlIiwiaGFzIiwiVGVtcGxhciIsIk1hdGgiLCJyYW5kb20iLCJDYW1lcmEiLCJzY2FsZSIsImNhbWVyYSIsImFycmF5IiwidHJhbnNsYXRlIiwiY2xlYXJSZWN0Iiwic2F2ZSIsIktleWJvYXJkTGlzdGVuZXIiLCJLZXlCb2FyZEVtaXR0ZXIiLCJlbmdpbmUiLCJsaXN0ZW5lcnMiLCJTZXQiLCJhZGRMaXN0ZW5lciIsImFkZCIsImVtaXQiLCJNYWluQ2FtZXJhIiwiUEFDS0VUX1RZUEVTIiwiY3JlYXRlIiwiUEFDS0VUX1RZUEVTX1JFVkVSU0UiLCJmb3JFYWNoIiwiRVJST1JfUEFDS0VUIiwidHlwZSIsImRhdGEiLCJ3aXRoTmF0aXZlQmxvYiIsIkJsb2IiLCJ3aXRoTmF0aXZlQXJyYXlCdWZmZXIiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsImJ1ZmZlciIsImVuY29kZVBhY2tldCIsInN1cHBvcnRzQmluYXJ5IiwiZW5jb2RlQmxvYkFzQmFzZTY0IiwiZmlsZVJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJjb250ZW50IiwicmVzdWx0Iiwic3BsaXQiLCJyZWFkQXNEYXRhVVJMIiwidG9BcnJheSIsIlVpbnQ4QXJyYXkiLCJieXRlT2Zmc2V0IiwiYnl0ZUxlbmd0aCIsIlRFWFRfRU5DT0RFUiIsImVuY29kZVBhY2tldFRvQmluYXJ5IiwicGFja2V0IiwiYXJyYXlCdWZmZXIiLCJ0aGVuIiwiZW5jb2RlZCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwibG9va3VwIiwiY2hhcnMiLCJjaGFyQ29kZUF0IiwiZGVjb2RlUGFja2V0IiwiZW5jb2RlZFBhY2tldCIsImJpbmFyeVR5cGUiLCJtYXBCaW5hcnkiLCJjaGFyQXQiLCJkZWNvZGVCYXNlNjRQYWNrZXQiLCJzdWJzdHJpbmciLCJkZWNvZGVkIiwiYmFzZTY0IiwiZW5jb2RlZDEiLCJlbmNvZGVkMiIsImVuY29kZWQzIiwiZW5jb2RlZDQiLCJidWZmZXJMZW5ndGgiLCJsZW4iLCJwIiwiYXJyYXlidWZmZXIiLCJieXRlcyIsImRlY29kZSIsIlNFUEFSQVRPUiIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIlRFWFRfREVDT0RFUiIsIkVtaXR0ZXIiLCJtaXhpbiIsIm9uIiwiZm4iLCJfY2FsbGJhY2tzIiwib25jZSIsIm9mZiIsImFwcGx5IiwiYXJndW1lbnRzIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2IiLCJjYWxsYmFja3MiLCJzcGxpY2UiLCJhcmdzIiwiQXJyYXkiLCJzbGljZSIsImVtaXRSZXNlcnZlZCIsImhhc0xpc3RlbmVycyIsImdsb2JhbFRoaXNTaGltIiwic2VsZiIsIkZ1bmN0aW9uIiwicGljayIsImF0dHIiLCJyZWR1Y2UiLCJhY2MiLCJOQVRJVkVfU0VUX1RJTUVPVVQiLCJOQVRJVkVfQ0xFQVJfVElNRU9VVCIsImNsZWFyVGltZW91dCIsImluc3RhbGxUaW1lckZ1bmN0aW9ucyIsIm9wdHMiLCJ1c2VOYXRpdmVUaW1lcnMiLCJzZXRUaW1lb3V0Rm4iLCJiaW5kIiwiY2xlYXJUaW1lb3V0Rm4iLCJUcmFuc3BvcnRFcnJvciIsInJlYXNvbiIsImRlc2NyaXB0aW9uIiwic3VwZXIiLCJUcmFuc3BvcnQiLCJ3cml0YWJsZSIsInNvY2tldCIsIm9uRXJyb3IiLCJvcGVuIiwicmVhZHlTdGF0ZSIsImRvT3BlbiIsImNsb3NlIiwiZG9DbG9zZSIsIm9uQ2xvc2UiLCJzZW5kIiwicGFja2V0cyIsIndyaXRlIiwib25PcGVuIiwib25EYXRhIiwib25QYWNrZXQiLCJkZXRhaWxzIiwicGF1c2UiLCJvblBhdXNlIiwiY3JlYXRlVXJpIiwic2NoZW1hIiwiX2hvc3RuYW1lIiwiX3BvcnQiLCJwYXRoIiwiX3F1ZXJ5IiwiaG9zdG5hbWUiLCJpbmRleE9mIiwicG9ydCIsInNlY3VyZSIsImVuY29kZWRRdWVyeSIsInN0ciIsImVuY29kZVVSSUNvbXBvbmVudCIsImFscGhhYmV0IiwicHJldiIsInNlZWQiLCJudW0iLCJmbG9vciIsInllYXN0Iiwibm93IiwiRGF0ZSIsIlhNTEh0dHBSZXF1ZXN0IiwiZXJyIiwiaGFzQ09SUyIsIlhIUiIsInhkb21haW4iLCJlIiwiY29uY2F0IiwiZW1wdHkiLCJoYXNYSFIyIiwicmVzcG9uc2VUeXBlIiwiUmVxdWVzdCIsInVyaSIsIm1ldGhvZCIsIl9hIiwieGQiLCJ4aHIiLCJleHRyYUhlYWRlcnMiLCJzZXREaXNhYmxlSGVhZGVyQ2hlY2siLCJzZXRSZXF1ZXN0SGVhZGVyIiwiY29va2llSmFyIiwiYWRkQ29va2llcyIsIndpdGhDcmVkZW50aWFscyIsInJlcXVlc3RUaW1lb3V0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicGFyc2VDb29raWVzIiwic3RhdHVzIiwib25Mb2FkIiwiaW5kZXgiLCJyZXF1ZXN0c0NvdW50IiwicmVxdWVzdHMiLCJjbGVhbnVwIiwiZnJvbUVycm9yIiwiYWJvcnQiLCJyZXNwb25zZVRleHQiLCJ1bmxvYWRIYW5kbGVyIiwiYXR0YWNoRXZlbnQiLCJuZXh0VGljayIsIlByb21pc2UiLCJyZXNvbHZlIiwiV2ViU29ja2V0IiwiTW96V2ViU29ja2V0IiwiaXNSZWFjdE5hdGl2ZSIsIm5hdmlnYXRvciIsInByb2R1Y3QiLCJ0b0xvd2VyQ2FzZSIsInNob3VsZEluY2x1ZGVCaW5hcnlIZWFkZXIiLCJ0cmFuc3BvcnRzIiwid2Vic29ja2V0IiwiZm9yY2VCYXNlNjQiLCJjaGVjayIsInByb3RvY29scyIsImhlYWRlcnMiLCJ3cyIsImFkZEV2ZW50TGlzdGVuZXJzIiwib25vcGVuIiwiYXV0b1VucmVmIiwiX3NvY2tldCIsInVucmVmIiwib25jbG9zZSIsImNsb3NlRXZlbnQiLCJvbm1lc3NhZ2UiLCJldiIsIm9uZXJyb3IiLCJsYXN0UGFja2V0IiwidGltZXN0YW1wUmVxdWVzdHMiLCJ0aW1lc3RhbXBQYXJhbSIsImI2NCIsIndlYnRyYW5zcG9ydCIsIldlYlRyYW5zcG9ydCIsInRyYW5zcG9ydCIsInRyYW5zcG9ydE9wdGlvbnMiLCJjbG9zZWQiLCJjYXRjaCIsInJlYWR5IiwiY3JlYXRlQmlkaXJlY3Rpb25hbFN0cmVhbSIsInN0cmVhbSIsInJlYWRlciIsInJlYWRhYmxlIiwiZ2V0UmVhZGVyIiwiYmluYXJ5RmxhZyIsIndyaXRlciIsImdldFdyaXRlciIsInJlYWQiLCJkb25lIiwiaXNCaW5hcnkiLCJUZXh0RGVjb2RlciIsImlzUGxhaW5CaW5hcnkiLCJkZWNvZGVQYWNrZXRGcm9tQmluYXJ5IiwiaGFuZHNoYWtlIiwic2lkIiwib2YiLCJwb2xsaW5nIiwibG9jYXRpb24iLCJpc1NTTCIsInByb3RvY29sIiwiY3JlYXRlQ29va2llSmFyIiwicG9sbCIsInRvdGFsIiwiZG9Qb2xsIiwiZW5jb2RlZFBheWxvYWQiLCJlbmNvZGVkUGFja2V0cyIsImRlY29kZWRQYWNrZXQiLCJkZWNvZGVQYXlsb2FkIiwiZW5jb2RlUGF5bG9hZCIsImRvV3JpdGUiLCJyZXF1ZXN0IiwiYXNzaWduIiwicmVxIiwieGhyU3RhdHVzIiwicG9sbFhociIsInJlIiwicGFydHMiLCJwYXJzZSIsImIiLCJyZXBsYWNlIiwibSIsImV4ZWMiLCJzb3VyY2UiLCJob3N0IiwiYXV0aG9yaXR5IiwiaXB2NnVyaSIsInBhdGhOYW1lcyIsIm5hbWVzIiwicXVlcnlLZXkiLCIkMCIsIiQxIiwiJDIiLCJTb2NrZXQiLCJ3cml0ZUJ1ZmZlciIsInByZXZCdWZmZXJMZW4iLCJhZ2VudCIsInVwZ3JhZGUiLCJyZW1lbWJlclVwZ3JhZGUiLCJhZGRUcmFpbGluZ1NsYXNoIiwicmVqZWN0VW5hdXRob3JpemVkIiwicGVyTWVzc2FnZURlZmxhdGUiLCJ0aHJlc2hvbGQiLCJjbG9zZU9uQmVmb3JldW5sb2FkIiwicXMiLCJxcnkiLCJwYWlycyIsImwiLCJwYWlyIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidXBncmFkZXMiLCJwaW5nSW50ZXJ2YWwiLCJwaW5nVGltZW91dCIsInBpbmdUaW1lb3V0VGltZXIiLCJiZWZvcmV1bmxvYWRFdmVudExpc3RlbmVyIiwib2ZmbGluZUV2ZW50TGlzdGVuZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJFSU8iLCJwcmlvcldlYnNvY2tldFN1Y2Nlc3MiLCJzaGlmdCIsInNldFRyYW5zcG9ydCIsIm9uRHJhaW4iLCJwcm9iZSIsImZhaWxlZCIsIm9uVHJhbnNwb3J0T3BlbiIsIm1zZyIsInVwZ3JhZGluZyIsImZsdXNoIiwiZnJlZXplVHJhbnNwb3J0IiwiZXJyb3IiLCJvblRyYW5zcG9ydENsb3NlIiwib251cGdyYWRlIiwidG8iLCJvbkhhbmRzaGFrZSIsInJlc2V0UGluZ1RpbWVvdXQiLCJzZW5kUGFja2V0IiwiY29kZSIsImZpbHRlclVwZ3JhZGVzIiwibWF4UGF5bG9hZCIsImdldFdyaXRhYmxlUGFja2V0cyIsInBheWxvYWRTaXplIiwidXRmOExlbmd0aCIsImNlaWwiLCJvcHRpb25zIiwiY29tcHJlc3MiLCJjbGVhbnVwQW5kQ2xvc2UiLCJ3YWl0Rm9yVXBncmFkZSIsImZpbHRlcmVkVXBncmFkZXMiLCJqIiwid2l0aE5hdGl2ZUZpbGUiLCJGaWxlIiwiaGFzQmluYXJ5IiwiaXNBcnJheSIsImRlY29uc3RydWN0UGFja2V0IiwiYnVmZmVycyIsInBhY2tldERhdGEiLCJwYWNrIiwiX2RlY29uc3RydWN0UGFja2V0IiwiYXR0YWNobWVudHMiLCJwbGFjZWhvbGRlciIsIl9wbGFjZWhvbGRlciIsIm5ld0RhdGEiLCJyZWNvbnN0cnVjdFBhY2tldCIsIl9yZWNvbnN0cnVjdFBhY2tldCIsIlJFU0VSVkVEX0VWRU5UUyIsIlBhY2tldFR5cGUiLCJFbmNvZGVyIiwicmVwbGFjZXIiLCJFVkVOVCIsIkFDSyIsImVuY29kZUFzU3RyaW5nIiwiZW5jb2RlQXNCaW5hcnkiLCJCSU5BUllfRVZFTlQiLCJCSU5BUllfQUNLIiwibnNwIiwiZGVjb25zdHJ1Y3Rpb24iLCJ1bnNoaWZ0IiwiaXNPYmplY3QiLCJEZWNvZGVyIiwicmV2aXZlciIsInJlY29uc3RydWN0b3IiLCJkZWNvZGVTdHJpbmciLCJpc0JpbmFyeUV2ZW50IiwiQmluYXJ5UmVjb25zdHJ1Y3RvciIsInRha2VCaW5hcnlEYXRhIiwiYnVmIiwibmV4dCIsInBheWxvYWQiLCJ0cnlQYXJzZSIsInN1YnN0ciIsImlzUGF5bG9hZFZhbGlkIiwic3RhdGljIiwiQ09OTkVDVCIsIkRJU0NPTk5FQ1QiLCJDT05ORUNUX0VSUk9SIiwiZGVzdHJveSIsImZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24iLCJyZWNvblBhY2siLCJiaW5EYXRhIiwiZnJlZXplIiwiY29ubmVjdCIsImNvbm5lY3RfZXJyb3IiLCJkaXNjb25uZWN0IiwiZGlzY29ubmVjdGluZyIsIm5ld0xpc3RlbmVyIiwiaW8iLCJjb25uZWN0ZWQiLCJyZWNvdmVyZWQiLCJyZWNlaXZlQnVmZmVyIiwic2VuZEJ1ZmZlciIsIl9xdWV1ZSIsIl9xdWV1ZVNlcSIsImlkcyIsImFja3MiLCJmbGFncyIsImF1dGgiLCJfb3B0cyIsIl9hdXRvQ29ubmVjdCIsImRpc2Nvbm5lY3RlZCIsInN1YkV2ZW50cyIsInN1YnMiLCJvbnBhY2tldCIsImFjdGl2ZSIsIl9yZWFkeVN0YXRlIiwicmV0cmllcyIsImZyb21RdWV1ZSIsInZvbGF0aWxlIiwiX2FkZFRvUXVldWUiLCJhY2siLCJfcmVnaXN0ZXJBY2tDYWxsYmFjayIsImlzVHJhbnNwb3J0V3JpdGFibGUiLCJub3RpZnlPdXRnb2luZ0xpc3RlbmVycyIsImFja1RpbWVvdXQiLCJ0aW1lciIsImVtaXRXaXRoQWNrIiwid2l0aEVyciIsInJlamVjdCIsImFyZzEiLCJhcmcyIiwidHJ5Q291bnQiLCJwZW5kaW5nIiwicmVzcG9uc2VBcmdzIiwiX2RyYWluUXVldWUiLCJmb3JjZSIsIl9wYWNrZXQiLCJfc2VuZENvbm5lY3RQYWNrZXQiLCJfcGlkIiwicGlkIiwib2Zmc2V0IiwiX2xhc3RPZmZzZXQiLCJvbmNvbm5lY3QiLCJvbmV2ZW50Iiwib25hY2siLCJvbmRpc2Nvbm5lY3QiLCJtZXNzYWdlIiwiZW1pdEV2ZW50IiwiX2FueUxpc3RlbmVycyIsInNlbnQiLCJlbWl0QnVmZmVyZWQiLCJzdWJEZXN0cm95Iiwib25BbnkiLCJwcmVwZW5kQW55Iiwib2ZmQW55IiwibGlzdGVuZXJzQW55Iiwib25BbnlPdXRnb2luZyIsIl9hbnlPdXRnb2luZ0xpc3RlbmVycyIsInByZXBlbmRBbnlPdXRnb2luZyIsIm9mZkFueU91dGdvaW5nIiwibGlzdGVuZXJzQW55T3V0Z29pbmciLCJCYWNrb2ZmIiwibXMiLCJtaW4iLCJtYXgiLCJmYWN0b3IiLCJqaXR0ZXIiLCJhdHRlbXB0cyIsImR1cmF0aW9uIiwicG93IiwicmFuZCIsImRldmlhdGlvbiIsInJlc2V0Iiwic2V0TWluIiwic2V0TWF4Iiwic2V0Sml0dGVyIiwiTWFuYWdlciIsIm5zcHMiLCJyZWNvbm5lY3Rpb24iLCJyZWNvbm5lY3Rpb25BdHRlbXB0cyIsIkluZmluaXR5IiwicmVjb25uZWN0aW9uRGVsYXkiLCJyZWNvbm5lY3Rpb25EZWxheU1heCIsInJhbmRvbWl6YXRpb25GYWN0b3IiLCJiYWNrb2ZmIiwiX3BhcnNlciIsInBhcnNlciIsImVuY29kZXIiLCJkZWNvZGVyIiwiYXV0b0Nvbm5lY3QiLCJfcmVjb25uZWN0aW9uIiwiX3JlY29ubmVjdGlvbkF0dGVtcHRzIiwiX3JlY29ubmVjdGlvbkRlbGF5IiwiX3JhbmRvbWl6YXRpb25GYWN0b3IiLCJfcmVjb25uZWN0aW9uRGVsYXlNYXgiLCJfdGltZW91dCIsIm1heWJlUmVjb25uZWN0T25PcGVuIiwiX3JlY29ubmVjdGluZyIsInJlY29ubmVjdCIsInNraXBSZWNvbm5lY3QiLCJvcGVuU3ViRGVzdHJveSIsImVycm9yU3ViIiwib25waW5nIiwib25kYXRhIiwib25kZWNvZGVkIiwiX2Rlc3Ryb3kiLCJfY2xvc2UiLCJkZWxheSIsIm9ucmVjb25uZWN0IiwiYXR0ZW1wdCIsImNhY2hlIiwicGFyc2VkIiwibG9jIiwidGVzdCIsImhyZWYiLCJ1cmwiLCJzYW1lTmFtZXNwYWNlIiwiZm9yY2VOZXciLCJtdWx0aXBsZXgiLCJTb2NrZXRNYW5hZ2VyIiwiZW1pdHRlcnMiLCJ1bnJlZ2lzdGVyZWQiLCJlbWl0dGVyIiwiVGV4dCIsInRleHQiLCJmaWxsVGV4dCIsInRvSnNvbiIsIkxhYmVsIiwiVGltZWRTcHJpdGVTaGVldCIsInN0YXRlIiwic3RhdGVDaGFuZ2UiLCJudW1TdGF0ZXMiLCJyZWNlaXZlciIsInNlbmRlciIsIlN3b3JkQW5pbSIsInNlcnZlckFkZCIsIlNvY2tldENsaWVudCIsInNvY2tldE1hcCIsInNvY2tldENvbmZpZyIsImVtaXNzaW9uUXVldWUiLCJsaXN0ZW5RdWV1ZSIsImxpc3RlbmVyTG9jayIsInNuYXBTaG90cyIsImdldEluc3RhbmNlIiwic2VydmVyRGF0YSIsImVudGl0eVNlbnQiLCJnZXRTY2VuZSIsImVudGl0eUZhY3RvcnkiLCJlbnRpdHlHZW5lcmF0b3JNYXAiLCJlbnRpdHlDbGFzcyIsInF1ZXVlRXZlbnQiLCJUZXN0Iiwicm9vbUFyciIsInBhdGhuYW1lIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiY2xpY2tFdmVudCIsImNsaWNrZXZudCIsInBsYXllciIsImVudGl0eUZhY3RvcnlNYXAiLCJzb2NrZXRFdmVudE1hcCJdLCJzb3VyY2VSb290IjoiIn0=